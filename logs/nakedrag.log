2025-05-31 15:39:27,101 - __main__ - INFO - シンプルな検索テストを実行します。クエリ: rag_initializerの仕様について教えて
2025-05-31 15:39:27,105 - src.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-05-31 15:39:27,116 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-05-31 15:39:27,116 - embedding_generator - INFO - CUDAデバイス数: 1
2025-05-31 15:39:27,117 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-05-31 15:39:27,117 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-05-31 15:39:29,079 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-05-31 15:39:29,079 - src.rag_searcher - INFO - PyTorchデバイス: cuda
2025-05-31 15:39:29,084 - src.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-05-31 15:39:29,084 - src.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-05-31 15:39:29,084 - src.rag_searcher - INFO - 検索フローを開始します。ユーザークエリ: rag_initializerの仕様について教えて
2025-05-31 15:39:29,085 - src.rag_searcher - INFO - ユーザークエリの理解を開始します: rag_initializerの仕様について教えて
2025-05-31 15:39:31,280 - src.rag_searcher - INFO - 検索クエリに変換しました: rag_initializer 仕様 使い方 設定
2025-05-31 15:39:31,280 - src.rag_searcher - INFO - 検索を実行します: rag_initializer 仕様 使い方 設定
2025-05-31 15:39:31,280 - src.rag_class - INFO - 検索を実行します。クエリ: rag_initializer 仕様 使い方 設定
2025-05-31 15:39:31,280 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-05-31 15:39:31,280 - embedding_generator - INFO - CUDAデバイス数: 1
2025-05-31 15:39:31,280 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-05-31 15:39:31,281 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-05-31 15:39:32,726 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-05-31 15:39:32,960 - RAGDatabase - INFO - データベースに接続しました。
2025-05-31 15:39:32,972 - src.rag_class - INFO - 検索結果: 10件
2025-05-31 15:39:32,972 - src.rag_searcher - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-05-31 15:39:32,972 - src.rag_searcher - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-05-31 15:39:32,973 - src.rag_searcher - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-05-31 15:39:32,973 - src.rag_searcher - INFO - 検索結果 rag_service.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_service.md (original_filepathなし)
2025-05-31 15:39:32,973 - src.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-05-31 15:39:32,973 - src.rag_searcher - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-05-31 15:39:32,973 - src.rag_searcher - INFO - 検索結果 rag_service.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_service.md (original_filepathなし)
2025-05-31 15:39:32,973 - src.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-05-31 15:39:32,973 - src.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-05-31 15:39:32,973 - src.rag_searcher - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-05-31 15:39:32,973 - src.rag_searcher - INFO - 検索結果: 10件, 重複排除後のソース数: 4件
2025-05-31 15:39:32,973 - src.rag_searcher - INFO - 回答の生成を開始します
2025-05-31 15:40:11,871 - src.rag_searcher - INFO - 回答の生成が完了しました
2025-05-31 15:40:11,871 - src.rag_searcher - INFO - 検索フローが完了しました
2025-05-31 15:40:11,871 - src.rag_class - INFO - リソースのクリーンアップを開始します。
2025-05-31 15:40:11,872 - RAGDatabase - INFO - データベースから切断しました。
2025-05-31 15:40:11,872 - src.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-05-31 15:40:11,873 - __main__ - INFO - 検索結果を保存しました: results\20250531_154011_rag_initializerの仕様につ.md
2025-05-31 20:41:37,095 - src.firewall_manager - INFO - プライベートネットワークのみでポートを開放します。
2025-05-31 20:41:37,095 - src.firewall_manager - WARNING - パブリックネットワークでポートを開放します。セキュリティ上のリスクがあります。
2025-05-31 20:41:37,096 - src.firewall_manager - INFO - ファイアウォールルール 'TestRule' は既に存在します
2025-05-31 20:41:37,310 - src.firewall_manager - ERROR - ファイアウォールルールの確認中にエラーが発生しました: argument of type 'NoneType' is not iterable
2025-05-31 20:41:37,891 - src.firewall_manager - ERROR - ファイアウォールルールの追加に失敗しました
2025-05-31 20:41:37,892 - src.firewall_manager - INFO - ファイアウォールルール 'TestRule' を追加しました（ポート: 8080,5000）
2025-05-31 20:41:37,892 - src.firewall_manager - WARNING - このモジュールはWindowsでのみ動作します。現在のOS: Linux
2025-05-31 20:41:37,932 - src.firewall_manager - ERROR - ファイアウォールルールの確認中にエラーが発生しました: argument of type 'NoneType' is not iterable
2025-05-31 20:41:37,932 - src.firewall_manager - INFO - ファイアウォールルール 'TestRule' は存在しません
2025-05-31 20:41:37,945 - src.firewall_manager - INFO - ファイアウォールルール 'TestRule' は存在しません
2025-05-31 20:41:37,945 - src.firewall_manager - INFO - ファイアウォールルール 'TestRule' を削除しました
2025-05-31 20:41:37,986 - src.firewall_manager - ERROR - ファイアウォールルールの確認中にエラーが発生しました: argument of type 'NoneType' is not iterable
2025-05-31 20:42:51,556 - src.firewall_manager - INFO - プライベートネットワークのみでポートを開放します。
2025-05-31 20:42:51,556 - src.firewall_manager - WARNING - パブリックネットワークでポートを開放します。セキュリティ上のリスクがあります。
2025-05-31 20:42:51,575 - src.firewall_manager - INFO - ファイアウォールルール 'TestRule' は既に存在します
2025-05-31 20:42:51,617 - src.firewall_manager - ERROR - ファイアウォールルールの確認中にエラーが発生しました: argument of type 'NoneType' is not iterable
2025-05-31 20:42:51,770 - src.firewall_manager - ERROR - ファイアウォールルールの追加に失敗しました
2025-05-31 20:42:51,771 - src.firewall_manager - INFO - ファイアウォールルール 'TestRule' を追加しました（ポート: 8080,5000）
2025-05-31 20:42:51,771 - src.firewall_manager - WARNING - このモジュールはWindowsでのみ動作します。現在のOS: Linux
2025-05-31 20:42:51,771 - src.firewall_manager - WARNING - このモジュールはWindowsでのみ動作します。現在のOS: Linux
2025-05-31 20:42:51,771 - src.firewall_manager - ERROR - このメソッドはWindowsでのみ動作します
2025-05-31 20:42:51,772 - src.firewall_manager - INFO - ファイアウォールルール 'TestRule' は存在しません
2025-05-31 20:42:51,772 - src.firewall_manager - INFO - ファイアウォールルール 'TestRule' を削除しました
2025-05-31 20:42:51,812 - src.firewall_manager - ERROR - ファイアウォールルールの確認中にエラーが発生しました: argument of type 'NoneType' is not iterable
2025-06-01 11:25:48,202 - __main__ - INFO - シンプルな検索テストを実行します。クエリ: データベースのアップデートに関する仕様について教えて
2025-06-01 11:25:48,204 - src.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-01 11:25:48,340 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-01 11:25:48,340 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-01 11:25:48,342 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-01 11:25:48,343 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-01 11:25:51,400 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-01 11:25:51,400 - src.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-01 11:25:51,402 - src.rag_searcher - ERROR - Ollamaの初期化中にエラーが発生しました: Failed to parse: http://0.0.0.0:11434:11434/api/version
2025-06-01 11:25:51,403 - src.rag_searcher - ERROR - 検索中にエラーが発生しました: Ollamaサーバーに接続できません。サーバーが起動しているか確認してください。
Traceback (most recent call last):
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\util\url.py", line 423, in parse_url
    host, port = _HOST_PORT_RE.match(host_port).groups()  # type: ignore[union-attr]
AttributeError: 'NoneType' object has no attribute 'groups'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "G:\NakedRAG\.venv\lib\site-packages\requests\models.py", line 433, in prepare_url
    scheme, auth, host, port, path, query, fragment = parse_url(url)
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\util\url.py", line 449, in parse_url
    raise LocationParseError(source_url) from e
urllib3.exceptions.LocationParseError: Failed to parse: http://0.0.0.0:11434:11434/api/version

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "G:\NakedRAG\src\rag_searcher.py", line 107, in __init__
    response = requests.get(f"{base_url}/api/version")
  File "G:\NakedRAG\.venv\lib\site-packages\requests\api.py", line 73, in get
    return request("get", url, params=params, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\requests\api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\requests\sessions.py", line 575, in request
    prep = self.prepare_request(req)
  File "G:\NakedRAG\.venv\lib\site-packages\requests\sessions.py", line 484, in prepare_request
    p.prepare(
  File "G:\NakedRAG\.venv\lib\site-packages\requests\models.py", line 367, in prepare
    self.prepare_url(url, params)
  File "G:\NakedRAG\.venv\lib\site-packages\requests\models.py", line 435, in prepare_url
    raise InvalidURL(*e.args)
requests.exceptions.InvalidURL: Failed to parse: http://0.0.0.0:11434:11434/api/version

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "G:\NakedRAG\src\rag_searcher.py", line 374, in search
    searcher = RAGSearcher(
  File "G:\NakedRAG\src\rag_searcher.py", line 114, in __init__
    raise Exception("Ollamaサーバーに接続できません。サーバーが起動しているか確認してください。")
Exception: Ollamaサーバーに接続できません。サーバーが起動しているか確認してください。
2025-06-01 11:25:51,429 - src.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-01 11:25:51,429 - src.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-01 11:25:51,429 - __main__ - INFO - 検索結果を保存しました: results\20250601_112551_データベースのアップデートに関する仕様に.md
2025-06-01 15:22:23,606 - __main__ - INFO - シンプルな検索テストを実行します。クエリ: データベースのアップデートに関する仕様について教えて
2025-06-01 15:22:23,608 - src.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-01 15:22:23,628 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-01 15:22:23,629 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-01 15:22:23,631 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-01 15:22:23,631 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-01 15:22:25,811 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-01 15:22:25,811 - src.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-01 15:22:25,819 - src.rag_searcher - ERROR - Ollamaの初期化中にエラーが発生しました: HTTPConnectionPool(host='0.0.0.0', port=11434): Max retries exceeded with url: /api/version (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x000001F096FDE920>: Failed to establish a new connection: [WinError 10049] 要求したアドレスのコンテキストが無効です。'))
2025-06-01 15:22:25,819 - src.rag_searcher - ERROR - 検索中にエラーが発生しました: Ollamaサーバーに接続できません。サーバーが起動しているか確認してください。
Traceback (most recent call last):
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\util\connection.py", line 85, in create_connection
    raise err
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\util\connection.py", line 73, in create_connection
    sock.connect(sa)
OSError: [WinError 10049] 要求したアドレスのコンテキストが無効です。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\connectionpool.py", line 493, in _make_request
    conn.request(
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\connection.py", line 445, in request
    self.endheaders()
  File "C:\Users\Akini\AppData\Local\Programs\Python\Python310\lib\http\client.py", line 1277, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Users\Akini\AppData\Local\Programs\Python\Python310\lib\http\client.py", line 1037, in _send_output
    self.send(msg)
  File "C:\Users\Akini\AppData\Local\Programs\Python\Python310\lib\http\client.py", line 975, in send
    self.connect()
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\connection.py", line 276, in connect
    self.sock = self._new_conn()
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\connection.py", line 213, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x000001F096FDE920>: Failed to establish a new connection: [WinError 10049] 要求したアドレスのコンテキストが無効です。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "G:\NakedRAG\.venv\lib\site-packages\requests\adapters.py", line 667, in send
    resp = conn.urlopen(
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\connectionpool.py", line 841, in urlopen
    retries = retries.increment(
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\util\retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='0.0.0.0', port=11434): Max retries exceeded with url: /api/version (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x000001F096FDE920>: Failed to establish a new connection: [WinError 10049] 要求したアドレスのコンテキストが無効です。'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "G:\NakedRAG\src\rag_searcher.py", line 113, in __init__
    response = requests.get(f"{base_url}/api/version")
  File "G:\NakedRAG\.venv\lib\site-packages\requests\api.py", line 73, in get
    return request("get", url, params=params, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\requests\api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\requests\sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\requests\sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\requests\adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='0.0.0.0', port=11434): Max retries exceeded with url: /api/version (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x000001F096FDE920>: Failed to establish a new connection: [WinError 10049] 要求したアドレスのコンテキストが無効です。'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "G:\NakedRAG\src\rag_searcher.py", line 380, in search
    searcher = RAGSearcher(
  File "G:\NakedRAG\src\rag_searcher.py", line 120, in __init__
    raise Exception("Ollamaサーバーに接続できません。サーバーが起動しているか確認してください。")
Exception: Ollamaサーバーに接続できません。サーバーが起動しているか確認してください。
2025-06-01 15:22:25,881 - __main__ - INFO - 検索結果を保存しました: results\20250601_152225_データベースのアップデートに関する仕様に.md
2025-06-01 15:22:25,883 - src.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-01 15:22:25,883 - src.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-01 15:24:25,352 - __main__ - INFO - シンプルな検索テストを実行します。クエリ: データベースのアップデートに関する仕様について教えて
2025-06-01 15:24:25,355 - src.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-01 15:24:25,366 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-01 15:24:25,366 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-01 15:24:25,367 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-01 15:24:25,367 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-01 15:24:27,398 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-01 15:24:27,399 - src.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-01 15:24:27,401 - src.rag_searcher - ERROR - Ollamaの初期化中にエラーが発生しました: HTTPConnectionPool(host='0.0.0.0', port=11434): Max retries exceeded with url: /api/version (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x0000018D2AB06410>: Failed to establish a new connection: [WinError 10049] 要求したアドレスのコンテキストが無効です。'))
2025-06-01 15:24:27,401 - src.rag_searcher - ERROR - 検索中にエラーが発生しました: Ollamaサーバーに接続できません。サーバーが起動しているか確認してください。
Traceback (most recent call last):
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\connection.py", line 198, in _new_conn
    sock = connection.create_connection(
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\util\connection.py", line 85, in create_connection
    raise err
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\util\connection.py", line 73, in create_connection
    sock.connect(sa)
OSError: [WinError 10049] 要求したアドレスのコンテキストが無効です。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\connectionpool.py", line 787, in urlopen
    response = self._make_request(
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\connectionpool.py", line 493, in _make_request
    conn.request(
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\connection.py", line 445, in request
    self.endheaders()
  File "C:\Users\Akini\AppData\Local\Programs\Python\Python310\lib\http\client.py", line 1277, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Users\Akini\AppData\Local\Programs\Python\Python310\lib\http\client.py", line 1037, in _send_output
    self.send(msg)
  File "C:\Users\Akini\AppData\Local\Programs\Python\Python310\lib\http\client.py", line 975, in send
    self.connect()
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\connection.py", line 276, in connect
    self.sock = self._new_conn()
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\connection.py", line 213, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x0000018D2AB06410>: Failed to establish a new connection: [WinError 10049] 要求したアドレスのコンテキストが無効です。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "G:\NakedRAG\.venv\lib\site-packages\requests\adapters.py", line 667, in send
    resp = conn.urlopen(
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\connectionpool.py", line 841, in urlopen
    retries = retries.increment(
  File "G:\NakedRAG\.venv\lib\site-packages\urllib3\util\retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='0.0.0.0', port=11434): Max retries exceeded with url: /api/version (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x0000018D2AB06410>: Failed to establish a new connection: [WinError 10049] 要求したアドレスのコンテキストが無効です。'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "G:\NakedRAG\src\rag_searcher.py", line 120, in __init__
    response = requests.get(f"{base_url}/api/version")
  File "G:\NakedRAG\.venv\lib\site-packages\requests\api.py", line 73, in get
    return request("get", url, params=params, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\requests\api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\requests\sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\requests\sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\requests\adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='0.0.0.0', port=11434): Max retries exceeded with url: /api/version (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x0000018D2AB06410>: Failed to establish a new connection: [WinError 10049] 要求したアドレスのコンテキストが無効です。'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "G:\NakedRAG\src\rag_searcher.py", line 387, in search
    searcher = RAGSearcher(
  File "G:\NakedRAG\src\rag_searcher.py", line 127, in __init__
    raise Exception("Ollamaサーバーに接続できません。サーバーが起動しているか確認してください。")
Exception: Ollamaサーバーに接続できません。サーバーが起動しているか確認してください。
2025-06-01 15:24:27,403 - __main__ - INFO - 検索結果を保存しました: results\20250601_152427_データベースのアップデートに関する仕様に.md
2025-06-01 15:24:27,405 - src.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-01 15:24:27,406 - src.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-01 15:26:53,144 - __main__ - INFO - シンプルな検索テストを実行します。クエリ: データベースのアップデートに関する仕様について教えて
2025-06-01 15:26:53,146 - src.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-01 15:26:53,158 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-01 15:26:53,158 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-01 15:26:53,159 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-01 15:26:53,160 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-01 15:26:55,196 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-01 15:26:55,197 - src.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-01 15:26:55,203 - src.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-01 15:26:55,203 - src.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-01 15:26:55,203 - src.rag_searcher - INFO - 検索フローを開始します。ユーザークエリ: データベースのアップデートに関する仕様について教えて
2025-06-01 15:26:55,203 - src.rag_searcher - INFO - ユーザークエリの理解を開始します: データベースのアップデートに関する仕様について教えて
2025-06-01 15:27:06,153 - src.rag_searcher - INFO - 検索クエリに変換しました: データベース アップデート 仕様
2025-06-01 15:27:06,154 - src.rag_searcher - INFO - 検索を実行します: データベース アップデート 仕様
2025-06-01 15:27:06,154 - src.rag_class - INFO - 検索を実行します。クエリ: データベース アップデート 仕様
2025-06-01 15:27:06,154 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-01 15:27:06,154 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-01 15:27:06,154 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-01 15:27:06,154 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-01 15:27:07,683 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-01 15:27:08,098 - RAGDatabase - INFO - データベースに接続しました。
2025-06-01 15:27:08,198 - src.rag_class - INFO - 検索結果: 10件
2025-06-01 15:27:08,198 - src.rag_searcher - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-01 15:27:08,198 - src.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-01 15:27:08,200 - src.rag_searcher - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-01 15:27:08,200 - src.rag_searcher - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-01 15:27:08,200 - src.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-01 15:27:08,200 - src.rag_searcher - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-01 15:27:08,200 - src.rag_searcher - INFO - 検索結果 base_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\base_database.md (original_filepathなし)
2025-06-01 15:27:08,200 - src.rag_searcher - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-01 15:27:08,200 - src.rag_searcher - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-01 15:27:08,200 - src.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-01 15:27:08,200 - src.rag_searcher - INFO - 検索結果: 10件, 重複排除後のソース数: 5件
2025-06-01 15:27:08,200 - src.rag_searcher - INFO - 回答の生成を開始します
2025-06-01 15:27:45,940 - src.rag_searcher - INFO - 回答の生成が完了しました
2025-06-01 15:27:45,940 - src.rag_searcher - INFO - 検索フローが完了しました
2025-06-01 15:27:45,940 - src.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-01 15:27:45,940 - RAGDatabase - INFO - データベースから切断しました。
2025-06-01 15:27:45,940 - src.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-01 15:27:45,941 - __main__ - INFO - 検索結果を保存しました: results\20250601_152745_データベースのアップデートに関する仕様に.md
2025-06-03 23:01:50,035 - src.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-03 23:01:50,036 - src.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-03 23:01:50,038 - src.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-03 23:01:50,038 - src.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-03 23:01:50,038 - src.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-03 23:01:50,040 - src.librarian_agent - INFO - ユーザークエリを処理します: テスト質問
2025-06-03 23:01:50,040 - src.librarian_agent - INFO - クエリ処理が完了しました
2025-06-03 23:01:50,040 - src.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-03 23:01:50,040 - src.librarian_agent - INFO - ユーザークエリを処理します: 範囲外の質問
2025-06-03 23:03:14,942 - src.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-03 23:03:14,943 - src.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-03 23:03:14,944 - src.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-03 23:03:14,945 - src.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-03 23:03:14,945 - src.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-03 23:03:14,946 - src.librarian_agent - INFO - ユーザークエリを処理します: テスト質問
2025-06-03 23:03:14,946 - src.librarian_agent - INFO - クエリ処理が完了しました
2025-06-03 23:03:14,946 - src.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-03 23:03:14,947 - src.librarian_agent - INFO - ユーザークエリを処理します: 範囲外の質問
2025-06-07 19:32:06,831 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-07 19:32:06,832 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-07 19:32:06,833 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-07 19:32:06,833 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-07 19:32:06,835 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-07 19:32:06,835 - src.agents.librarian_agent - INFO - ユーザークエリを処理します: テスト質問
2025-06-07 19:32:06,835 - src.agents.librarian_agent - INFO - クエリ処理が完了しました
2025-06-07 19:32:06,836 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.1
2025-06-07 19:32:06,836 - src.agents.librarian_agent - INFO - ユーザークエリを処理します: 範囲外の質問
2025-06-07 19:35:46,121 - __main__ - INFO - シンプルな検索テストを実行します。クエリ: RAG サービスの仕様について教えて
2025-06-07 19:35:46,124 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-07 19:35:46,143 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-07 19:35:46,146 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-07 19:35:46,150 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-07 19:35:46,152 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-07 19:35:49,143 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-07 19:35:49,143 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-07 19:35:49,189 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-07 19:35:49,189 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-07 19:35:49,189 - src.rag.rag_searcher - INFO - 検索フローを開始します。ユーザークエリ: RAG サービスの仕様について教えて
2025-06-07 19:35:49,189 - src.rag.rag_searcher - INFO - ユーザークエリの理解を開始します: RAG サービスの仕様について教えて
2025-06-07 19:36:42,711 - src.rag.rag_searcher - INFO - 検索クエリに変換しました: RAG サービス 仕様 要件 機能 構成
2025-06-07 19:36:42,711 - src.rag.rag_searcher - INFO - 検索を実行します: RAG サービス 仕様 要件 機能 構成
2025-06-07 19:36:42,711 - src.rag.rag_class - INFO - 検索を実行します。クエリ: RAG サービス 仕様 要件 機能 構成
2025-06-07 19:36:42,711 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-07 19:36:42,711 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-07 19:36:42,711 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-07 19:36:42,711 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-07 19:36:43,725 - embedding_generator - ERROR - モデル 'intfloat/multilingual-e5-large' の読み込みに失敗しました: ページング ファイルが小さすぎるため、この操作を完了できません。 (os error 1455)
2025-06-07 19:36:43,725 - src.rag.rag_class - ERROR - 検索中にエラーが発生しました: ページング ファイルが小さすぎるため、この操作を完了できません。 (os error 1455)
Traceback (most recent call last):
  File "G:\NakedRAG\src\rag\rag_class.py", line 225, in search
    self._init_embedding_generator()
  File "G:\NakedRAG\src\rag\rag_class.py", line 200, in _init_embedding_generator
    self.embedding_generator = EmbeddingGenerator(model_name=self.embedding_model)
  File "G:\NakedRAG\src\utils\embedding_generator.py", line 62, in __init__
    self.model = SentenceTransformer(model_local_path, device=self.device)
  File "G:\NakedRAG\.venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 309, in __init__
    modules, self.module_kwargs = self._load_sbert_model(
  File "G:\NakedRAG\.venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 1808, in _load_sbert_model
    module = module_class(model_name_or_path, cache_dir=cache_folder, backend=self.backend, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 81, in __init__
    self._load_model(model_name_or_path, config, cache_dir, backend, is_peft_model, **model_args)
  File "G:\NakedRAG\.venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 181, in _load_model
    self.auto_model = AutoModel.from_pretrained(
  File "G:\NakedRAG\.venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 571, in from_pretrained
    return model_class.from_pretrained(
  File "G:\NakedRAG\.venv\lib\site-packages\transformers\modeling_utils.py", line 309, in _wrapper
    return func(*args, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\transformers\modeling_utils.py", line 4450, in from_pretrained
    with safe_open(checkpoint_files[0], framework="pt") as f:
OSError: ページング ファイルが小さすぎるため、この操作を完了できません。 (os error 1455)
2025-06-07 19:36:43,752 - src.rag.rag_searcher - ERROR - 検索フロー中にエラーが発生しました: ページング ファイルが小さすぎるため、この操作を完了できません。 (os error 1455)
Traceback (most recent call last):
  File "G:\NakedRAG\src\rag\rag_searcher.py", line 302, in run_search_flow
    search_results, sources = self.search_documents(search_query)
  File "G:\NakedRAG\src\rag\rag_searcher.py", line 186, in search_documents
    search_results = self.rag_system.search(
  File "G:\NakedRAG\src\rag\rag_class.py", line 225, in search
    self._init_embedding_generator()
  File "G:\NakedRAG\src\rag\rag_class.py", line 200, in _init_embedding_generator
    self.embedding_generator = EmbeddingGenerator(model_name=self.embedding_model)
  File "G:\NakedRAG\src\utils\embedding_generator.py", line 62, in __init__
    self.model = SentenceTransformer(model_local_path, device=self.device)
  File "G:\NakedRAG\.venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 309, in __init__
    modules, self.module_kwargs = self._load_sbert_model(
  File "G:\NakedRAG\.venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 1808, in _load_sbert_model
    module = module_class(model_name_or_path, cache_dir=cache_folder, backend=self.backend, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 81, in __init__
    self._load_model(model_name_or_path, config, cache_dir, backend, is_peft_model, **model_args)
  File "G:\NakedRAG\.venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 181, in _load_model
    self.auto_model = AutoModel.from_pretrained(
  File "G:\NakedRAG\.venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 571, in from_pretrained
    return model_class.from_pretrained(
  File "G:\NakedRAG\.venv\lib\site-packages\transformers\modeling_utils.py", line 309, in _wrapper
    return func(*args, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\transformers\modeling_utils.py", line 4450, in from_pretrained
    with safe_open(checkpoint_files[0], framework="pt") as f:
OSError: ページング ファイルが小さすぎるため、この操作を完了できません。 (os error 1455)
2025-06-07 19:36:43,752 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-07 19:36:43,752 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-07 19:36:43,753 - __main__ - INFO - 検索結果を保存しました: temp\20250607_193643_RAG_サービスの仕様について教えて.md
2025-06-07 19:43:32,037 - __main__ - INFO - シンプルな検索テストを実行します。クエリ: RAG サービスの仕様について教えて
2025-06-07 19:43:32,040 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-07 19:43:32,051 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-07 19:43:32,052 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-07 19:43:32,053 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-07 19:43:32,053 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-07 19:43:33,943 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-07 19:43:33,943 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-07 19:43:33,951 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-07 19:43:33,951 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-07 19:43:33,951 - src.rag.rag_searcher - INFO - 検索フローを開始します。ユーザークエリ: RAG サービスの仕様について教えて
2025-06-07 19:43:33,951 - src.rag.rag_searcher - INFO - ユーザークエリの理解を開始します: RAG サービスの仕様について教えて
2025-06-07 19:43:36,203 - src.rag.rag_searcher - INFO - 検索クエリに変換しました: RAG サービス 仕様 要件 機能 構成
2025-06-07 19:43:36,203 - src.rag.rag_searcher - INFO - 検索を実行します: RAG サービス 仕様 要件 機能 構成
2025-06-07 19:43:36,203 - src.rag.rag_class - INFO - 検索を実行します。クエリ: RAG サービス 仕様 要件 機能 構成
2025-06-07 19:43:36,203 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-07 19:43:36,203 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-07 19:43:36,203 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-07 19:43:36,203 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-07 19:43:37,681 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-07 19:43:38,207 - RAGDatabase - INFO - データベースに接続しました。
2025-06-07 19:43:38,323 - src.rag.rag_class - INFO - 検索結果: 20件
2025-06-07 19:43:38,323 - src.rag.rag_searcher - INFO - 検索結果 rag_service.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_service.md (original_filepathなし)
2025-06-07 19:43:38,323 - src.rag.rag_searcher - INFO - 検索結果 rag_service.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_service.md (original_filepathなし)
2025-06-07 19:43:38,323 - src.rag.rag_searcher - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-07 19:43:38,323 - src.rag.rag_searcher - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-07 19:43:38,323 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-07 19:43:38,323 - src.rag.rag_searcher - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-07 19:43:38,323 - src.rag.rag_searcher - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-07 19:43:38,323 - src.rag.rag_searcher - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-07 19:43:38,323 - src.rag.rag_searcher - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-07 19:43:38,324 - src.rag.rag_searcher - INFO - 検索結果 cli.md のfilepathを使用: G:\NakedRAG\data\markdowns\cli.md (original_filepathなし)
2025-06-07 19:43:38,324 - src.rag.rag_searcher - INFO - 検索結果 base_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\base_database.md (original_filepathなし)
2025-06-07 19:43:38,324 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-07 19:43:38,324 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-07 19:43:38,324 - src.rag.rag_searcher - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-07 19:43:38,324 - src.rag.rag_searcher - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-07 19:43:38,324 - src.rag.rag_searcher - INFO - 検索結果 cli.md のfilepathを使用: G:\NakedRAG\data\markdowns\cli.md (original_filepathなし)
2025-06-07 19:43:38,324 - src.rag.rag_searcher - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-07 19:43:38,324 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-07 19:43:38,324 - src.rag.rag_searcher - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-07 19:43:38,324 - src.rag.rag_searcher - INFO - 検索結果 base_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\base_database.md (original_filepathなし)
2025-06-07 19:43:38,324 - src.rag.rag_searcher - INFO - 検索結果: 20件, 重複排除後のソース数: 7件
2025-06-07 19:43:38,324 - src.rag.rag_searcher - INFO - 回答の生成を開始します
2025-06-07 19:44:20,997 - src.rag.rag_searcher - INFO - 回答の生成が完了しました
2025-06-07 19:44:20,997 - src.rag.rag_searcher - INFO - 検索フローが完了しました
2025-06-07 19:44:20,997 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-07 19:44:20,997 - RAGDatabase - INFO - データベースから切断しました。
2025-06-07 19:44:20,997 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-07 19:44:20,998 - __main__ - INFO - 検索結果を保存しました: temp\20250607_194420_RAG_サービスの仕様について教えて.md
2025-06-07 19:54:51,074 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-07 19:54:51,086 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-07 19:54:51,086 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-07 19:54:51,087 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-07 19:54:51,087 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-07 19:54:53,186 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-07 19:54:53,186 - __main__ - INFO - PyTorchデバイス: cuda
2025-06-07 19:54:53,195 - __main__ - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-07 19:54:53,195 - __main__ - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-07 19:54:53,195 - __main__ - INFO - 検索フローを開始します。ユーザークエリ: database_schema_modificationは何をやっているプログラムか教えて
2025-06-07 19:54:53,195 - __main__ - INFO - ユーザークエリの理解を開始します: database_schema_modificationは何をやっているプログラムか教えて
2025-06-07 19:54:55,411 - __main__ - INFO - 検索クエリに変換しました: database_schema_modification プログラム 機能
2025-06-07 19:54:55,412 - __main__ - INFO - 検索を実行します: database_schema_modification プログラム 機能
2025-06-07 19:54:55,412 - src.rag.rag_class - INFO - 検索を実行します。クエリ: database_schema_modification プログラム 機能
2025-06-07 19:54:55,412 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-07 19:54:55,412 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-07 19:54:55,412 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-07 19:54:55,412 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-07 19:54:56,960 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-07 19:54:57,174 - RAGDatabase - INFO - データベースに接続しました。
2025-06-07 19:54:57,185 - src.rag.rag_class - INFO - 検索結果: 20件
2025-06-07 19:54:57,185 - __main__ - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-07 19:54:57,185 - __main__ - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-07 19:54:57,185 - __main__ - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 base_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\base_database.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 rag_service.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_service.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 chunk_processor.md のfilepathを使用: G:\NakedRAG\data\markdowns\chunk_processor.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 base_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\base_database.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 cli.md のfilepathを使用: G:\NakedRAG\data\markdowns\cli.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-07 19:54:57,186 - __main__ - INFO - 検索結果: 20件, 重複排除後のソース数: 8件
2025-06-07 19:54:57,187 - __main__ - INFO - 回答の生成を開始します
2025-06-07 19:55:26,549 - __main__ - INFO - 回答の生成が完了しました
2025-06-07 19:55:26,549 - __main__ - INFO - 検索フローが完了しました
2025-06-07 19:55:26,549 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-07 19:55:26,549 - RAGDatabase - INFO - データベースから切断しました。
2025-06-07 19:55:26,550 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-07 23:14:04,186 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-07 23:14:04,209 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-07 23:14:04,210 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-07 23:14:04,211 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-07 23:14:04,212 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-07 23:14:06,467 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-07 23:14:06,467 - __main__ - INFO - PyTorchデバイス: cuda
2025-06-07 23:14:06,472 - __main__ - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-07 23:14:06,472 - __main__ - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-07 23:14:06,472 - __main__ - INFO - 検索フローを開始します。ユーザークエリ: database_schema_modificationは何をやっているプログラムか教えて
2025-06-07 23:14:06,472 - __main__ - INFO - ユーザークエリの理解を開始します: database_schema_modificationは何をやっているプログラムか教えて
2025-06-07 23:14:18,149 - __main__ - INFO - 検索クエリに変換しました: database_schema_modification プログラム 機能
2025-06-07 23:14:18,149 - __main__ - INFO - 検索を実行します: database_schema_modification プログラム 機能
2025-06-07 23:14:18,149 - src.rag.rag_class - INFO - 検索を実行します。クエリ: database_schema_modification プログラム 機能
2025-06-07 23:14:18,545 - RAGDatabase - INFO - データベースに接続しました。
2025-06-07 23:14:18,638 - src.rag.rag_class - INFO - 検索結果: 20件
2025-06-07 23:14:18,638 - __main__ - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 base_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\base_database.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 rag_service.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_service.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 chunk_processor.md のfilepathを使用: G:\NakedRAG\data\markdowns\chunk_processor.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 base_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\base_database.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 cli.md のfilepathを使用: G:\NakedRAG\data\markdowns\cli.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-07 23:14:18,639 - __main__ - INFO - 検索結果: 20件, 重複排除後のソース数: 8件
2025-06-07 23:14:18,640 - __main__ - INFO - 回答の生成を開始します
2025-06-07 23:14:24,160 - __main__ - INFO - 回答の生成が完了しました
2025-06-07 23:14:24,161 - __main__ - INFO - 検索フローが完了しました
2025-06-07 23:14:24,161 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-07 23:14:24,161 - RAGDatabase - INFO - データベースから切断しました。
2025-06-07 23:14:24,161 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-07 23:20:11,626 - __main__ - INFO - ベクトルデータベース作成テストを実行します
2025-06-07 23:20:11,626 - __main__ - ERROR - ベクトルデータベース作成テスト中にエラーが発生しました: create_vector_database() got an unexpected keyword argument 'reset'
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 80, in test_create_vector_database
    create_vector_database(reset=reset)
TypeError: create_vector_database() got an unexpected keyword argument 'reset'
2025-06-07 23:20:11,626 - __main__ - INFO - RAGデータベース作成テストを実行します
2025-06-07 23:20:11,627 - __main__ - ERROR - RAGデータベース作成テスト中にエラーが発生しました: create_rag_database() got an unexpected keyword argument 'reset'
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 106, in test_create_rag_database
    create_rag_database(reset=reset)
TypeError: create_rag_database() got an unexpected keyword argument 'reset'
2025-06-07 23:20:11,627 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-07 23:20:11,627 - __main__ - ERROR - RAGシステム初期化テスト中にエラーが発生しました: initialize_rag_system() got an unexpected keyword argument 'reset'
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 50, in test_initialize_rag_system
    initialize_rag_system(
TypeError: initialize_rag_system() got an unexpected keyword argument 'reset'
2025-06-07 23:34:23,619 - __main__ - INFO - ベクトルデータベース作成テストを実行します
2025-06-07 23:34:23,619 - __main__ - ERROR - ベクトルデータベース作成テスト中にエラーが発生しました: create_vector_database() got an unexpected keyword argument 'reset'
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 80, in test_create_vector_database
    create_vector_database(reset=reset)
TypeError: create_vector_database() got an unexpected keyword argument 'reset'
2025-06-07 23:34:23,619 - __main__ - INFO - RAGデータベース作成テストを実行します
2025-06-07 23:34:23,619 - __main__ - ERROR - RAGデータベース作成テスト中にエラーが発生しました: create_rag_database() missing 2 required positional arguments: 'db_config' and 'vector_db_config'
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 106, in test_create_rag_database
    create_rag_database(reset_table=reset)
TypeError: create_rag_database() missing 2 required positional arguments: 'db_config' and 'vector_db_config'
2025-06-07 23:34:23,619 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-07 23:34:23,619 - __main__ - ERROR - RAGシステム初期化テスト中にエラーが発生しました: initialize_rag_system() got an unexpected keyword argument 'reset'
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 50, in test_initialize_rag_system
    initialize_rag_system(
TypeError: initialize_rag_system() got an unexpected keyword argument 'reset'
2025-06-07 23:35:57,941 - __main__ - INFO - ベクトルデータベース作成テストを実行します
2025-06-07 23:35:57,941 - __main__ - ERROR - ベクトルデータベース作成テスト中にエラーが発生しました: create_vector_database() got an unexpected keyword argument 'reset'
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 76, in test_create_vector_database
    create_vector_database(reset=reset)
TypeError: create_vector_database() got an unexpected keyword argument 'reset'
2025-06-07 23:35:57,941 - __main__ - INFO - RAGデータベース作成テストを実行します
2025-06-07 23:35:57,941 - __main__ - ERROR - RAGデータベース作成テスト中にエラーが発生しました: create_rag_database() missing 2 required positional arguments: 'db_config' and 'vector_db_config'
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 102, in test_create_rag_database
    create_rag_database(reset_table=reset)
TypeError: create_rag_database() missing 2 required positional arguments: 'db_config' and 'vector_db_config'
2025-06-07 23:35:57,941 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-07 23:35:57,945 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-07 23:35:57,945 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\src\data/source
2025-06-07 23:35:57,945 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\src\data/markdowns
2025-06-07 23:35:57,945 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-07 23:35:57,951 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-07 23:35:58,036 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-07 23:35:58,036 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-07 23:35:58,036 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-07 23:35:58,036 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-07 23:35:58,036 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-07 23:35:58,093 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-07 23:35:58,117 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-07 23:35:58,117 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-07 23:35:58,279 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-07 23:35:58,335 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-07 23:35:58,335 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-07 23:35:58,369 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-07 23:35:58,370 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-07 23:35:58,406 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-07 23:35:58,406 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-07 23:35:58,407 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-07 23:35:58,407 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-07 23:35:58,580 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-07 23:35:58,580 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-07 23:35:58,580 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-07 23:35:58,605 - VectorDatabase - INFO - データベースに接続しました。
2025-06-07 23:35:58,639 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-07 23:35:58,639 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-07 23:35:58,668 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-07 23:35:58,701 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-07 23:35:58,701 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\src\data/markdowns' を処理しています...
2025-06-07 23:35:58,703 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-07 23:35:58,704 - VectorDatabase - WARNING - ディレクトリ 'G:\NakedRAG\src\data/markdowns' にMarkdownファイルが見つかりません。
2025-06-07 23:35:58,704 - src.rag.rag_initializer - INFO - 合計 0 個のチャンクを処理しました。
2025-06-07 23:35:58,704 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-07 23:35:58,704 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-07 23:35:58,764 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-07 23:35:58,897 - RAGDatabase - INFO - データベースに接続しました。
2025-06-07 23:35:58,920 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-07 23:35:58,944 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-07 23:35:58,944 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-07 23:35:58,944 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-07 23:35:58,944 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-07 23:35:58,944 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-07 23:35:58,946 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-07 23:35:58,950 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-07 23:35:58,977 - RAGDatabase - WARNING - ベクトルデータベースにデータがありません。
2025-06-07 23:35:58,977 - src.rag.rag_initializer - INFO - 合計 0 個のドキュメントを取り込みました。
2025-06-07 23:35:58,978 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-07 23:35:58,980 - RAGDatabase - INFO - データ量 0 件に対して 10 クラスタでインデックスを作成します。
2025-06-07 23:35:58,997 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-07 23:35:58,997 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-07 23:35:58,998 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 0
2025-06-07 23:35:58,999 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 0
2025-06-07 23:35:58,999 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-07 23:35:58,999 - VectorDatabase - INFO - データベースから切断しました。
2025-06-07 23:35:58,999 - RAGDatabase - INFO - データベースから切断しました。
2025-06-07 23:35:59,001 - __main__ - INFO - RAGシステム初期化テストが完了しました。所要時間: 1.06秒
2025-06-08 00:36:08,544 - __main__ - INFO - ベクトルデータベース作成テストを実行します
2025-06-08 00:36:08,544 - __main__ - ERROR - ベクトルデータベース作成テスト中にエラーが発生しました: create_vector_database() got an unexpected keyword argument 'reset'
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 76, in test_create_vector_database
    create_vector_database(reset=reset)
TypeError: create_vector_database() got an unexpected keyword argument 'reset'
2025-06-08 00:36:08,544 - __main__ - INFO - RAGデータベース作成テストを実行します
2025-06-08 00:36:08,544 - __main__ - ERROR - RAGデータベース作成テスト中にエラーが発生しました: create_rag_database() missing 2 required positional arguments: 'db_config' and 'vector_db_config'
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 102, in test_create_rag_database
    create_rag_database(reset_table=reset)
TypeError: create_rag_database() missing 2 required positional arguments: 'db_config' and 'vector_db_config'
2025-06-08 00:36:08,545 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-08 00:36:08,547 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-08 00:36:08,547 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\src\data/source
2025-06-08 00:36:08,547 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\src\data/markdowns
2025-06-08 00:36:08,547 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-08 00:36:08,548 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-08 00:36:08,579 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-08 00:36:08,579 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-08 00:36:08,580 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-08 00:36:08,580 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-08 00:36:08,580 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-08 00:36:08,609 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-08 00:36:08,634 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-08 00:36:08,634 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-08 00:36:08,660 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-08 00:36:08,691 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-08 00:36:08,691 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-08 00:36:08,722 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-08 00:36:08,722 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-08 00:36:08,752 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-08 00:36:08,752 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-08 00:36:08,752 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 00:36:08,753 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-08 00:36:08,780 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 00:36:08,780 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-08 00:36:08,780 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-08 00:36:08,802 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 00:36:08,809 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-08 00:36:08,809 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-08 00:36:08,823 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-08 00:36:08,849 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-08 00:36:08,849 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\src\data/markdowns' を処理しています...
2025-06-08 00:36:08,849 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 00:36:08,851 - VectorDatabase - WARNING - ディレクトリ 'G:\NakedRAG\src\data/markdowns' にMarkdownファイルが見つかりません。
2025-06-08 00:36:08,851 - src.rag.rag_initializer - INFO - 合計 0 個のチャンクを処理しました。
2025-06-08 00:36:08,851 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-08 00:36:08,851 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 00:36:08,982 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-08 00:36:09,005 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 00:36:09,010 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 00:36:09,016 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 00:36:09,016 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-08 00:36:09,016 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-08 00:36:09,017 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 00:36:09,017 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 00:36:09,018 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 00:36:09,022 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 00:36:09,047 - RAGDatabase - WARNING - ベクトルデータベースにデータがありません。
2025-06-08 00:36:09,047 - src.rag.rag_initializer - INFO - 合計 0 個のドキュメントを取り込みました。
2025-06-08 00:36:09,048 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 00:36:09,048 - RAGDatabase - INFO - データ量 0 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 00:36:09,062 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 00:36:09,062 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-08 00:36:09,062 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 0
2025-06-08 00:36:09,063 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 0
2025-06-08 00:36:09,063 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-08 00:36:09,063 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 00:36:09,063 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 00:36:09,063 - __main__ - INFO - RAGシステム初期化テストが完了しました。所要時間: 0.52秒
2025-06-08 00:38:21,186 - __main__ - INFO - ベクトルデータベース作成テストを実行します
2025-06-08 00:38:21,186 - __main__ - ERROR - ベクトルデータベース作成テスト中にエラーが発生しました: create_vector_database() missing 2 required positional arguments: 'db_config' and 'markdown_dir'
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 76, in test_create_vector_database
    create_vector_database(reset_table=reset)
TypeError: create_vector_database() missing 2 required positional arguments: 'db_config' and 'markdown_dir'
2025-06-08 00:38:21,186 - __main__ - INFO - RAGデータベース作成テストを実行します
2025-06-08 00:38:21,186 - __main__ - ERROR - RAGデータベース作成テスト中にエラーが発生しました: create_rag_database() missing 2 required positional arguments: 'db_config' and 'vector_db_config'
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 102, in test_create_rag_database
    create_rag_database(reset_table=reset)
TypeError: create_rag_database() missing 2 required positional arguments: 'db_config' and 'vector_db_config'
2025-06-08 00:38:21,186 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-08 00:38:21,189 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-08 00:38:21,189 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\src\data/source
2025-06-08 00:38:21,189 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\src\data/markdowns
2025-06-08 00:38:21,189 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-08 00:38:21,190 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-08 00:38:21,229 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-08 00:38:21,229 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-08 00:38:21,230 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-08 00:38:21,230 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-08 00:38:21,230 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-08 00:38:21,259 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-08 00:38:21,287 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-08 00:38:21,287 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-08 00:38:21,320 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-08 00:38:21,351 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-08 00:38:21,351 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-08 00:38:21,487 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-08 00:38:21,487 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-08 00:38:21,512 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-08 00:38:21,512 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-08 00:38:21,512 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 00:38:21,512 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-08 00:38:21,539 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 00:38:21,539 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-08 00:38:21,539 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-08 00:38:21,562 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 00:38:21,566 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-08 00:38:21,566 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-08 00:38:21,575 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-08 00:38:21,603 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-08 00:38:21,603 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\src\data/markdowns' を処理しています...
2025-06-08 00:38:21,603 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 00:38:21,604 - VectorDatabase - WARNING - ディレクトリ 'G:\NakedRAG\src\data/markdowns' にMarkdownファイルが見つかりません。
2025-06-08 00:38:21,604 - src.rag.rag_initializer - INFO - 合計 0 個のチャンクを処理しました。
2025-06-08 00:38:21,604 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-08 00:38:21,604 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 00:38:21,632 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-08 00:38:21,662 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 00:38:21,667 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 00:38:21,673 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 00:38:21,673 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-08 00:38:21,673 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-08 00:38:21,674 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 00:38:21,674 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 00:38:21,675 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 00:38:21,678 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 00:38:21,710 - RAGDatabase - WARNING - ベクトルデータベースにデータがありません。
2025-06-08 00:38:21,710 - src.rag.rag_initializer - INFO - 合計 0 個のドキュメントを取り込みました。
2025-06-08 00:38:21,710 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 00:38:21,711 - RAGDatabase - INFO - データ量 0 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 00:38:21,725 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 00:38:21,726 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-08 00:38:21,726 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 0
2025-06-08 00:38:21,727 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 0
2025-06-08 00:38:21,727 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-08 00:38:21,727 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 00:38:21,727 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 00:38:21,727 - __main__ - INFO - RAGシステム初期化テストが完了しました。所要時間: 0.54秒
2025-06-08 00:46:17,504 - __main__ - INFO - ベクトルデータベース作成テストを実行します
2025-06-08 00:46:17,504 - __main__ - ERROR - ベクトルデータベース作成テスト中にエラーが発生しました: name 'setup_db_config' is not defined
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 76, in test_create_vector_database
    vector_db_config = setup_db_config()
NameError: name 'setup_db_config' is not defined
2025-06-08 00:46:17,507 - __main__ - INFO - RAGデータベース作成テストを実行します
2025-06-08 00:46:17,507 - __main__ - ERROR - RAGデータベース作成テスト中にエラーが発生しました: name 'setup_db_config' is not defined
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 113, in test_create_rag_database
    rag_db_config = setup_db_config()
NameError: name 'setup_db_config' is not defined
2025-06-08 00:46:17,509 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-08 00:46:17,511 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-08 00:46:17,511 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\src\data/source
2025-06-08 00:46:17,511 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\src\data/markdowns
2025-06-08 00:46:17,512 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-08 00:46:17,512 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-08 00:46:17,552 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-08 00:46:17,552 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-08 00:46:17,552 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-08 00:46:17,552 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-08 00:46:17,553 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-08 00:46:17,689 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-08 00:46:17,714 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-08 00:46:17,714 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-08 00:46:17,741 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-08 00:46:17,772 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-08 00:46:17,772 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-08 00:46:17,804 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-08 00:46:17,805 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-08 00:46:17,836 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-08 00:46:17,836 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-08 00:46:17,836 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 00:46:17,836 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-08 00:46:17,870 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 00:46:17,870 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-08 00:46:17,870 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-08 00:46:17,896 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 00:46:17,902 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-08 00:46:17,902 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-08 00:46:17,918 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-08 00:46:17,946 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-08 00:46:17,946 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\src\data/markdowns' を処理しています...
2025-06-08 00:46:17,947 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 00:46:17,947 - VectorDatabase - WARNING - ディレクトリ 'G:\NakedRAG\src\data/markdowns' にMarkdownファイルが見つかりません。
2025-06-08 00:46:17,947 - src.rag.rag_initializer - INFO - 合計 0 個のチャンクを処理しました。
2025-06-08 00:46:17,947 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-08 00:46:17,947 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 00:46:17,976 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-08 00:46:18,006 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 00:46:18,012 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 00:46:18,018 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 00:46:18,018 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-08 00:46:18,018 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-08 00:46:18,018 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 00:46:18,018 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 00:46:18,019 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 00:46:18,022 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 00:46:18,052 - RAGDatabase - WARNING - ベクトルデータベースにデータがありません。
2025-06-08 00:46:18,052 - src.rag.rag_initializer - INFO - 合計 0 個のドキュメントを取り込みました。
2025-06-08 00:46:18,052 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 00:46:18,053 - RAGDatabase - INFO - データ量 0 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 00:46:18,067 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 00:46:18,067 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-08 00:46:18,067 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 0
2025-06-08 00:46:18,067 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 0
2025-06-08 00:46:18,067 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-08 00:46:18,068 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 00:46:18,068 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 00:46:18,068 - __main__ - INFO - RAGシステム初期化テストが完了しました。所要時間: 0.56秒
2025-06-08 00:47:31,503 - __main__ - INFO - ベクトルデータベース作成テストを実行します
2025-06-08 00:47:31,503 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 00:47:31,503 - src.rag.rag_initializer - INFO - テーブルリセット設定: False
2025-06-08 00:47:31,531 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 00:47:31,531 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: False
2025-06-08 00:47:31,531 - src.rag.rag_initializer - INFO - 既存のベクトルデータベーステーブルを使用します。
2025-06-08 00:47:31,531 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\src\data\markdowns' を処理しています...
2025-06-08 00:47:31,553 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 00:47:31,554 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 00:47:31,554 - VectorDatabase - WARNING - ディレクトリ 'G:\NakedRAG\src\data\markdowns' にMarkdownファイルが見つかりません。
2025-06-08 00:47:31,554 - src.rag.rag_initializer - INFO - 合計 0 個のチャンクを処理しました。
2025-06-08 00:47:31,554 - __main__ - INFO - ベクトルデータベース作成テストが完了しました。所要時間: 0.05秒
2025-06-08 00:47:31,554 - __main__ - INFO - RAGデータベース作成テストを実行します
2025-06-08 00:47:31,554 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 00:47:31,586 - src.rag.rag_initializer - INFO - 既存のRAGデータベーステーブルを使用します。
2025-06-08 00:47:31,586 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 00:47:31,616 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 00:47:31,620 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 00:47:31,629 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 00:47:31,660 - RAGDatabase - WARNING - ベクトルデータベースにデータがありません。
2025-06-08 00:47:31,661 - src.rag.rag_initializer - INFO - 合計 0 個のドキュメントを取り込みました。
2025-06-08 00:47:31,661 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 00:47:31,662 - RAGDatabase - INFO - データ量 0 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 00:47:31,676 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 00:47:31,676 - __main__ - INFO - RAGデータベース作成テストが完了しました。所要時間: 0.12秒
2025-06-08 00:47:31,676 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-08 00:47:31,678 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-08 00:47:31,679 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\src\data/source
2025-06-08 00:47:31,679 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\src\data/markdowns
2025-06-08 00:47:31,679 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-08 00:47:31,680 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-08 00:47:31,709 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-08 00:47:31,710 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-08 00:47:31,710 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-08 00:47:31,710 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-08 00:47:31,710 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-08 00:47:31,738 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-08 00:47:31,769 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-08 00:47:31,770 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-08 00:47:31,791 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-08 00:47:31,816 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-08 00:47:31,817 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-08 00:47:31,846 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-08 00:47:31,847 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-08 00:47:31,983 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-08 00:47:31,983 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-08 00:47:31,983 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 00:47:31,983 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-08 00:47:32,009 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 00:47:32,009 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-08 00:47:32,009 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-08 00:47:32,032 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 00:47:32,035 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-08 00:47:32,036 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-08 00:47:32,042 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-08 00:47:32,172 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-08 00:47:32,172 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\src\data/markdowns' を処理しています...
2025-06-08 00:47:32,172 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 00:47:32,174 - VectorDatabase - WARNING - ディレクトリ 'G:\NakedRAG\src\data/markdowns' にMarkdownファイルが見つかりません。
2025-06-08 00:47:32,174 - src.rag.rag_initializer - INFO - 合計 0 個のチャンクを処理しました。
2025-06-08 00:47:32,174 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-08 00:47:32,174 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 00:47:32,198 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-08 00:47:32,223 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 00:47:32,227 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 00:47:32,232 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 00:47:32,232 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-08 00:47:32,232 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-08 00:47:32,233 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 00:47:32,233 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 00:47:32,235 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 00:47:32,236 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 00:47:32,260 - RAGDatabase - WARNING - ベクトルデータベースにデータがありません。
2025-06-08 00:47:32,260 - src.rag.rag_initializer - INFO - 合計 0 個のドキュメントを取り込みました。
2025-06-08 00:47:32,260 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 00:47:32,262 - RAGDatabase - INFO - データ量 0 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 00:47:32,276 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 00:47:32,276 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-08 00:47:32,277 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 0
2025-06-08 00:47:32,277 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 0
2025-06-08 00:47:32,277 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-08 00:47:32,277 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 00:47:32,277 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 00:47:32,277 - __main__ - INFO - RAGシステム初期化テストが完了しました。所要時間: 0.60秒
2025-06-08 01:03:01,549 - __main__ - INFO - ベクトルデータベースを検査しています...
2025-06-08 01:03:01,549 - __main__ - INFO - テーブル構造:
2025-06-08 01:03:01,577 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 01:03:01,612 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True
2025-06-08 01:03:01,612 - __main__ - INFO - レコード数: 0
2025-06-08 01:03:01,613 - __main__ - INFO - ユニークなファイル数: 0
2025-06-08 01:03:01,614 - __main__ - INFO - サンプルデータ (最初の5件):
2025-06-08 01:03:01,614 - __main__ - INFO - ベクトルサンプル (最初のレコードの最初の10要素):
2025-06-08 01:03:01,614 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 01:03:01,614 - __main__ - INFO - RAGデータベースを検査しています...
2025-06-08 01:03:01,614 - __main__ - INFO - テーブル構造:
2025-06-08 01:03:01,637 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 01:03:01,651 - __main__ - INFO - original_filepathカラムの存在: True
2025-06-08 01:03:01,651 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, チャンクテキスト=chunk_text
2025-06-08 01:03:01,653 - __main__ - INFO - ドキュメント数: 0
2025-06-08 01:03:01,653 - __main__ - INFO - ユニークなソース数: 0
2025-06-08 01:03:01,653 - __main__ - INFO - 検索インデックス情報:
2025-06-08 01:03:01,656 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 01:05:46,324 - __main__ - INFO - ベクトルデータベース作成テストを実行します
2025-06-08 01:05:46,324 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 01:05:46,324 - src.rag.rag_initializer - INFO - テーブルリセット設定: False
2025-06-08 01:05:46,355 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 01:05:46,355 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: False
2025-06-08 01:05:46,355 - src.rag.rag_initializer - INFO - 既存のベクトルデータベーステーブルを使用します。
2025-06-08 01:05:46,356 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-08 01:05:46,485 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 01:05:46,486 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 01:05:46,486 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-08 01:05:46,486 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-08 01:05:46,498 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-08 01:05:46,498 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-08 01:05:46,499 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-08 01:05:46,499 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-08 01:05:49,368 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-08 01:05:49,369 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-08 01:05:49,384 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-08 01:05:49,609 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 01:05:49,626 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-08 01:05:49,626 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-08 01:05:49,626 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-08 01:05:49,631 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-08 01:05:49,660 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 01:05:49,663 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-08 01:05:49,663 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-08 01:05:49,664 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-08 01:05:49,668 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-08 01:05:49,691 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 01:05:49,695 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-08 01:05:49,695 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-08 01:05:49,695 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-08 01:05:49,701 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-08 01:05:49,732 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 01:05:49,738 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-08 01:05:49,738 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-08 01:05:49,738 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-08 01:05:49,744 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-08 01:05:49,774 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 01:05:49,778 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-08 01:05:49,780 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-08 01:05:49,780 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-08 01:05:49,786 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-08 01:05:49,839 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-08 01:05:49,847 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-08 01:05:49,847 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-08 01:05:49,847 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-08 01:05:49,854 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-08 01:05:49,892 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 01:05:49,898 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-08 01:05:49,898 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-08 01:05:49,899 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-08 01:05:49,904 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-08 01:05:49,934 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 01:05:49,938 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-08 01:05:49,940 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-08 01:05:49,940 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-08 01:05:49,945 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-08 01:05:49,982 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 01:05:49,987 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-08 01:05:49,988 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-08 01:05:49,988 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-08 01:05:49,988 - __main__ - INFO - ベクトルデータベース作成テストが完了しました。所要時間: 3.66秒
2025-06-08 01:05:49,988 - __main__ - INFO - RAGデータベース作成テストを実行します
2025-06-08 01:05:49,988 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 01:05:50,021 - src.rag.rag_initializer - INFO - 既存のRAGデータベーステーブルを使用します。
2025-06-08 01:05:50,021 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 01:05:50,050 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 01:05:50,054 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 01:05:50,064 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 01:05:50,088 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-08 01:05:50,088 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-08 01:05:50,096 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-08 01:05:50,139 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-08 01:05:50,139 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 01:05:50,155 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 01:05:50,155 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-08 01:05:50,155 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-08 01:05:50,155 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 01:05:50,157 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 01:05:50,169 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 01:05:50,170 - __main__ - INFO - RAGデータベース作成テストが完了しました。所要時間: 0.18秒
2025-06-08 01:05:50,170 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-08 01:05:50,173 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-08 01:05:50,173 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\src\data/source
2025-06-08 01:05:50,173 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\src\data/markdowns
2025-06-08 01:05:50,173 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-08 01:05:50,174 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-08 01:05:50,201 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-08 01:05:50,202 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-08 01:05:50,202 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-08 01:05:50,202 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-08 01:05:50,202 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-08 01:05:50,328 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-08 01:05:50,352 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-08 01:05:50,352 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-08 01:05:50,382 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-08 01:05:50,517 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-08 01:05:50,517 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-08 01:05:50,539 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-08 01:05:50,539 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-08 01:05:50,567 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-08 01:05:50,567 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-08 01:05:50,568 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 01:05:50,568 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-08 01:05:50,599 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 01:05:50,600 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-08 01:05:50,600 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-08 01:05:50,628 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 01:05:50,635 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-08 01:05:50,635 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-08 01:05:50,641 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-08 01:05:50,666 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-08 01:05:50,666 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\src\data/markdowns' を処理しています...
2025-06-08 01:05:50,667 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 01:05:50,667 - VectorDatabase - WARNING - ディレクトリ 'G:\NakedRAG\src\data/markdowns' にMarkdownファイルが見つかりません。
2025-06-08 01:05:50,667 - src.rag.rag_initializer - INFO - 合計 0 個のチャンクを処理しました。
2025-06-08 01:05:50,667 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-08 01:05:50,667 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 01:05:50,694 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-08 01:05:50,715 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 01:05:50,721 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 01:05:50,727 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 01:05:50,727 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-08 01:05:50,727 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-08 01:05:50,727 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 01:05:50,727 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 01:05:50,729 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 01:05:50,731 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 01:05:50,756 - RAGDatabase - WARNING - ベクトルデータベースにデータがありません。
2025-06-08 01:05:50,756 - src.rag.rag_initializer - INFO - 合計 0 個のドキュメントを取り込みました。
2025-06-08 01:05:50,756 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 01:05:50,757 - RAGDatabase - INFO - データ量 0 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 01:05:50,771 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 01:05:50,772 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-08 01:05:50,772 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 0
2025-06-08 01:05:50,772 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 0
2025-06-08 01:05:50,772 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-08 01:05:50,773 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 01:05:50,773 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 01:05:50,773 - __main__ - INFO - RAGシステム初期化テストが完了しました。所要時間: 0.60秒
2025-06-08 01:25:24,775 - __main__ - INFO - ベクトルデータベースを検査しています...
2025-06-08 01:25:24,775 - __main__ - INFO - テーブル構造:
2025-06-08 01:25:24,802 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 01:25:24,811 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True
2025-06-08 01:25:24,812 - __main__ - INFO - レコード数: 0
2025-06-08 01:25:24,812 - __main__ - INFO - ユニークなファイル数: 0
2025-06-08 01:25:24,812 - __main__ - INFO - サンプルデータ (最初の5件):
2025-06-08 01:25:24,812 - __main__ - INFO - ベクトルサンプル (最初のレコードの最初の10要素):
2025-06-08 01:25:24,812 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 01:25:24,812 - __main__ - INFO - RAGデータベースを検査しています...
2025-06-08 01:25:24,812 - __main__ - INFO - テーブル構造:
2025-06-08 01:25:24,836 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 01:25:24,844 - __main__ - INFO - original_filepathカラムの存在: True
2025-06-08 01:25:24,844 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, チャンクテキスト=chunk_text
2025-06-08 01:25:24,846 - __main__ - INFO - ドキュメント数: 0
2025-06-08 01:25:24,846 - __main__ - INFO - ユニークなソース数: 0
2025-06-08 01:25:24,846 - __main__ - INFO - 検索インデックス情報:
2025-06-08 01:25:24,848 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 01:25:37,622 - __main__ - INFO - ベクトルデータベース作成テストを実行します
2025-06-08 01:25:37,622 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 01:25:37,622 - src.rag.rag_initializer - INFO - テーブルリセット設定: False
2025-06-08 01:25:37,649 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 01:25:37,649 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: False
2025-06-08 01:25:37,649 - src.rag.rag_initializer - INFO - 既存のベクトルデータベーステーブルを使用します。
2025-06-08 01:25:37,649 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-08 01:25:37,676 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 01:25:37,677 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 01:25:37,677 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-08 01:25:37,678 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-08 01:25:37,690 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-08 01:25:37,690 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-08 01:25:37,691 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-08 01:25:37,691 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-08 01:25:39,609 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-08 01:25:39,609 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-08 01:25:39,610 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-08 01:25:39,835 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 01:25:39,843 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-08 01:25:39,843 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-08 01:25:39,843 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-08 01:25:39,844 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-08 01:25:39,872 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 01:25:39,875 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-08 01:25:39,875 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-08 01:25:39,876 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-08 01:25:39,876 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-08 01:25:39,898 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 01:25:39,902 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-08 01:25:39,902 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-08 01:25:39,903 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-08 01:25:39,903 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-08 01:25:39,933 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 01:25:39,938 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-08 01:25:39,939 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-08 01:25:39,939 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-08 01:25:39,939 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-08 01:25:39,970 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 01:25:39,975 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-08 01:25:39,975 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-08 01:25:39,975 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-08 01:25:39,976 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-08 01:25:40,028 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-08 01:25:40,036 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-08 01:25:40,036 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-08 01:25:40,036 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-08 01:25:40,037 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-08 01:25:40,074 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 01:25:40,081 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-08 01:25:40,081 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-08 01:25:40,081 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-08 01:25:40,081 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-08 01:25:40,112 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 01:25:40,117 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-08 01:25:40,117 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-08 01:25:40,117 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-08 01:25:40,118 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-08 01:25:40,154 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 01:25:40,162 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-08 01:25:40,162 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-08 01:25:40,162 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-08 01:25:40,162 - __main__ - INFO - ベクトルデータベース作成テストが完了しました。所要時間: 2.54秒
2025-06-08 01:25:40,162 - __main__ - INFO - RAGデータベース作成テストを実行します
2025-06-08 01:25:40,162 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 01:25:40,189 - src.rag.rag_initializer - INFO - 既存のRAGデータベーステーブルを使用します。
2025-06-08 01:25:40,189 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 01:25:40,320 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 01:25:40,325 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 01:25:40,332 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 01:25:40,357 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-08 01:25:40,357 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-08 01:25:40,362 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-08 01:25:40,407 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-08 01:25:40,408 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 01:25:40,430 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 01:25:40,430 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-08 01:25:40,430 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-08 01:25:40,430 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 01:25:40,431 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 01:25:40,462 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 01:25:40,462 - __main__ - INFO - RAGデータベース作成テストが完了しました。所要時間: 0.30秒
2025-06-08 01:25:40,462 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-08 01:25:40,466 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-08 01:25:40,466 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\data\source
2025-06-08 01:25:40,466 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\data\markdowns
2025-06-08 01:25:40,466 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-08 01:25:40,467 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-08 01:25:40,497 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-08 01:25:40,497 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-08 01:25:40,498 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-08 01:25:40,498 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-08 01:25:40,498 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-08 01:25:40,523 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-08 01:25:40,546 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-08 01:25:40,546 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-08 01:25:40,576 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-08 01:25:40,607 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-08 01:25:40,607 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-08 01:25:40,637 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-08 01:25:40,638 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-08 01:25:40,668 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-08 01:25:40,670 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-08 01:25:40,670 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 01:25:40,670 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-08 01:25:40,695 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 01:25:40,695 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-08 01:25:40,695 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-08 01:25:40,717 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 01:25:40,723 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-08 01:25:40,723 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-08 01:25:40,737 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-08 01:25:40,764 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-08 01:25:40,764 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\data\markdowns' を処理しています...
2025-06-08 01:25:40,764 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 01:25:40,764 - VectorDatabase - WARNING - ディレクトリ 'G:\data\markdowns' にMarkdownファイルが見つかりません。
2025-06-08 01:25:40,765 - src.rag.rag_initializer - INFO - 合計 0 個のチャンクを処理しました。
2025-06-08 01:25:40,765 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-08 01:25:40,765 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 01:25:40,794 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-08 01:25:40,930 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 01:25:40,934 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 01:25:40,940 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 01:25:40,940 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-08 01:25:40,941 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-08 01:25:40,941 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 01:25:40,941 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 01:25:40,942 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 01:25:40,945 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 01:25:40,968 - RAGDatabase - WARNING - ベクトルデータベースにデータがありません。
2025-06-08 01:25:40,968 - src.rag.rag_initializer - INFO - 合計 0 個のドキュメントを取り込みました。
2025-06-08 01:25:40,968 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 01:25:40,969 - RAGDatabase - INFO - データ量 0 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 01:25:40,985 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 01:25:40,985 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-08 01:25:40,986 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 0
2025-06-08 01:25:40,986 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 0
2025-06-08 01:25:40,986 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-08 01:25:40,986 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 01:25:40,986 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 01:25:40,986 - __main__ - INFO - RAGシステム初期化テストが完了しました。所要時間: 0.52秒
2025-06-08 01:25:49,141 - __main__ - INFO - ベクトルデータベースを検査しています...
2025-06-08 01:25:49,143 - __main__ - INFO - テーブル構造:
2025-06-08 01:25:49,168 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 01:25:49,177 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True
2025-06-08 01:25:49,177 - __main__ - INFO - レコード数: 0
2025-06-08 01:25:49,178 - __main__ - INFO - ユニークなファイル数: 0
2025-06-08 01:25:49,178 - __main__ - INFO - サンプルデータ (最初の5件):
2025-06-08 01:25:49,178 - __main__ - INFO - ベクトルサンプル (最初のレコードの最初の10要素):
2025-06-08 01:25:49,179 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 01:25:49,179 - __main__ - INFO - RAGデータベースを検査しています...
2025-06-08 01:25:49,180 - __main__ - INFO - テーブル構造:
2025-06-08 01:25:49,204 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 01:25:49,211 - __main__ - INFO - original_filepathカラムの存在: True
2025-06-08 01:25:49,211 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, チャンクテキスト=chunk_text
2025-06-08 01:25:49,214 - __main__ - INFO - ドキュメント数: 0
2025-06-08 01:25:49,214 - __main__ - INFO - ユニークなソース数: 0
2025-06-08 01:25:49,214 - __main__ - INFO - 検索インデックス情報:
2025-06-08 01:25:49,217 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 10:31:00,391 - __main__ - INFO - ベクトルデータベース作成テストを実行します
2025-06-08 10:31:00,391 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 10:31:00,391 - src.rag.rag_initializer - INFO - テーブルリセット設定: False
2025-06-08 10:31:00,422 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 10:31:00,423 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: False
2025-06-08 10:31:00,423 - src.rag.rag_initializer - INFO - 既存のベクトルデータベーステーブルを使用します。
2025-06-08 10:31:00,423 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-08 10:31:00,446 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 10:31:00,447 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 10:31:00,447 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-08 10:31:00,447 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-08 10:31:00,460 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-08 10:31:00,461 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-08 10:31:00,463 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-08 10:31:00,463 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-08 10:31:02,400 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-08 10:31:02,400 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-08 10:31:02,403 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-08 10:31:02,617 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 10:31:02,625 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-08 10:31:02,625 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-08 10:31:02,626 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-08 10:31:02,626 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-08 10:31:02,655 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 10:31:02,660 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-08 10:31:02,660 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-08 10:31:02,660 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-08 10:31:02,661 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-08 10:31:02,684 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 10:31:02,687 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-08 10:31:02,687 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-08 10:31:02,687 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-08 10:31:02,688 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-08 10:31:02,719 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 10:31:02,725 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-08 10:31:02,725 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-08 10:31:02,725 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-08 10:31:02,726 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-08 10:31:02,757 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 10:31:02,762 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-08 10:31:02,762 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-08 10:31:02,763 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-08 10:31:02,763 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-08 10:31:02,818 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-08 10:31:02,830 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-08 10:31:02,830 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-08 10:31:02,830 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-08 10:31:02,831 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-08 10:31:02,870 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 10:31:02,876 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-08 10:31:02,877 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-08 10:31:02,877 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-08 10:31:02,877 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-08 10:31:02,907 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 10:31:02,914 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-08 10:31:02,914 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-08 10:31:02,914 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-08 10:31:02,915 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-08 10:31:02,952 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 10:31:02,960 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-08 10:31:02,960 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-08 10:31:02,960 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-08 10:31:02,960 - __main__ - INFO - ベクトルデータベース作成テストが完了しました。所要時間: 2.57秒
2025-06-08 10:31:02,960 - __main__ - INFO - RAGデータベース作成テストを実行します
2025-06-08 10:31:02,960 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 10:31:03,098 - src.rag.rag_initializer - INFO - 既存のRAGデータベーステーブルを使用します。
2025-06-08 10:31:03,098 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 10:31:03,121 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 10:31:03,126 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 10:31:03,151 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 10:31:03,177 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-08 10:31:03,178 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-08 10:31:03,183 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-08 10:31:03,243 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-08 10:31:03,243 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 10:31:03,263 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 10:31:03,263 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-08 10:31:03,263 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-08 10:31:03,263 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 10:31:03,265 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 10:31:03,283 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 10:31:03,284 - __main__ - INFO - RAGデータベース作成テストが完了しました。所要時間: 0.32秒
2025-06-08 10:31:03,284 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-08 10:31:03,287 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-08 10:31:03,287 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\data\source
2025-06-08 10:31:03,287 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\data\markdowns
2025-06-08 10:31:03,287 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-08 10:31:03,288 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-08 10:31:03,316 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-08 10:31:03,316 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-08 10:31:03,316 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-08 10:31:03,316 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-08 10:31:03,316 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-08 10:31:03,344 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-08 10:31:03,369 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-08 10:31:03,369 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-08 10:31:03,394 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-08 10:31:03,419 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-08 10:31:03,419 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-08 10:31:03,446 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-08 10:31:03,447 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-08 10:31:03,478 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-08 10:31:03,478 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-08 10:31:03,479 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 10:31:03,479 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-08 10:31:03,512 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 10:31:03,512 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-08 10:31:03,512 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-08 10:31:03,535 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 10:31:03,541 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-08 10:31:03,541 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-08 10:31:03,549 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-08 10:31:03,575 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-08 10:31:03,575 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\data\markdowns' を処理しています...
2025-06-08 10:31:03,576 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 10:31:03,576 - VectorDatabase - WARNING - ディレクトリ 'G:\data\markdowns' にMarkdownファイルが見つかりません。
2025-06-08 10:31:03,576 - src.rag.rag_initializer - INFO - 合計 0 個のチャンクを処理しました。
2025-06-08 10:31:03,576 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-08 10:31:03,576 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 10:31:03,605 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-08 10:31:03,628 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 10:31:03,633 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 10:31:03,639 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 10:31:03,639 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-08 10:31:03,639 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-08 10:31:03,640 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 10:31:03,640 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 10:31:03,641 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 10:31:03,643 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 10:31:03,667 - RAGDatabase - WARNING - ベクトルデータベースにデータがありません。
2025-06-08 10:31:03,667 - src.rag.rag_initializer - INFO - 合計 0 個のドキュメントを取り込みました。
2025-06-08 10:31:03,667 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 10:31:03,668 - RAGDatabase - INFO - データ量 0 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 10:31:03,681 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 10:31:03,681 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-08 10:31:03,681 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 0
2025-06-08 10:31:03,682 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 0
2025-06-08 10:31:03,682 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-08 10:31:03,682 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 10:31:03,682 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 10:31:03,682 - __main__ - INFO - RAGシステム初期化テストが完了しました。所要時間: 0.40秒
2025-06-08 10:43:18,249 - __main__ - INFO - ベクトルデータベース作成テストを実行します
2025-06-08 10:43:18,249 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 10:43:18,249 - src.rag.rag_initializer - INFO - テーブルリセット設定: False
2025-06-08 10:43:18,277 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 10:43:18,277 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: False
2025-06-08 10:43:18,277 - src.rag.rag_initializer - INFO - 既存のベクトルデータベーステーブルを使用します。
2025-06-08 10:43:18,277 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-08 10:43:18,303 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 10:43:18,305 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 10:43:18,305 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-08 10:43:18,305 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-08 10:43:18,316 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-08 10:43:18,316 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-08 10:43:18,318 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-08 10:43:18,318 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-08 10:43:20,264 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-08 10:43:20,264 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-08 10:43:20,266 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-08 10:43:20,482 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 10:43:20,489 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-08 10:43:20,489 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-08 10:43:20,489 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-08 10:43:20,491 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-08 10:43:20,518 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 10:43:20,523 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-08 10:43:20,523 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-08 10:43:20,523 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-08 10:43:20,523 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-08 10:43:20,545 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 10:43:20,549 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-08 10:43:20,549 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-08 10:43:20,549 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-08 10:43:20,550 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-08 10:43:20,582 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 10:43:20,587 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-08 10:43:20,587 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-08 10:43:20,587 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-08 10:43:20,588 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-08 10:43:20,618 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 10:43:20,623 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-08 10:43:20,624 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-08 10:43:20,624 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-08 10:43:20,625 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-08 10:43:20,679 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-08 10:43:20,693 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-08 10:43:20,693 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-08 10:43:20,693 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-08 10:43:20,694 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-08 10:43:20,730 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 10:43:20,737 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-08 10:43:20,737 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-08 10:43:20,737 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-08 10:43:20,738 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-08 10:43:20,768 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 10:43:20,774 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-08 10:43:20,774 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-08 10:43:20,774 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-08 10:43:20,775 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-08 10:43:20,814 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 10:43:20,820 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-08 10:43:20,821 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-08 10:43:20,821 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-08 10:43:20,821 - __main__ - INFO - ベクトルデータベース作成テストが完了しました。所要時間: 2.57秒
2025-06-08 10:43:20,821 - __main__ - INFO - RAGデータベース作成テストを実行します
2025-06-08 10:43:20,821 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 10:43:20,847 - src.rag.rag_initializer - INFO - 既存のRAGデータベーステーブルを使用します。
2025-06-08 10:43:20,847 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 10:43:20,869 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 10:43:20,875 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 10:43:20,881 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 10:43:21,018 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-08 10:43:21,018 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-08 10:43:21,025 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-08 10:43:21,068 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-08 10:43:21,069 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 10:43:21,084 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 10:43:21,084 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-08 10:43:21,084 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-08 10:43:21,084 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 10:43:21,086 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 10:43:21,098 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 10:43:21,098 - __main__ - INFO - RAGデータベース作成テストが完了しました。所要時間: 0.28秒
2025-06-08 10:43:21,098 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-08 10:43:21,101 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-08 10:43:21,102 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\data\source
2025-06-08 10:43:21,102 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\data\markdowns
2025-06-08 10:43:21,102 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-08 10:43:21,103 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-08 10:43:21,130 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-08 10:43:21,130 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-08 10:43:21,131 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-08 10:43:21,131 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-08 10:43:21,131 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-08 10:43:21,156 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-08 10:43:21,181 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-08 10:43:21,181 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-08 10:43:21,212 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-08 10:43:21,242 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-08 10:43:21,243 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-08 10:43:21,274 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-08 10:43:21,274 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-08 10:43:21,305 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-08 10:43:21,305 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-08 10:43:21,305 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 10:43:21,305 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-08 10:43:21,336 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 10:43:21,337 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-08 10:43:21,337 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-08 10:43:21,364 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 10:43:21,370 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-08 10:43:21,371 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-08 10:43:21,377 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-08 10:43:21,402 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-08 10:43:21,402 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\data\markdowns' を処理しています...
2025-06-08 10:43:21,403 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 10:43:21,403 - VectorDatabase - WARNING - ディレクトリ 'G:\data\markdowns' にMarkdownファイルが見つかりません。
2025-06-08 10:43:21,403 - src.rag.rag_initializer - INFO - 合計 0 個のチャンクを処理しました。
2025-06-08 10:43:21,403 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-08 10:43:21,403 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 10:43:21,431 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-08 10:43:21,459 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 10:43:21,464 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 10:43:21,470 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 10:43:21,470 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-08 10:43:21,470 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-08 10:43:21,470 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 10:43:21,470 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 10:43:21,475 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 10:43:21,477 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 10:43:21,507 - RAGDatabase - WARNING - ベクトルデータベースにデータがありません。
2025-06-08 10:43:21,507 - src.rag.rag_initializer - INFO - 合計 0 個のドキュメントを取り込みました。
2025-06-08 10:43:21,507 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 10:43:21,508 - RAGDatabase - INFO - データ量 0 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 10:43:21,520 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 10:43:21,520 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-08 10:43:21,520 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 0
2025-06-08 10:43:21,522 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 0
2025-06-08 10:43:21,522 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-08 10:43:21,522 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 10:43:21,522 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 10:43:21,522 - __main__ - INFO - RAGシステム初期化テストが完了しました。所要時間: 0.42秒
2025-06-08 11:13:26,448 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-08 11:13:26,451 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-08 11:13:26,451 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\data\source
2025-06-08 11:13:26,451 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\data\markdowns
2025-06-08 11:13:26,451 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-08 11:13:26,451 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-08 11:13:26,484 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-08 11:13:26,484 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-08 11:13:26,484 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-08 11:13:26,484 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-08 11:13:26,484 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-08 11:13:26,513 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-08 11:13:26,536 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-08 11:13:26,537 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-08 11:13:26,561 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-08 11:13:26,688 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-08 11:13:26,688 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-08 11:13:26,711 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-08 11:13:26,711 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-08 11:13:26,735 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-08 11:13:26,735 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-08 11:13:26,736 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 11:13:26,736 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-08 11:13:26,761 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 11:13:26,762 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-08 11:13:26,762 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-08 11:13:26,783 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 11:13:26,791 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-08 11:13:26,791 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-08 11:13:26,801 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-08 11:13:26,826 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-08 11:13:26,826 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\data\markdowns' を処理しています...
2025-06-08 11:13:26,827 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 11:13:26,827 - VectorDatabase - WARNING - ディレクトリ 'G:\data\markdowns' にMarkdownファイルが見つかりません。
2025-06-08 11:13:26,827 - src.rag.rag_initializer - INFO - 合計 0 個のチャンクを処理しました。
2025-06-08 11:13:26,828 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-08 11:13:26,828 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 11:13:26,958 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-08 11:13:26,988 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 11:13:26,997 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 11:13:27,016 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 11:13:27,016 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-08 11:13:27,016 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-08 11:13:27,017 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 11:13:27,017 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 11:13:27,018 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 11:13:27,022 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 11:13:27,051 - RAGDatabase - WARNING - ベクトルデータベースにデータがありません。
2025-06-08 11:13:27,051 - src.rag.rag_initializer - INFO - 合計 0 個のドキュメントを取り込みました。
2025-06-08 11:13:27,051 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 11:13:27,052 - RAGDatabase - INFO - データ量 0 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 11:13:27,065 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 11:13:27,065 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-08 11:13:27,066 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 0
2025-06-08 11:13:27,066 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 0
2025-06-08 11:13:27,067 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-08 11:13:27,067 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 11:13:27,067 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 11:13:27,067 - __main__ - INFO - RAGシステム初期化テストが完了しました。所要時間: 0.62秒
2025-06-08 11:14:56,732 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-08 11:14:56,735 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-08 11:14:56,736 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\data\source
2025-06-08 11:14:56,736 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\data\markdowns
2025-06-08 11:14:56,736 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-08 11:14:56,736 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-08 11:14:56,765 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-08 11:14:56,765 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-08 11:14:56,765 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-08 11:14:56,765 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-08 11:14:56,765 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-08 11:14:56,791 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-08 11:14:56,813 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-08 11:14:56,814 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-08 11:14:56,947 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-08 11:14:56,972 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-08 11:14:56,972 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-08 11:14:56,996 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-08 11:14:56,996 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-08 11:14:57,020 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-08 11:14:57,020 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-08 11:14:57,020 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 11:14:57,020 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-08 11:14:57,153 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 11:14:57,153 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-08 11:14:57,153 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-08 11:14:57,289 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 11:14:57,295 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-08 11:14:57,295 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-08 11:14:57,304 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-08 11:14:57,331 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-08 11:14:57,331 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\data\markdowns' を処理しています...
2025-06-08 11:14:57,332 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 11:14:57,332 - VectorDatabase - WARNING - ディレクトリ 'G:\data\markdowns' にMarkdownファイルが見つかりません。
2025-06-08 11:14:57,332 - src.rag.rag_initializer - INFO - 合計 0 個のチャンクを処理しました。
2025-06-08 11:14:57,332 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-08 11:14:57,332 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 11:14:57,360 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-08 11:14:57,492 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 11:14:57,499 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 11:14:57,509 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 11:14:57,509 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-08 11:14:57,509 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-08 11:14:57,509 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 11:14:57,509 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 11:14:57,511 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 11:14:57,514 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 11:14:57,541 - RAGDatabase - WARNING - ベクトルデータベースにデータがありません。
2025-06-08 11:14:57,542 - src.rag.rag_initializer - INFO - 合計 0 個のドキュメントを取り込みました。
2025-06-08 11:14:57,542 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 11:14:57,543 - RAGDatabase - INFO - データ量 0 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 11:14:57,553 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 11:14:57,553 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-08 11:14:57,554 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 0
2025-06-08 11:14:57,554 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 0
2025-06-08 11:14:57,554 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-08 11:14:57,554 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 11:14:57,554 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 11:14:57,554 - __main__ - INFO - RAGシステム初期化テストが完了しました。所要時間: 0.82秒
2025-06-08 11:15:59,469 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-08 11:15:59,472 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-08 11:15:59,472 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\data\source
2025-06-08 11:15:59,472 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\data\markdowns
2025-06-08 11:15:59,472 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-08 11:15:59,480 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-08 11:15:59,509 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-08 11:15:59,509 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-08 11:15:59,509 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-08 11:15:59,509 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-08 11:15:59,509 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-08 11:15:59,536 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-08 11:15:59,559 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-08 11:15:59,559 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-08 11:15:59,591 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-08 11:15:59,725 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-08 11:15:59,725 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-08 11:15:59,748 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-08 11:15:59,748 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-08 11:15:59,777 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-08 11:15:59,778 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-08 11:15:59,778 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 11:15:59,778 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-08 11:15:59,810 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 11:15:59,810 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-08 11:15:59,810 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-08 11:15:59,943 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 11:15:59,946 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-08 11:15:59,946 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-08 11:15:59,951 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-08 11:15:59,981 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-08 11:15:59,981 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-08 11:15:59,981 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 11:15:59,982 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-08 11:15:59,982 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-08 11:15:59,993 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-08 11:15:59,994 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-08 11:15:59,995 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-08 11:15:59,996 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-08 11:16:01,935 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-08 11:16:01,935 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-08 11:16:01,937 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-08 11:16:02,163 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 11:16:02,171 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-08 11:16:02,171 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-08 11:16:02,171 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-08 11:16:02,172 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-08 11:16:02,199 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 11:16:02,203 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-08 11:16:02,203 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-08 11:16:02,203 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-08 11:16:02,204 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-08 11:16:02,226 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 11:16:02,230 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-08 11:16:02,230 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-08 11:16:02,231 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-08 11:16:02,231 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-08 11:16:02,262 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 11:16:02,267 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-08 11:16:02,268 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-08 11:16:02,268 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-08 11:16:02,268 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-08 11:16:02,298 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 11:16:02,304 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-08 11:16:02,304 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-08 11:16:02,304 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-08 11:16:02,304 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-08 11:16:02,360 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-08 11:16:02,367 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-08 11:16:02,367 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-08 11:16:02,367 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-08 11:16:02,368 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-08 11:16:02,404 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 11:16:02,412 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-08 11:16:02,412 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-08 11:16:02,412 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-08 11:16:02,412 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-08 11:16:02,445 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 11:16:02,450 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-08 11:16:02,450 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-08 11:16:02,450 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-08 11:16:02,451 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-08 11:16:02,488 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 11:16:02,495 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-08 11:16:02,495 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-08 11:16:02,495 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-08 11:16:02,495 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-08 11:16:02,496 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 11:16:02,523 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-08 11:16:02,546 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 11:16:02,550 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 11:16:02,554 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 11:16:02,554 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-08 11:16:02,554 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-08 11:16:02,556 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 11:16:02,556 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 11:16:02,557 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 11:16:02,560 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 11:16:02,589 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-08 11:16:02,591 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-08 11:16:02,596 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-08 11:16:02,640 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-08 11:16:02,640 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 11:16:02,656 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 11:16:02,656 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-08 11:16:02,656 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-08 11:16:02,656 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 11:16:02,657 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 11:16:02,669 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 11:16:02,670 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-08 11:16:02,670 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 29
2025-06-08 11:16:02,671 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 9
2025-06-08 11:16:02,671 - src.rag.rag_initializer - INFO - ソース 1: vector_database.md (G:\NakedRAG\data\markdowns\vector_database.md)
2025-06-08 11:16:02,671 - src.rag.rag_initializer - INFO - ソース 2: rag_initializer.md (G:\NakedRAG\data\markdowns\rag_initializer.md)
2025-06-08 11:16:02,671 - src.rag.rag_initializer - INFO - ソース 3: embedding_generator.md (G:\NakedRAG\data\markdowns\embedding_generator.md)
2025-06-08 11:16:02,671 - src.rag.rag_initializer - INFO - ソース 4: rag_database.md (G:\NakedRAG\data\markdowns\rag_database.md)
2025-06-08 11:16:02,671 - src.rag.rag_initializer - INFO - ソース 5: base_database.md (G:\NakedRAG\data\markdowns\base_database.md)
2025-06-08 11:16:02,671 - src.rag.rag_initializer - INFO - ...他 4 件のソース
2025-06-08 11:16:02,671 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-08 11:16:02,671 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 11:16:02,672 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 11:16:02,672 - __main__ - INFO - RAGシステム初期化テストが完了しました。所要時間: 3.20秒
2025-06-08 11:27:09,152 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-08 11:27:09,155 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-08 11:27:09,155 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\data\source
2025-06-08 11:27:09,155 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\data\markdowns
2025-06-08 11:27:09,155 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-08 11:27:09,156 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-08 11:27:09,186 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-08 11:27:09,187 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-08 11:27:09,187 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-08 11:27:09,187 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-08 11:27:09,187 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-08 11:27:09,313 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-08 11:27:09,336 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-08 11:27:09,336 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-08 11:27:09,364 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-08 11:27:09,395 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-08 11:27:09,395 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-08 11:27:09,426 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-08 11:27:09,426 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-08 11:27:09,458 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-08 11:27:09,458 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-08 11:27:09,458 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 11:27:09,458 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-08 11:27:09,491 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 11:27:09,491 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-08 11:27:09,491 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-08 11:27:09,518 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 11:27:09,524 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-08 11:27:09,525 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-08 11:27:09,531 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-08 11:27:09,556 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-08 11:27:09,556 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-08 11:27:09,557 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 11:27:09,557 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-08 11:27:09,558 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-08 11:27:09,569 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-08 11:27:09,570 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-08 11:27:09,570 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-08 11:27:09,572 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-08 11:27:11,483 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-08 11:27:11,483 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-08 11:27:11,486 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-08 11:27:11,681 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 11:27:11,689 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-08 11:27:11,689 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-08 11:27:11,689 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-08 11:27:11,689 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-08 11:27:11,718 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 11:27:11,721 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-08 11:27:11,721 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-08 11:27:11,722 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-08 11:27:11,722 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-08 11:27:11,746 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 11:27:11,749 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-08 11:27:11,749 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-08 11:27:11,749 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-08 11:27:11,750 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-08 11:27:11,781 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 11:27:11,787 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-08 11:27:11,787 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-08 11:27:11,787 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-08 11:27:11,788 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-08 11:27:11,818 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 11:27:11,822 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-08 11:27:11,822 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-08 11:27:11,824 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-08 11:27:11,824 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-08 11:27:11,879 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-08 11:27:11,891 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-08 11:27:11,891 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-08 11:27:11,891 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-08 11:27:11,893 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-08 11:27:11,930 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 11:27:11,936 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-08 11:27:11,936 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-08 11:27:11,936 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-08 11:27:11,937 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-08 11:27:11,968 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 11:27:11,972 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-08 11:27:11,972 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-08 11:27:11,972 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-08 11:27:11,974 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-08 11:27:12,010 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 11:27:12,017 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-08 11:27:12,017 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-08 11:27:12,017 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-08 11:27:12,017 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-08 11:27:12,017 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 11:27:12,048 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-08 11:27:12,077 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 11:27:12,087 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 11:27:12,093 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 11:27:12,093 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-08 11:27:12,093 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-08 11:27:12,093 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 11:27:12,093 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 11:27:12,095 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 11:27:12,097 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 11:27:12,125 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-08 11:27:12,125 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-08 11:27:12,130 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-08 11:27:12,172 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-08 11:27:12,172 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 11:27:12,185 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 11:27:12,185 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-08 11:27:12,185 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-08 11:27:12,185 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 11:27:12,186 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 11:27:12,197 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 11:27:12,197 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-08 11:27:12,198 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 29
2025-06-08 11:27:12,198 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 9
2025-06-08 11:27:12,198 - src.rag.rag_initializer - INFO - ソース 1: vector_database.md (G:\NakedRAG\data\markdowns\vector_database.md)
2025-06-08 11:27:12,199 - src.rag.rag_initializer - INFO - ソース 2: rag_initializer.md (G:\NakedRAG\data\markdowns\rag_initializer.md)
2025-06-08 11:27:12,199 - src.rag.rag_initializer - INFO - ソース 3: embedding_generator.md (G:\NakedRAG\data\markdowns\embedding_generator.md)
2025-06-08 11:27:12,199 - src.rag.rag_initializer - INFO - ソース 4: rag_database.md (G:\NakedRAG\data\markdowns\rag_database.md)
2025-06-08 11:27:12,199 - src.rag.rag_initializer - INFO - ソース 5: base_database.md (G:\NakedRAG\data\markdowns\base_database.md)
2025-06-08 11:27:12,199 - src.rag.rag_initializer - INFO - ...他 4 件のソース
2025-06-08 11:27:12,199 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-08 11:27:12,199 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 11:27:12,199 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 11:27:12,199 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 11:27:12,199 - src.rag.rag_initializer - INFO - テーブルリセット設定: False
2025-06-08 11:27:12,226 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 11:27:12,226 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: False
2025-06-08 11:27:12,226 - src.rag.rag_initializer - INFO - 既存のベクトルデータベーステーブルを使用します。
2025-06-08 11:27:12,226 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'None' を処理しています...
2025-06-08 11:27:12,227 - __main__ - ERROR - RAGシステム初期化テスト中にエラーが発生しました: stat: path should be string, bytes, os.PathLike or integer, not NoneType
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 66, in test_initialize_rag_system
    vector_db = create_vector_database(vector_db_config, markdown_dir, reset_table=False)
  File "G:\NakedRAG\src\rag\rag_initializer.py", line 153, in create_vector_database
    chunk_count = vector_db.process_markdown_directory(force_reprocess=reset_table)
  File "G:\NakedRAG\src\rag\vector_database.py", line 359, in process_markdown_directory
    if not os.path.exists(self.markdown_dir):
  File "C:\Users\Akini\AppData\Local\Programs\Python\Python310\lib\genericpath.py", line 19, in exists
    os.stat(path)
TypeError: stat: path should be string, bytes, os.PathLike or integer, not NoneType
2025-06-08 12:43:25,957 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-08 12:43:25,961 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-08 12:43:25,961 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\data\source
2025-06-08 12:43:25,961 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\data\markdowns
2025-06-08 12:43:25,961 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-08 12:43:25,962 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-08 12:43:26,006 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-08 12:43:26,006 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-08 12:43:26,006 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-08 12:43:26,006 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-08 12:43:26,007 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-08 12:43:26,032 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-08 12:43:26,054 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-08 12:43:26,054 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-08 12:43:26,078 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-08 12:43:26,202 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-08 12:43:26,202 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-08 12:43:26,224 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-08 12:43:26,224 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-08 12:43:26,254 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-08 12:43:26,254 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-08 12:43:26,254 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 12:43:26,254 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-08 12:43:26,287 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 12:43:26,287 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-08 12:43:26,287 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-08 12:43:26,316 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 12:43:26,322 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-08 12:43:26,322 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-08 12:43:26,330 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-08 12:43:26,354 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-08 12:43:26,354 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-08 12:43:26,356 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 12:43:26,356 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-08 12:43:26,356 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-08 12:43:26,380 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-08 12:43:26,380 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-08 12:43:26,382 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-08 12:43:26,382 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-08 12:43:28,340 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-08 12:43:28,341 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-08 12:43:28,348 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-08 12:43:28,545 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 12:43:28,553 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-08 12:43:28,553 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-08 12:43:28,553 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-08 12:43:28,559 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-08 12:43:28,586 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 12:43:28,589 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-08 12:43:28,589 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-08 12:43:28,591 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-08 12:43:28,595 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-08 12:43:28,618 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 12:43:28,621 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-08 12:43:28,621 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-08 12:43:28,621 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-08 12:43:28,627 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-08 12:43:28,657 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 12:43:28,663 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-08 12:43:28,663 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-08 12:43:28,663 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-08 12:43:28,668 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-08 12:43:28,697 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 12:43:28,704 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-08 12:43:28,704 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-08 12:43:28,704 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-08 12:43:28,709 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-08 12:43:28,762 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-08 12:43:28,770 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-08 12:43:28,770 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-08 12:43:28,771 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-08 12:43:28,775 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-08 12:43:28,814 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 12:43:28,820 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-08 12:43:28,820 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-08 12:43:28,821 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-08 12:43:28,826 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-08 12:43:28,856 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 12:43:28,861 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-08 12:43:28,861 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-08 12:43:28,862 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-08 12:43:28,866 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-08 12:43:28,905 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 12:43:28,912 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-08 12:43:28,912 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-08 12:43:28,912 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-08 12:43:28,912 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-08 12:43:28,912 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 12:43:28,943 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-08 12:43:28,970 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 12:43:28,976 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 12:43:28,985 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 12:43:28,985 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-08 12:43:28,985 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-08 12:43:28,985 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 12:43:28,985 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 12:43:28,986 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 12:43:28,989 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 12:43:29,020 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-08 12:43:29,021 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-08 12:43:29,026 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-08 12:43:29,080 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-08 12:43:29,081 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 12:43:29,091 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 12:43:29,091 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-08 12:43:29,093 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-08 12:43:29,093 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 12:43:29,094 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 12:43:29,104 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 12:43:29,106 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-08 12:43:29,106 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 29
2025-06-08 12:43:29,107 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 9
2025-06-08 12:43:29,107 - src.rag.rag_initializer - INFO - ソース 1: vector_database.md (G:\NakedRAG\data\markdowns\vector_database.md)
2025-06-08 12:43:29,107 - src.rag.rag_initializer - INFO - ソース 2: rag_initializer.md (G:\NakedRAG\data\markdowns\rag_initializer.md)
2025-06-08 12:43:29,107 - src.rag.rag_initializer - INFO - ソース 3: embedding_generator.md (G:\NakedRAG\data\markdowns\embedding_generator.md)
2025-06-08 12:43:29,107 - src.rag.rag_initializer - INFO - ソース 4: rag_database.md (G:\NakedRAG\data\markdowns\rag_database.md)
2025-06-08 12:43:29,107 - src.rag.rag_initializer - INFO - ソース 5: base_database.md (G:\NakedRAG\data\markdowns\base_database.md)
2025-06-08 12:43:29,107 - src.rag.rag_initializer - INFO - ...他 4 件のソース
2025-06-08 12:43:29,107 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-08 12:43:29,107 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 12:43:29,107 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 12:43:29,107 - __main__ - ERROR - RAGシステム初期化テスト中にエラーが発生しました: name 'VectorDatabase' is not defined
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 78, in test_initialize_rag_system
    vector_db = VectorDatabase(vector_db_config, markdown_dir)
NameError: name 'VectorDatabase' is not defined
2025-06-08 12:45:02,253 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-08 12:45:02,257 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-08 12:45:02,257 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\data\source
2025-06-08 12:45:02,257 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\data\markdowns
2025-06-08 12:45:02,257 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-08 12:45:02,257 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-08 12:45:02,286 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-08 12:45:02,286 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-08 12:45:02,287 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-08 12:45:02,287 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-08 12:45:02,287 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-08 12:45:02,318 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-08 12:45:02,346 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-08 12:45:02,346 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-08 12:45:02,372 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-08 12:45:02,396 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-08 12:45:02,396 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-08 12:45:02,425 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-08 12:45:02,425 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-08 12:45:02,458 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-08 12:45:02,458 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-08 12:45:02,458 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 12:45:02,458 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-08 12:45:02,595 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 12:45:02,595 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-08 12:45:02,595 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-08 12:45:02,617 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 12:45:02,624 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-08 12:45:02,625 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-08 12:45:02,636 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-08 12:45:02,662 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-08 12:45:02,662 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-08 12:45:02,662 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 12:45:02,663 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-08 12:45:02,663 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-08 12:45:02,674 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-08 12:45:02,674 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-08 12:45:02,675 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-08 12:45:02,675 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-08 12:45:04,599 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-08 12:45:04,599 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-08 12:45:04,601 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-08 12:45:04,809 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 12:45:04,818 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-08 12:45:04,818 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-08 12:45:04,818 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-08 12:45:04,819 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-08 12:45:04,846 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 12:45:04,849 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-08 12:45:04,851 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-08 12:45:04,851 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-08 12:45:04,851 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-08 12:45:04,874 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 12:45:04,878 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-08 12:45:04,878 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-08 12:45:04,880 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-08 12:45:04,880 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-08 12:45:04,912 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 12:45:04,920 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-08 12:45:04,920 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-08 12:45:04,921 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-08 12:45:04,921 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-08 12:45:04,951 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 12:45:04,960 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-08 12:45:04,960 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-08 12:45:04,961 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-08 12:45:04,961 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-08 12:45:05,016 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-08 12:45:05,027 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-08 12:45:05,027 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-08 12:45:05,027 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-08 12:45:05,028 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-08 12:45:05,065 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 12:45:05,072 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-08 12:45:05,072 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-08 12:45:05,073 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-08 12:45:05,073 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-08 12:45:05,103 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 12:45:05,112 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-08 12:45:05,112 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-08 12:45:05,112 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-08 12:45:05,112 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-08 12:45:05,151 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 12:45:05,159 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-08 12:45:05,159 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-08 12:45:05,159 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-08 12:45:05,159 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-08 12:45:05,159 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 12:45:05,186 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-08 12:45:05,208 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 12:45:05,216 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 12:45:05,226 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 12:45:05,226 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-08 12:45:05,226 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-08 12:45:05,227 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 12:45:05,227 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 12:45:05,231 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 12:45:05,235 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 12:45:05,359 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-08 12:45:05,360 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-08 12:45:05,364 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-08 12:45:05,411 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-08 12:45:05,412 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 12:45:05,432 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 12:45:05,432 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-08 12:45:05,432 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-08 12:45:05,432 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 12:45:05,439 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 12:45:05,466 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 12:45:05,466 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-08 12:45:05,467 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 29
2025-06-08 12:45:05,467 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 9
2025-06-08 12:45:05,467 - src.rag.rag_initializer - INFO - ソース 1: vector_database.md (G:\NakedRAG\data\markdowns\vector_database.md)
2025-06-08 12:45:05,467 - src.rag.rag_initializer - INFO - ソース 2: rag_initializer.md (G:\NakedRAG\data\markdowns\rag_initializer.md)
2025-06-08 12:45:05,467 - src.rag.rag_initializer - INFO - ソース 3: embedding_generator.md (G:\NakedRAG\data\markdowns\embedding_generator.md)
2025-06-08 12:45:05,467 - src.rag.rag_initializer - INFO - ソース 4: rag_database.md (G:\NakedRAG\data\markdowns\rag_database.md)
2025-06-08 12:45:05,467 - src.rag.rag_initializer - INFO - ソース 5: base_database.md (G:\NakedRAG\data\markdowns\base_database.md)
2025-06-08 12:45:05,468 - src.rag.rag_initializer - INFO - ...他 4 件のソース
2025-06-08 12:45:05,468 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-08 12:45:05,468 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 12:45:05,468 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 12:45:05,468 - __main__ - ERROR - RAGシステム初期化テスト中にエラーが発生しました: 'VectorDatabase' object has no attribute 'close'
Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 84, in test_initialize_rag_system
    vector_count = vector_db.count_documents()
AttributeError: 'VectorDatabase' object has no attribute 'count_documents'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "G:\NakedRAG\test\test_rag_initializer.py", line 99, in test_initialize_rag_system
    vector_db.close()
AttributeError: 'VectorDatabase' object has no attribute 'close'
2025-06-08 12:55:41,594 - __main__ - INFO - RAGシステム初期化テストを実行します
2025-06-08 12:55:41,597 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-08 12:55:41,597 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\data\source
2025-06-08 12:55:41,597 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\data\markdowns
2025-06-08 12:55:41,597 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-08 12:55:41,598 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-08 12:55:41,628 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-08 12:55:41,629 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-08 12:55:41,629 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-08 12:55:41,629 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-08 12:55:41,629 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-08 12:55:41,757 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-08 12:55:41,780 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-08 12:55:41,780 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-08 12:55:41,810 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-08 12:55:41,946 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-08 12:55:41,946 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-08 12:55:41,968 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-08 12:55:41,968 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-08 12:55:41,996 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-08 12:55:41,996 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-08 12:55:41,996 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-08 12:55:41,996 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-08 12:55:42,030 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-08 12:55:42,030 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-08 12:55:42,030 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-08 12:55:42,057 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 12:55:42,064 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-08 12:55:42,064 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-08 12:55:42,070 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-08 12:55:42,094 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-08 12:55:42,094 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-08 12:55:42,095 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-08 12:55:42,095 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-08 12:55:42,095 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-08 12:55:42,107 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-08 12:55:42,107 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-08 12:55:42,109 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-08 12:55:42,109 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-08 12:55:43,981 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-08 12:55:43,982 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-08 12:55:43,984 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-08 12:55:44,203 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 12:55:44,209 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-08 12:55:44,210 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-08 12:55:44,210 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-08 12:55:44,210 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-08 12:55:44,237 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 12:55:44,241 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-08 12:55:44,242 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-08 12:55:44,242 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-08 12:55:44,242 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-08 12:55:44,264 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-08 12:55:44,268 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-08 12:55:44,268 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-08 12:55:44,268 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-08 12:55:44,268 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-08 12:55:44,300 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 12:55:44,306 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-08 12:55:44,306 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-08 12:55:44,306 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-08 12:55:44,307 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-08 12:55:44,336 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 12:55:44,341 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-08 12:55:44,341 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-08 12:55:44,341 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-08 12:55:44,343 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-08 12:55:44,397 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-08 12:55:44,409 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-08 12:55:44,410 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-08 12:55:44,410 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-08 12:55:44,410 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-08 12:55:44,448 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 12:55:44,454 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-08 12:55:44,454 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-08 12:55:44,455 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-08 12:55:44,455 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-08 12:55:44,485 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-08 12:55:44,491 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-08 12:55:44,491 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-08 12:55:44,491 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-08 12:55:44,492 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-08 12:55:44,529 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-08 12:55:44,536 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-08 12:55:44,536 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-08 12:55:44,536 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-08 12:55:44,536 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-08 12:55:44,536 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-08 12:55:44,565 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-08 12:55:44,594 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 12:55:44,606 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 12:55:44,612 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 12:55:44,612 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-08 12:55:44,612 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-08 12:55:44,612 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 12:55:44,612 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-08 12:55:44,614 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-08 12:55:44,616 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-08 12:55:44,640 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-08 12:55:44,641 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-08 12:55:44,646 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-08 12:55:44,689 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-08 12:55:44,691 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 12:55:44,706 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 12:55:44,706 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-08 12:55:44,706 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-08 12:55:44,706 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-08 12:55:44,708 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-08 12:55:44,722 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-08 12:55:44,722 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-08 12:55:44,724 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 29
2025-06-08 12:55:44,724 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 9
2025-06-08 12:55:44,724 - src.rag.rag_initializer - INFO - ソース 1: vector_database.md (G:\NakedRAG\data\markdowns\vector_database.md)
2025-06-08 12:55:44,724 - src.rag.rag_initializer - INFO - ソース 2: rag_initializer.md (G:\NakedRAG\data\markdowns\rag_initializer.md)
2025-06-08 12:55:44,724 - src.rag.rag_initializer - INFO - ソース 3: embedding_generator.md (G:\NakedRAG\data\markdowns\embedding_generator.md)
2025-06-08 12:55:44,724 - src.rag.rag_initializer - INFO - ソース 4: rag_database.md (G:\NakedRAG\data\markdowns\rag_database.md)
2025-06-08 12:55:44,724 - src.rag.rag_initializer - INFO - ソース 5: base_database.md (G:\NakedRAG\data\markdowns\base_database.md)
2025-06-08 12:55:44,724 - src.rag.rag_initializer - INFO - ...他 4 件のソース
2025-06-08 12:55:44,724 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-08 12:55:44,725 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 12:55:44,725 - RAGDatabase - INFO - データベースから切断しました。
2025-06-08 12:55:44,749 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 12:55:44,752 - __main__ - INFO - vector_dbのドキュメント数: 29
2025-06-08 12:55:44,782 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 12:55:44,784 - __main__ - INFO - rag_dbのドキュメント数: 29
2025-06-08 12:55:44,787 - __main__ - INFO - RAGシステム初期化テストが完了しました。所要時間: 3.19秒
2025-06-08 12:59:23,074 - __main__ - INFO - ベクトルデータベースを検査しています...
2025-06-08 12:59:23,074 - __main__ - INFO - テーブル構造:
2025-06-08 12:59:23,100 - VectorDatabase - INFO - データベースに接続しました。
2025-06-08 12:59:23,110 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True
2025-06-08 12:59:23,111 - __main__ - INFO - レコード数: 29
2025-06-08 12:59:23,112 - __main__ - INFO - ユニークなファイル数: 9
2025-06-08 12:59:23,112 - __main__ - INFO - ファイル一覧:
2025-06-08 12:59:23,112 - __main__ - INFO - サンプルデータ (最初の5件):
2025-06-08 12:59:23,115 - __main__ - INFO - ベクトルサンプル (最初のレコードの最初の10要素):
2025-06-08 12:59:23,117 - __main__ - INFO - ベクトル次元数: 12713
2025-06-08 12:59:23,117 - VectorDatabase - INFO - データベースから切断しました。
2025-06-08 12:59:23,117 - __main__ - INFO - RAGデータベースを検査しています...
2025-06-08 12:59:23,117 - __main__ - INFO - テーブル構造:
2025-06-08 12:59:23,143 - RAGDatabase - INFO - データベースに接続しました。
2025-06-08 12:59:23,150 - __main__ - INFO - original_filepathカラムの存在: True
2025-06-08 12:59:23,151 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, チャンクテキスト=chunk_text
2025-06-08 12:59:23,153 - __main__ - INFO - ドキュメント数: 29
2025-06-08 12:59:23,153 - __main__ - INFO - ユニークなソース数: 9
2025-06-08 12:59:23,153 - __main__ - INFO - ソース一覧 (最初の10件):
2025-06-08 12:59:23,154 - __main__ - INFO - サンプルデータ (最初の5件):
2025-06-08 12:59:23,154 - __main__ - INFO - ベクトルサンプル (最初のレコードの最初の10要素):
2025-06-08 12:59:23,155 - __main__ - INFO - ベクトル次元数: 12722
2025-06-08 12:59:23,155 - __main__ - INFO - 検索インデックス情報:
2025-06-08 12:59:23,157 - RAGDatabase - INFO - データベースから切断しました。
2025-06-09 00:14:43,319 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:14:43,322 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:14:43,322 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:14:43,322 - src.agents.librarian_agent - WARNING - エージェント'librarian'の設定が見つかりません。デフォルト設定を使用します。
2025-06-09 00:14:43,323 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-env-model, temperature=0.5
2025-06-09 00:14:43,324 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:14:43,325 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:14:43,327 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:14:43,328 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:14:43,330 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:14:43,331 - src.agents.librarian_agent - INFO - ユーザークエリを処理します: テスト質問
2025-06-09 00:14:43,331 - src.agents.librarian_agent - INFO - RAG検索を実行します: テスト質問
2025-06-09 00:14:43,331 - src.agents.librarian_agent - ERROR - クエリ処理中にエラーが発生しました: PromptManager.get_template() missing 1 required positional argument: 'template_name'
Traceback (most recent call last):
  File "G:\NakedRAG\src\agents\librarian_agent.py", line 381, in process_query
    answer_template = self.prompt_manager.get_template("answer")
TypeError: PromptManager.get_template() missing 1 required positional argument: 'template_name'
2025-06-09 00:14:43,332 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:14:43,332 - src.agents.librarian_agent - INFO - ユーザークエリを処理します: 範囲外の質問
2025-06-09 00:14:43,334 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:17:10,460 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:17:10,462 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:17:10,462 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:17:10,462 - src.agents.librarian_agent - WARNING - エージェント'librarian'の設定が見つかりません。デフォルト設定を使用します。
2025-06-09 00:17:10,463 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-env-model, temperature=0.5
2025-06-09 00:17:10,465 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:17:10,466 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:17:10,468 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:17:10,469 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:17:10,470 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:17:10,471 - src.agents.librarian_agent - INFO - ユーザークエリを処理します: テスト質問
2025-06-09 00:17:10,471 - src.agents.librarian_agent - INFO - RAG検索を実行します: テスト質問
2025-06-09 00:17:10,471 - src.agents.librarian_agent - INFO - クエリ処理が完了しました
2025-06-09 00:17:10,472 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:17:10,474 - src.agents.librarian_agent - INFO - ユーザークエリを処理します: 範囲外の質問
2025-06-09 00:17:10,475 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:22:18,457 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:22:18,459 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:22:18,459 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:22:18,460 - src.agents.librarian_agent - WARNING - エージェント'librarian'の設定が見つかりません。デフォルト設定を使用します。
2025-06-09 00:22:18,460 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-env-model, temperature=0.5
2025-06-09 00:22:18,462 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:22:18,463 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:22:18,464 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:22:18,466 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:22:18,468 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:22:18,468 - src.agents.librarian_agent - INFO - ユーザークエリを処理します: テスト質問
2025-06-09 00:22:18,468 - src.agents.librarian_agent - INFO - RAG検索を実行します: テスト質問
2025-06-09 00:22:18,468 - src.agents.librarian_agent - INFO - クエリ処理が完了しました
2025-06-09 00:22:18,470 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:22:18,470 - src.agents.librarian_agent - INFO - ユーザークエリを処理します: 範囲外の質問
2025-06-09 00:22:18,471 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:26:39,278 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:26:39,281 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:26:39,281 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:26:39,281 - src.agents.librarian_agent - WARNING - エージェント'librarian'の設定が見つかりません。デフォルト設定を使用します。
2025-06-09 00:26:39,281 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-env-model, temperature=0.5
2025-06-09 00:26:39,283 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:26:39,284 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:26:39,286 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:26:39,287 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:26:39,289 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:26:39,289 - src.agents.librarian_agent - INFO - ユーザークエリを処理します: テスト質問
2025-06-09 00:26:39,289 - src.agents.librarian_agent - INFO - RAG検索を実行します: テスト質問
2025-06-09 00:26:39,291 - src.agents.librarian_agent - INFO - クエリ処理が完了しました
2025-06-09 00:26:39,291 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:26:39,291 - src.agents.librarian_agent - INFO - ユーザークエリを処理します: 範囲外の質問
2025-06-09 00:26:39,293 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=test-model, temperature=0.2
2025-06-09 00:40:12,577 - __main__ - INFO - FastMCPサーバーを起動します...
2025-06-09 00:40:12,577 - __main__ - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-09 00:40:12,588 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-09 00:40:12,588 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma:7b, temperature=0.7
2025-06-09 00:42:32,180 - __main__ - INFO - シグナル 2 を受信しました。サーバーをシャットダウンします。
2025-06-09 00:42:32,180 - __main__ - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-09 00:42:32,180 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 00:42:32,180 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 00:42:32,181 - __main__ - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-09 00:42:32,181 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 00:42:32,181 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 00:54:31,753 - __main__ - INFO - 司書LLMエージェントを使用したFastAPIサーバーを起動します - 0.0.0.0:8000
2025-06-09 00:54:31,981 - __main__ - INFO - 司書LLMエージェントAPIサーバーを起動します
2025-06-09 00:54:31,986 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-09 00:54:31,986 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma:7b, temperature=0.7
2025-06-09 00:55:47,998 - __main__ - INFO - 司書LLMエージェントAPIクライアントを初期化しました: http://localhost:8000
2025-06-09 00:56:37,747 - __main__ - INFO - クエリを送信します: ragデータベースにはどのような内容が含まれていますか？...
2025-06-09 00:56:39,788 - __main__ - INFO - 司書LLMエージェントに質問します: ragデータベースにはどのような内容が含まれていますか？...
2025-06-09 00:56:39,789 - src.agents.librarian_agent - INFO - ユーザークエリを処理します: ragデータベースにはどのような内容が含まれていますか？
2025-06-09 00:56:39,791 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-09 00:56:39,816 - RAGDatabase - INFO - データベースに接続しました。
2025-06-09 00:56:39,819 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 00:56:39,819 - RAGDatabase - INFO - データベースから切断しました。
2025-06-09 00:56:39,819 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 00:56:39,820 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 00:56:39,820 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 00:56:39,858 - src.agents.librarian_agent - ERROR - LLMを使った範囲判断中にエラーが発生しました: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
Traceback (most recent call last):
  File "G:\NakedRAG\src\agents\librarian_agent.py", line 272, in _is_query_in_scope
    response = self.llm.invoke(prompt).content
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 371, in invoke
    self.generate_prompt(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 956, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 775, in generate
    self._generate_with_cache(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 1021, in _generate_with_cache
    result = self._generate(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\chat_models\ollama.py", line 291, in _generate
    final_chunk = self._chat_stream_with_aggregation(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\chat_models\ollama.py", line 222, in _chat_stream_with_aggregation
    for stream_resp in self._create_chat_stream(messages, stop, **kwargs):
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\chat_models\ollama.py", line 194, in _create_chat_stream
    yield from self._create_stream(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 266, in _create_stream
    raise OllamaEndpointNotFoundError(
langchain_community.llms.ollama.OllamaEndpointNotFoundError: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
2025-06-09 00:56:39,859 - src.agents.librarian_agent - INFO - RAG検索を実行します: ragデータベースにはどのような内容が含まれていますか？
2025-06-09 00:56:39,859 - src.agents.librarian_agent - ERROR - クエリ処理中にエラーが発生しました: RAGSystem.search() got an unexpected keyword argument 'top_k'
Traceback (most recent call last):
  File "G:\NakedRAG\src\agents\librarian_agent.py", line 368, in process_query
    search_results = self.rag_system.search(query, top_k=top_k, similarity_threshold=similarity_threshold)
TypeError: RAGSystem.search() got an unexpected keyword argument 'top_k'
2025-06-09 00:57:55,945 - __main__ - INFO - 司書LLMエージェントAPIサーバーをシャットダウンします
2025-06-09 00:57:55,945 - __main__ - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-09 00:57:55,945 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 00:57:55,946 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 00:57:55,946 - __main__ - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-09 00:57:55,946 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 00:57:55,946 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 00:57:56,202 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 00:57:56,202 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 00:58:04,317 - __main__ - INFO - 司書LLMエージェントを使用したFastAPIサーバーを起動します - 0.0.0.0:8000
2025-06-09 00:58:04,332 - __main__ - INFO - 司書LLMエージェントAPIサーバーを起動します
2025-06-09 00:58:04,337 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-09 00:58:04,337 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma:7b, temperature=0.7
2025-06-09 00:58:13,932 - __main__ - INFO - 司書LLMエージェントAPIクライアントを初期化しました: http://localhost:8000
2025-06-09 00:58:29,291 - __main__ - INFO - クエリを送信します: RAGデータベースの中にはどのような情報が含まれていますか？...
2025-06-09 00:58:31,325 - __main__ - INFO - 司書LLMエージェントに質問します: RAGデータベースの中にはどのような情報が含まれていますか？...
2025-06-09 00:58:31,326 - src.agents.librarian_agent - INFO - ユーザークエリを処理します: RAGデータベースの中にはどのような情報が含まれていますか？
2025-06-09 00:58:31,328 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-09 00:58:31,353 - RAGDatabase - INFO - データベースに接続しました。
2025-06-09 00:58:31,356 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 00:58:31,357 - RAGDatabase - INFO - データベースから切断しました。
2025-06-09 00:58:31,357 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 00:58:31,357 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 00:58:31,357 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 00:58:31,363 - src.agents.librarian_agent - ERROR - LLMを使った範囲判断中にエラーが発生しました: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
Traceback (most recent call last):
  File "G:\NakedRAG\src\agents\librarian_agent.py", line 272, in _is_query_in_scope
    response = self.llm.invoke(prompt).content
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 371, in invoke
    self.generate_prompt(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 956, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 775, in generate
    self._generate_with_cache(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 1021, in _generate_with_cache
    result = self._generate(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\chat_models\ollama.py", line 291, in _generate
    final_chunk = self._chat_stream_with_aggregation(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\chat_models\ollama.py", line 222, in _chat_stream_with_aggregation
    for stream_resp in self._create_chat_stream(messages, stop, **kwargs):
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\chat_models\ollama.py", line 194, in _create_chat_stream
    yield from self._create_stream(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 266, in _create_stream
    raise OllamaEndpointNotFoundError(
langchain_community.llms.ollama.OllamaEndpointNotFoundError: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
2025-06-09 00:58:31,363 - src.agents.librarian_agent - INFO - RAG検索を実行します: RAGデータベースの中にはどのような情報が含まれていますか？
2025-06-09 00:58:31,363 - src.agents.librarian_agent - ERROR - クエリ処理中にエラーが発生しました: RAGSystem.search() got an unexpected keyword argument 'top_k'
Traceback (most recent call last):
  File "G:\NakedRAG\src\agents\librarian_agent.py", line 368, in process_query
    search_results = self.rag_system.search(query, top_k=top_k, similarity_threshold=similarity_threshold)
TypeError: RAGSystem.search() got an unexpected keyword argument 'top_k'
2025-06-09 00:59:49,521 - __main__ - INFO - 司書LLMエージェントAPIサーバーをシャットダウンします
2025-06-09 00:59:49,522 - __main__ - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-09 00:59:49,522 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 00:59:49,522 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 00:59:49,522 - __main__ - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-09 00:59:49,522 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 00:59:49,522 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 00:59:49,795 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 00:59:49,796 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:00:08,573 - __main__ - INFO - 司書LLMエージェントを使用したFastAPIサーバーを起動します - 0.0.0.0:8000
2025-06-09 01:00:08,589 - __main__ - INFO - 司書LLMエージェントAPIサーバーを起動します
2025-06-09 01:00:08,593 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-09 01:00:08,594 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma:7b, temperature=0.7
2025-06-09 01:00:17,831 - __main__ - INFO - 司書LLMエージェントAPIクライアントを初期化しました: http://localhost:8000
2025-06-09 01:00:43,619 - __main__ - INFO - クエリを送信します: database_makerの仕様について教えて...
2025-06-09 01:00:45,668 - __main__ - INFO - 司書LLMエージェントに質問します: database_makerの仕様について教えて...
2025-06-09 01:00:45,668 - src.agents.librarian_agent - INFO - ユーザークエリを処理します: database_makerの仕様について教えて
2025-06-09 01:00:45,670 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-09 01:00:45,695 - RAGDatabase - INFO - データベースに接続しました。
2025-06-09 01:00:45,698 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:00:45,698 - RAGDatabase - INFO - データベースから切断しました。
2025-06-09 01:00:45,698 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:00:45,698 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:00:45,698 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:00:45,704 - src.agents.librarian_agent - ERROR - LLMを使った範囲判断中にエラーが発生しました: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
Traceback (most recent call last):
  File "G:\NakedRAG\src\agents\librarian_agent.py", line 272, in _is_query_in_scope
    response = self.llm.invoke(prompt).content
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 371, in invoke
    self.generate_prompt(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 956, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 775, in generate
    self._generate_with_cache(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 1021, in _generate_with_cache
    result = self._generate(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\chat_models\ollama.py", line 291, in _generate
    final_chunk = self._chat_stream_with_aggregation(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\chat_models\ollama.py", line 222, in _chat_stream_with_aggregation
    for stream_resp in self._create_chat_stream(messages, stop, **kwargs):
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\chat_models\ollama.py", line 194, in _create_chat_stream
    yield from self._create_stream(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 266, in _create_stream
    raise OllamaEndpointNotFoundError(
langchain_community.llms.ollama.OllamaEndpointNotFoundError: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
2025-06-09 01:00:45,705 - src.agents.librarian_agent - INFO - RAG検索を実行します: database_makerの仕様について教えて
2025-06-09 01:00:45,705 - src.rag.rag_class - INFO - 検索を実行します。クエリ: database_makerの仕様について教えて
2025-06-09 01:00:45,744 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-09 01:00:45,744 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-09 01:00:45,745 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-09 01:00:45,746 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-09 01:00:48,502 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-09 01:00:48,751 - RAGDatabase - INFO - データベースに接続しました。
2025-06-09 01:00:48,806 - src.rag.rag_class - INFO - 検索結果: 5件
2025-06-09 01:00:48,806 - src.agents.librarian_agent - ERROR - ソースリンク生成中にエラーが発生しました: 'metadata'
Traceback (most recent call last):
  File "G:\NakedRAG\src\agents\librarian_agent.py", line 128, in _generate_source_links
    source = result['metadata']['source']
KeyError: 'metadata'
2025-06-09 01:00:48,807 - src.agents.librarian_agent - ERROR - クエリ処理中にエラーが発生しました: 'metadata'
Traceback (most recent call last):
  File "G:\NakedRAG\src\agents\librarian_agent.py", line 377, in process_query
    context = "\n\n".join([f"### {result['metadata']['source']}\n{result['page_content']}"
  File "G:\NakedRAG\src\agents\librarian_agent.py", line 377, in <listcomp>
    context = "\n\n".join([f"### {result['metadata']['source']}\n{result['page_content']}"
KeyError: 'metadata'
2025-06-09 01:03:56,520 - __main__ - INFO - 司書LLMエージェントAPIサーバーをシャットダウンします
2025-06-09 01:03:56,520 - __main__ - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-09 01:03:56,520 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:03:56,520 - RAGDatabase - INFO - データベースから切断しました。
2025-06-09 01:03:56,520 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:03:56,520 - __main__ - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-09 01:03:56,520 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:03:56,520 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:03:56,882 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:03:56,882 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:30:39,112 - __main__ - INFO - 司書LLMエージェントを使用したFastAPIサーバーを起動します - 0.0.0.0:8000
2025-06-09 01:30:39,127 - __main__ - INFO - 司書LLMエージェントAPIサーバーを起動します
2025-06-09 01:30:39,132 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-09 01:30:39,143 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-09 01:30:39,144 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-09 01:30:39,145 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-09 01:30:39,145 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-09 01:30:41,117 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-09 01:30:41,117 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-09 01:30:41,122 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-09 01:30:41,122 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma:7b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-09 01:30:41,123 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:30:41,123 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:31:50,618 - __main__ - INFO - 司書LLMエージェントを使用したFastAPIサーバーを起動します - 0.0.0.0:8000
2025-06-09 01:31:50,632 - __main__ - INFO - 司書LLMエージェントAPIサーバーを起動します
2025-06-09 01:31:50,637 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-09 01:31:50,647 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-09 01:31:50,648 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-09 01:31:50,649 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-09 01:31:50,650 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-09 01:31:52,557 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-09 01:31:52,557 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-09 01:31:52,562 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-09 01:31:52,562 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma:7b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-09 01:31:52,562 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma:7b, temperature=0.7
2025-06-09 01:32:55,778 - __main__ - INFO - 司書LLMエージェントAPIクライアントを初期化しました: http://localhost:8000
2025-06-09 01:33:31,668 - __main__ - INFO - クエリを送信します: rag_databaseの仕様について教えてください。...
2025-06-09 01:33:33,691 - __main__ - INFO - 司書LLMエージェントに質問します: rag_databaseの仕様について教えてください。...
2025-06-09 01:33:33,691 - src.agents.librarian_agent - INFO - ユーザークエリを処理します: rag_databaseの仕様について教えてください。
2025-06-09 01:33:33,694 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-09 01:33:33,719 - RAGDatabase - INFO - データベースに接続しました。
2025-06-09 01:33:33,722 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:33:33,722 - RAGDatabase - INFO - データベースから切断しました。
2025-06-09 01:33:33,722 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:33:33,722 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:33:33,722 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:33:33,730 - src.agents.librarian_agent - ERROR - LLMを使った範囲判断中にエラーが発生しました: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
Traceback (most recent call last):
  File "G:\NakedRAG\src\agents\librarian_agent.py", line 271, in _is_query_in_scope
    response = self.llm.invoke(prompt).content
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 371, in invoke
    self.generate_prompt(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 956, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 775, in generate
    self._generate_with_cache(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 1021, in _generate_with_cache
    result = self._generate(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\chat_models\ollama.py", line 291, in _generate
    final_chunk = self._chat_stream_with_aggregation(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\chat_models\ollama.py", line 222, in _chat_stream_with_aggregation
    for stream_resp in self._create_chat_stream(messages, stop, **kwargs):
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\chat_models\ollama.py", line 194, in _create_chat_stream
    yield from self._create_stream(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 266, in _create_stream
    raise OllamaEndpointNotFoundError(
langchain_community.llms.ollama.OllamaEndpointNotFoundError: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
2025-06-09 01:33:33,731 - src.agents.librarian_agent - INFO - RAG検索を実行します: rag_databaseの仕様について教えてください。
2025-06-09 01:33:33,731 - src.rag.rag_searcher - INFO - 検索フローを開始します。ユーザークエリ: rag_databaseの仕様について教えてください。
2025-06-09 01:33:33,731 - src.rag.rag_searcher - INFO - ユーザークエリの理解を開始します: rag_databaseの仕様について教えてください。
2025-06-09 01:33:33,733 - src.rag.rag_searcher - ERROR - クエリ理解中にエラーが発生しました: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
Traceback (most recent call last):
  File "G:\NakedRAG\src\rag\rag_searcher.py", line 173, in understand_query
    search_query = understand_chain.invoke({"query": user_query})["text"].strip()
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\base.py", line 167, in invoke
    raise e
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\base.py", line 157, in invoke
    self._call(inputs, run_manager=run_manager)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\llm.py", line 127, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\llm.py", line 139, in generate
    return self.llm.generate_prompt(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\llms.py", line 766, in generate_prompt
    return self.generate(prompt_strings, stop=stop, callbacks=callbacks, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\llms.py", line 973, in generate
    return self._generate_helper(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\llms.py", line 792, in _generate_helper
    self._generate(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 437, in _generate
    final_chunk = super()._stream_with_aggregation(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 349, in _stream_with_aggregation
    for stream_resp in self._create_generate_stream(prompt, stop, **kwargs):
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 194, in _create_generate_stream
    yield from self._create_stream(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 266, in _create_stream
    raise OllamaEndpointNotFoundError(
langchain_community.llms.ollama.OllamaEndpointNotFoundError: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
2025-06-09 01:33:33,750 - src.rag.rag_searcher - INFO - 元のクエリを使用します: rag_databaseの仕様について教えてください。
2025-06-09 01:33:33,750 - src.rag.rag_searcher - INFO - 検索を実行します: rag_databaseの仕様について教えてください。
2025-06-09 01:33:33,750 - src.rag.rag_class - INFO - 検索を実行します。クエリ: rag_databaseの仕様について教えてください。
2025-06-09 01:33:33,964 - RAGDatabase - INFO - データベースに接続しました。
2025-06-09 01:33:33,977 - src.rag.rag_class - INFO - 検索結果: 5件
2025-06-09 01:33:33,978 - src.rag.rag_searcher - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-09 01:33:33,978 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-09 01:33:33,978 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-09 01:33:33,978 - src.rag.rag_searcher - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-09 01:33:33,978 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-09 01:33:33,978 - src.rag.rag_searcher - INFO - 検索結果: 5件, 重複排除後のソース数: 3件
2025-06-09 01:33:33,978 - src.rag.rag_searcher - INFO - 回答の生成を開始します
2025-06-09 01:33:33,981 - src.rag.rag_searcher - ERROR - 回答生成中にエラーが発生しました: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
Traceback (most recent call last):
  File "G:\NakedRAG\src\rag\rag_searcher.py", line 281, in generate_answer
    answer = answer_chain.invoke({
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\base.py", line 167, in invoke
    raise e
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\base.py", line 157, in invoke
    self._call(inputs, run_manager=run_manager)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\llm.py", line 127, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\llm.py", line 139, in generate
    return self.llm.generate_prompt(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\llms.py", line 766, in generate_prompt
    return self.generate(prompt_strings, stop=stop, callbacks=callbacks, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\llms.py", line 973, in generate
    return self._generate_helper(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\llms.py", line 792, in _generate_helper
    self._generate(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 437, in _generate
    final_chunk = super()._stream_with_aggregation(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 349, in _stream_with_aggregation
    for stream_resp in self._create_generate_stream(prompt, stop, **kwargs):
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 194, in _create_generate_stream
    yield from self._create_stream(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 266, in _create_stream
    raise OllamaEndpointNotFoundError(
langchain_community.llms.ollama.OllamaEndpointNotFoundError: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
2025-06-09 01:33:33,982 - src.rag.rag_searcher - INFO - 検索フローが完了しました
2025-06-09 01:33:33,982 - src.agents.librarian_agent - ERROR - クエリ処理中にエラーが発生しました: 'LibrarianAgent' object has no attribute '_generate_source_url'
Traceback (most recent call last):
  File "G:\NakedRAG\src\agents\librarian_agent.py", line 379, in process_query
    source_url = self._generate_source_url(filepath)
AttributeError: 'LibrarianAgent' object has no attribute '_generate_source_url'. Did you mean: '_generate_source_links'?
2025-06-09 01:38:26,320 - __main__ - INFO - 司書LLMエージェントAPIサーバーをシャットダウンします
2025-06-09 01:38:26,320 - __main__ - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-09 01:38:26,320 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:38:26,320 - RAGDatabase - INFO - データベースから切断しました。
2025-06-09 01:38:26,320 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:38:26,321 - __main__ - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-09 01:38:26,321 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:38:26,321 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:38:26,558 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:38:26,558 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:38:36,723 - __main__ - INFO - 司書LLMエージェントを使用したFastAPIサーバーを起動します - 0.0.0.0:8000
2025-06-09 01:38:36,738 - __main__ - INFO - 司書LLMエージェントAPIサーバーを起動します
2025-06-09 01:38:36,743 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-09 01:38:36,754 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-09 01:38:36,756 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-09 01:38:36,757 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-09 01:38:36,757 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-09 01:38:38,648 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-09 01:38:38,648 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-09 01:38:38,653 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-09 01:38:38,653 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma:7b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-09 01:38:38,653 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma:7b, temperature=0.7
2025-06-09 01:38:55,199 - __main__ - INFO - 司書LLMエージェントAPIクライアントを初期化しました: http://localhost:8000
2025-06-09 01:39:43,507 - __main__ - INFO - クエリを送信します: rag_databaseの仕様について教えてください。...
2025-06-09 01:39:45,544 - __main__ - INFO - 司書LLMエージェントに質問します: rag_databaseの仕様について教えてください。...
2025-06-09 01:39:45,544 - src.agents.librarian_agent - INFO - ユーザークエリを処理します: rag_databaseの仕様について教えてください。
2025-06-09 01:39:45,546 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-09 01:39:45,569 - RAGDatabase - INFO - データベースに接続しました。
2025-06-09 01:39:45,571 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:39:45,572 - RAGDatabase - INFO - データベースから切断しました。
2025-06-09 01:39:45,572 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:39:45,572 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:39:45,572 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:39:45,578 - src.agents.librarian_agent - ERROR - LLMを使った範囲判断中にエラーが発生しました: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
Traceback (most recent call last):
  File "G:\NakedRAG\src\agents\librarian_agent.py", line 299, in _is_query_in_scope
    response = self.llm.invoke(prompt).content
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 371, in invoke
    self.generate_prompt(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 956, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 775, in generate
    self._generate_with_cache(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 1021, in _generate_with_cache
    result = self._generate(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\chat_models\ollama.py", line 291, in _generate
    final_chunk = self._chat_stream_with_aggregation(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\chat_models\ollama.py", line 222, in _chat_stream_with_aggregation
    for stream_resp in self._create_chat_stream(messages, stop, **kwargs):
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\chat_models\ollama.py", line 194, in _create_chat_stream
    yield from self._create_stream(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 266, in _create_stream
    raise OllamaEndpointNotFoundError(
langchain_community.llms.ollama.OllamaEndpointNotFoundError: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
2025-06-09 01:39:45,579 - src.agents.librarian_agent - INFO - RAG検索を実行します: rag_databaseの仕様について教えてください。
2025-06-09 01:39:45,579 - src.rag.rag_searcher - INFO - 検索フローを開始します。ユーザークエリ: rag_databaseの仕様について教えてください。
2025-06-09 01:39:45,579 - src.rag.rag_searcher - INFO - ユーザークエリの理解を開始します: rag_databaseの仕様について教えてください。
2025-06-09 01:39:45,582 - src.rag.rag_searcher - ERROR - クエリ理解中にエラーが発生しました: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
Traceback (most recent call last):
  File "G:\NakedRAG\src\rag\rag_searcher.py", line 173, in understand_query
    search_query = understand_chain.invoke({"query": user_query})["text"].strip()
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\base.py", line 167, in invoke
    raise e
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\base.py", line 157, in invoke
    self._call(inputs, run_manager=run_manager)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\llm.py", line 127, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\llm.py", line 139, in generate
    return self.llm.generate_prompt(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\llms.py", line 766, in generate_prompt
    return self.generate(prompt_strings, stop=stop, callbacks=callbacks, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\llms.py", line 973, in generate
    return self._generate_helper(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\llms.py", line 792, in _generate_helper
    self._generate(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 437, in _generate
    final_chunk = super()._stream_with_aggregation(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 349, in _stream_with_aggregation
    for stream_resp in self._create_generate_stream(prompt, stop, **kwargs):
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 194, in _create_generate_stream
    yield from self._create_stream(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 266, in _create_stream
    raise OllamaEndpointNotFoundError(
langchain_community.llms.ollama.OllamaEndpointNotFoundError: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
2025-06-09 01:39:45,582 - src.rag.rag_searcher - INFO - 元のクエリを使用します: rag_databaseの仕様について教えてください。
2025-06-09 01:39:45,582 - src.rag.rag_searcher - INFO - 検索を実行します: rag_databaseの仕様について教えてください。
2025-06-09 01:39:45,582 - src.rag.rag_class - INFO - 検索を実行します。クエリ: rag_databaseの仕様について教えてください。
2025-06-09 01:39:45,898 - RAGDatabase - INFO - データベースに接続しました。
2025-06-09 01:39:45,907 - src.rag.rag_class - INFO - 検索結果: 5件
2025-06-09 01:39:45,907 - src.rag.rag_searcher - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-09 01:39:45,907 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-09 01:39:45,907 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-09 01:39:45,907 - src.rag.rag_searcher - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-09 01:39:45,907 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-09 01:39:45,907 - src.rag.rag_searcher - INFO - 検索結果: 5件, 重複排除後のソース数: 3件
2025-06-09 01:39:45,907 - src.rag.rag_searcher - INFO - 回答の生成を開始します
2025-06-09 01:39:45,911 - src.rag.rag_searcher - ERROR - 回答生成中にエラーが発生しました: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
Traceback (most recent call last):
  File "G:\NakedRAG\src\rag\rag_searcher.py", line 281, in generate_answer
    answer = answer_chain.invoke({
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\base.py", line 167, in invoke
    raise e
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\base.py", line 157, in invoke
    self._call(inputs, run_manager=run_manager)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\llm.py", line 127, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain\chains\llm.py", line 139, in generate
    return self.llm.generate_prompt(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\llms.py", line 766, in generate_prompt
    return self.generate(prompt_strings, stop=stop, callbacks=callbacks, **kwargs)
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\llms.py", line 973, in generate
    return self._generate_helper(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_core\language_models\llms.py", line 792, in _generate_helper
    self._generate(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 437, in _generate
    final_chunk = super()._stream_with_aggregation(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 349, in _stream_with_aggregation
    for stream_resp in self._create_generate_stream(prompt, stop, **kwargs):
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 194, in _create_generate_stream
    yield from self._create_stream(
  File "G:\NakedRAG\.venv\lib\site-packages\langchain_community\llms\ollama.py", line 266, in _create_stream
    raise OllamaEndpointNotFoundError(
langchain_community.llms.ollama.OllamaEndpointNotFoundError: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull gemma:7b`.
2025-06-09 01:39:45,912 - src.rag.rag_searcher - INFO - 検索フローが完了しました
2025-06-09 01:39:45,912 - src.agents.librarian_agent - INFO - クエリ処理が完了しました
2025-06-09 01:42:57,093 - __main__ - INFO - 司書LLMエージェントAPIサーバーをシャットダウンします
2025-06-09 01:42:57,093 - __main__ - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-09 01:42:57,093 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:42:57,093 - RAGDatabase - INFO - データベースから切断しました。
2025-06-09 01:42:57,093 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:42:57,094 - __main__ - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-09 01:42:57,094 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:42:57,094 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:42:57,336 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:42:57,337 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:43:43,762 - __main__ - INFO - 司書LLMエージェントを使用したFastAPIサーバーを起動します - 0.0.0.0:8000
2025-06-09 01:43:43,777 - __main__ - INFO - 司書LLMエージェントAPIサーバーを起動します
2025-06-09 01:43:43,781 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-09 01:43:43,792 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-09 01:43:43,793 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-09 01:43:43,794 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-09 01:43:43,795 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-09 01:43:45,691 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-09 01:43:45,691 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-09 01:43:45,696 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-09 01:43:45,696 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-09 01:43:45,696 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-09 01:43:53,888 - __main__ - INFO - 司書LLMエージェントAPIクライアントを初期化しました: http://localhost:8000
2025-06-09 01:44:09,260 - __main__ - INFO - クエリを送信します: ragのデータベースのアップデート方法について教えて...
2025-06-09 01:44:11,283 - __main__ - INFO - 司書LLMエージェントに質問します: ragのデータベースのアップデート方法について教えて...
2025-06-09 01:44:11,283 - src.agents.librarian_agent - INFO - クエリを処理します: ragのデータベースのアップデート方法について教えて
2025-06-09 01:44:11,283 - src.agents.librarian_agent - INFO - 使用するLLMモデル: gemma3:12b
2025-06-09 01:44:11,286 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-09 01:44:11,311 - RAGDatabase - INFO - データベースに接続しました。
2025-06-09 01:44:11,313 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:44:11,314 - RAGDatabase - INFO - データベースから切断しました。
2025-06-09 01:44:11,314 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:44:11,314 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:44:11,314 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:44:31,089 - src.agents.librarian_agent - INFO - RAG検索を実行します: ragのデータベースのアップデート方法について教えて
2025-06-09 01:44:31,090 - src.rag.rag_searcher - INFO - 検索フローを開始します。ユーザークエリ: ragのデータベースのアップデート方法について教えて
2025-06-09 01:44:31,090 - src.rag.rag_searcher - INFO - ユーザークエリの理解を開始します: ragのデータベースのアップデート方法について教えて
2025-06-09 01:44:33,373 - src.rag.rag_searcher - INFO - 検索クエリに変換しました: RAG データベース アップデート 方法
2025-06-09 01:44:33,373 - src.rag.rag_searcher - INFO - 検索を実行します: RAG データベース アップデート 方法
2025-06-09 01:44:33,373 - src.rag.rag_class - INFO - 検索を実行します。クエリ: RAG データベース アップデート 方法
2025-06-09 01:44:33,632 - RAGDatabase - INFO - データベースに接続しました。
2025-06-09 01:44:33,644 - src.rag.rag_class - INFO - 検索結果: 5件
2025-06-09 01:44:33,644 - src.rag.rag_searcher - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-09 01:44:33,644 - src.rag.rag_searcher - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-09 01:44:33,644 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-09 01:44:33,644 - src.rag.rag_searcher - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-09 01:44:33,645 - src.rag.rag_searcher - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-09 01:44:33,645 - src.rag.rag_searcher - INFO - 検索結果: 5件, 重複排除後のソース数: 3件
2025-06-09 01:44:33,645 - src.rag.rag_searcher - INFO - 回答の生成を開始します
2025-06-09 01:44:44,335 - src.rag.rag_searcher - INFO - 回答の生成が完了しました
2025-06-09 01:44:44,335 - src.rag.rag_searcher - INFO - 検索フローが完了しました
2025-06-09 01:44:44,335 - src.agents.librarian_agent - INFO - クエリ処理が完了しました
2025-06-09 01:45:14,057 - __main__ - INFO - 司書LLMエージェントAPIサーバーをシャットダウンします
2025-06-09 01:45:14,057 - __main__ - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-09 01:45:14,057 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:45:14,057 - RAGDatabase - INFO - データベースから切断しました。
2025-06-09 01:45:14,057 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:45:14,057 - __main__ - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-09 01:45:14,057 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:45:14,057 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-09 01:45:14,294 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-09 01:45:14,294 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-12 00:00:56,832 - __main__ - INFO - MCPサーバーを起動します...
2025-06-12 00:00:56,833 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-12 00:00:56,833 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-12 00:00:56,833 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-12 00:00:56,833 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-12 00:00:56,833 - __main__ - INFO - LineBotServerThreadを開始しました
2025-06-12 00:00:56,834 - __main__ - INFO - Webサーバーを起動します...
2025-06-12 00:00:56,834 - __main__ - INFO - WebServerThreadを開始しました
2025-06-12 00:00:56,834 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-12 00:00:56,840 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-12 00:00:56,851 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-12 00:00:56,852 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-12 00:00:56,855 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-12 00:00:56,856 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-12 00:00:57,226 - __main__ - ERROR - LINE Botサーバーの起動中にエラーが発生しました: name 'LibrarianAgent' is not defined
Traceback (most recent call last):
  File "G:\NakedRAG\app.py", line 89, in start_line_bot_server
    from src.server.line_bot_server import run_server as run_line_bot_server
  File "G:\NakedRAG\src\server\line_bot_server.py", line 72, in <module>
    def get_librarian() -> LibrarianAgent:
NameError: name 'LibrarianAgent' is not defined
2025-06-12 00:01:00,117 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-12 00:01:00,118 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-12 00:01:00,128 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-12 00:01:00,128 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-12 00:01:00,129 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-12 00:01:00,129 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-12 00:01:40,880 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-12 00:01:40,880 - __main__ - INFO - アプリケーションを終了します...
2025-06-12 00:01:40,880 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-12 00:01:40,880 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-12 00:01:40,881 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-12 00:01:40,881 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-12 00:01:40,881 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-12 00:01:40,881 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-12 00:01:40,998 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-12 00:01:40,998 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-12 00:02:42,462 - __main__ - INFO - MCPサーバーを起動します...
2025-06-12 00:02:42,462 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-12 00:02:42,462 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-12 00:02:42,462 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-12 00:02:42,462 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-12 00:02:42,462 - __main__ - INFO - LineBotServerThreadを開始しました
2025-06-12 00:02:42,464 - __main__ - INFO - Webサーバーを起動します...
2025-06-12 00:02:42,464 - __main__ - INFO - WebServerThreadを開始しました
2025-06-12 00:02:42,464 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-12 00:02:42,470 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-12 00:02:42,482 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-12 00:02:42,482 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-12 00:02:42,484 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-12 00:02:42,485 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-12 00:02:42,590 - __main__ - INFO - LINE Botサーバーを起動します...
2025-06-12 00:02:42,620 - src.server.line_bot_server - INFO - 司書LLMエージェント LINE Bot APIサーバーを起動します
2025-06-12 00:02:42,621 - src.server.line_bot_server - INFO - LINE Bot API設定が正しく読み込まれました
2025-06-12 00:02:42,621 - src.server.line_bot_server - INFO - LINE Webhook URL: https://takeofflab.biz/callback
2025-06-12 00:02:42,621 - src.server.line_bot_server - INFO - LINE Webhookを設定する際は、LINE Developersコンソールで上記URLを設定してください
2025-06-12 00:02:42,621 - src.server.line_bot_server - INFO - サーバーは 0.0.0.0:8001 でリッスンしています
2025-06-12 00:02:44,497 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-12 00:02:44,497 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-12 00:02:44,504 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-12 00:02:44,504 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-12 00:02:44,504 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-12 00:02:44,504 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-12 00:11:49,352 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-12 00:11:49,353 - __main__ - INFO - アプリケーションを終了します...
2025-06-12 00:11:49,353 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-12 00:11:49,353 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-12 00:11:49,353 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-12 00:11:49,354 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-12 00:11:49,354 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-12 00:11:49,354 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-12 00:11:49,475 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-12 00:11:49,475 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-12 00:12:00,025 - __main__ - INFO - MCPサーバーを起動します...
2025-06-12 00:12:00,025 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-12 00:12:00,025 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-12 00:12:00,025 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-12 00:12:00,025 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-12 00:12:00,026 - __main__ - INFO - LineBotServerThreadを開始しました
2025-06-12 00:12:00,026 - __main__ - INFO - Webサーバーを起動します...
2025-06-12 00:12:00,026 - __main__ - INFO - WebServerThreadを開始しました
2025-06-12 00:12:00,026 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-12 00:12:00,031 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-12 00:12:00,043 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-12 00:12:00,043 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-12 00:12:00,046 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-12 00:12:00,046 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-12 00:12:00,151 - __main__ - INFO - LINE Botサーバーを起動します...
2025-06-12 00:12:00,178 - src.server.line_bot_server - INFO - 司書LLMエージェント LINE Bot APIサーバーを起動します
2025-06-12 00:12:00,178 - src.server.line_bot_server - INFO - LINE Bot API設定が正しく読み込まれました
2025-06-12 00:12:00,178 - src.server.line_bot_server - INFO - LINE Webhook URL: https://takeofflab.biz/callback
2025-06-12 00:12:00,178 - src.server.line_bot_server - INFO - LINE Webhookを設定する際は、LINE Developersコンソールで上記URLを設定してください
2025-06-12 00:12:00,178 - src.server.line_bot_server - INFO - サーバーは 0.0.0.0:8001 でリッスンしています
2025-06-12 00:12:02,054 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-12 00:12:02,055 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-12 00:12:02,060 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-12 00:12:02,060 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-12 00:12:02,060 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-12 00:12:02,060 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-12 00:12:57,936 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-12 00:12:57,937 - __main__ - INFO - アプリケーションを終了します...
2025-06-12 00:12:57,937 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-12 00:12:57,937 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-12 00:12:57,937 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-12 00:12:57,937 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-12 00:12:57,937 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-12 00:12:57,937 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-12 00:12:58,049 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-12 00:12:58,049 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-12 01:02:10,692 - __main__ - INFO - MCPサーバーを起動します...
2025-06-12 01:02:10,692 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-12 01:02:10,692 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-12 01:02:10,692 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-12 01:02:10,693 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-12 01:02:10,693 - __main__ - INFO - LineBotServerThreadを開始しました
2025-06-12 01:02:10,693 - __main__ - INFO - Webサーバーを起動します...
2025-06-12 01:02:10,693 - __main__ - INFO - WebServerThreadを開始しました
2025-06-12 01:02:10,694 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-12 01:02:10,700 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-12 01:02:10,712 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-12 01:02:10,713 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-12 01:02:10,715 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-12 01:02:10,715 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-12 01:02:10,828 - __main__ - INFO - LINE Botサーバーを起動します...
2025-06-12 01:02:10,853 - src.server.line_bot_server - INFO - 司書LLMエージェント LINE Bot APIサーバーを起動します
2025-06-12 01:02:10,853 - src.server.line_bot_server - INFO - LINE Bot API設定が正しく読み込まれました
2025-06-12 01:02:10,853 - src.server.line_bot_server - INFO - CHANNEL_ACCESS_TOKEN: 設定あり
2025-06-12 01:02:10,853 - src.server.line_bot_server - INFO - CHANNEL_SECRET: 設定あり
2025-06-12 01:02:10,853 - src.server.line_bot_server - INFO - LINE Webhook Base URL: https://takeofflab.biz
2025-06-12 01:02:10,854 - src.server.line_bot_server - INFO - LINE Webhook URL: https://takeofflab.biz/callback
2025-06-12 01:02:10,854 - src.server.line_bot_server - INFO - LINE Webhookを設定する際は、LINE Developersコンソールで上記URLを設定してください
2025-06-12 01:02:10,854 - src.server.line_bot_server - INFO - サーバーは 0.0.0.0:8001 でリッスンしています
2025-06-12 01:02:12,925 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-12 01:02:12,926 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-12 01:02:12,931 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-12 01:02:12,931 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-12 01:02:12,931 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-12 01:02:12,931 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-12 01:07:42,521 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-12 01:07:42,522 - __main__ - INFO - アプリケーションを終了します...
2025-06-12 01:07:42,522 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-12 01:07:42,522 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-12 01:07:42,522 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-12 01:07:42,522 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-12 01:07:42,522 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-12 01:07:42,522 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-12 01:07:42,641 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-12 01:07:42,641 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-12 23:18:52,391 - __main__ - INFO - MCPサーバーを起動します...
2025-06-12 23:18:52,391 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-12 23:18:52,391 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-12 23:18:52,391 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-12 23:18:52,392 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-12 23:18:52,392 - __main__ - INFO - LineBotServerThreadを開始しました
2025-06-12 23:18:52,392 - __main__ - INFO - Webサーバーを起動します...
2025-06-12 23:18:52,392 - __main__ - INFO - WebServerThreadを開始しました
2025-06-12 23:18:52,392 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-12 23:18:52,402 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-12 23:18:52,430 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-12 23:18:52,432 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-12 23:18:52,437 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-12 23:18:52,437 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-12 23:18:52,555 - __main__ - INFO - LINE Botサーバーを起動します...
2025-06-12 23:18:52,586 - src.server.line_bot_server - INFO - 司書LLMエージェント LINE Bot APIサーバーを起動します
2025-06-12 23:18:52,587 - src.server.line_bot_server - INFO - LINE Bot API設定が正しく読み込まれました
2025-06-12 23:18:52,587 - src.server.line_bot_server - INFO - CHANNEL_ACCESS_TOKEN: 設定あり
2025-06-12 23:18:52,587 - src.server.line_bot_server - INFO - CHANNEL_SECRET: 設定あり
2025-06-12 23:18:52,587 - src.server.line_bot_server - INFO - LINE Webhook Base URL: https://takeofflab.biz
2025-06-12 23:18:52,587 - src.server.line_bot_server - INFO - LINE Webhook URL: https://takeofflab.biz/callback
2025-06-12 23:18:52,587 - src.server.line_bot_server - INFO - LINE Webhookを設定する際は、LINE Developersコンソールで上記URLを設定してください
2025-06-12 23:18:52,587 - src.server.line_bot_server - INFO - サーバーは 0.0.0.0:8001 でリッスンしています
2025-06-12 23:18:55,486 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-12 23:18:55,486 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-12 23:18:55,497 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-12 23:18:55,497 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-12 23:18:55,498 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-12 23:18:55,498 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-13 00:12:43,987 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-13 00:12:43,993 - __main__ - INFO - アプリケーションを終了します...
2025-06-13 00:12:43,993 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-13 00:12:43,994 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-13 00:12:43,994 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:12:43,995 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:12:43,995 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 00:12:43,995 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 00:12:44,276 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:12:44,276 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:14:57,181 - __main__ - INFO - MCPサーバーを起動します...
2025-06-13 00:14:57,181 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-13 00:14:57,181 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-13 00:14:57,182 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-13 00:14:57,182 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-13 00:14:57,182 - __main__ - INFO - APIServerThreadを開始しました
2025-06-13 00:14:57,183 - __main__ - INFO - Webサーバーを起動します...
2025-06-13 00:14:57,183 - __main__ - INFO - WebServerThreadを開始しました
2025-06-13 00:14:57,183 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-13 00:14:57,189 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 00:14:57,200 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 00:14:57,201 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 00:14:57,203 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 00:14:57,204 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 00:14:57,287 - __main__ - INFO - APIサーバーを起動します...
2025-06-13 00:14:57,287 - src.server.fastapi_server - INFO - 司書LLMエージェントを使用したFastAPIサーバーを起動します - 0.0.0.0:8000
2025-06-13 00:14:57,312 - src.server.fastapi_server - INFO - 司書LLMエージェントAPIサーバーを起動します
2025-06-13 00:14:59,326 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 00:14:59,327 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-13 00:14:59,332 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-13 00:14:59,332 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-13 00:14:59,332 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-13 00:14:59,332 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-13 00:15:39,739 - __main__ - INFO - 司書LLMエージェントAPIクライアントを初期化しました: http://localhost:8000
2025-06-13 00:16:44,305 - __main__ - INFO - クエリを送信します: chunkを分けるアルゴリズムはどうなっているのか教えてください。...
2025-06-13 00:16:46,318 - src.server.fastapi_server - INFO - 司書LLMエージェントに質問します: chunkを分けるアルゴリズムはどうなっているのか教えてください。...
2025-06-13 00:16:46,318 - src.agents.librarian_agent - INFO - クエリを処理します: chunkを分けるアルゴリズムはどうなっているのか教えてください。
2025-06-13 00:16:46,318 - src.agents.librarian_agent - INFO - 使用するLLMモデル: gemma3:12b
2025-06-13 00:16:46,322 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 00:16:46,366 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 00:16:46,430 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:16:46,431 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 00:16:46,431 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:16:46,431 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:16:46,431 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:18:07,867 - __main__ - INFO - クエリを送信します: データベースの構造はどうなっていますか...
2025-06-13 00:18:09,900 - src.server.fastapi_server - INFO - 司書LLMエージェントに質問します: データベースの構造はどうなっていますか...
2025-06-13 00:18:09,900 - src.agents.librarian_agent - INFO - クエリを処理します: データベースの構造はどうなっていますか
2025-06-13 00:18:09,900 - src.agents.librarian_agent - INFO - 使用するLLMモデル: gemma3:12b
2025-06-13 00:18:09,904 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 00:18:09,937 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 00:18:09,993 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:18:09,993 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 00:18:09,993 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:18:09,993 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:18:09,993 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:18:14,674 - src.agents.librarian_agent - INFO - RAG検索を実行します: データベースの構造はどうなっていますか
2025-06-13 00:18:14,674 - src.rag.rag_searcher - INFO - 検索フローを開始します。ユーザークエリ: データベースの構造はどうなっていますか
2025-06-13 00:18:14,674 - src.rag.rag_searcher - INFO - ユーザークエリの理解を開始します: データベースの構造はどうなっていますか
2025-06-13 00:18:16,614 - src.rag.rag_searcher - INFO - 検索クエリに変換しました: データベース 構造 設計 図
2025-06-13 00:18:16,614 - src.rag.rag_searcher - INFO - 検索を実行します: データベース 構造 設計 図
2025-06-13 00:18:16,614 - src.rag.rag_class - INFO - 検索を実行します。クエリ: データベース 構造 設計 図
2025-06-13 00:18:17,044 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 00:18:17,111 - src.rag.rag_class - INFO - 検索結果: 5件
2025-06-13 00:18:17,112 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-13 00:18:17,112 - src.rag.rag_searcher - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-13 00:18:17,112 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-13 00:18:17,112 - src.rag.rag_searcher - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-13 00:18:17,112 - src.rag.rag_searcher - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-13 00:18:17,112 - src.rag.rag_searcher - INFO - 検索結果: 5件, 重複排除後のソース数: 3件
2025-06-13 00:18:17,112 - src.rag.rag_searcher - INFO - 回答の生成を開始します
2025-06-13 00:18:29,933 - src.rag.rag_searcher - INFO - 回答の生成が完了しました
2025-06-13 00:18:29,933 - src.rag.rag_searcher - INFO - 検索フローが完了しました
2025-06-13 00:18:29,933 - src.agents.librarian_agent - INFO - クエリ処理が完了しました
2025-06-13 00:26:05,337 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-13 00:26:05,338 - __main__ - INFO - アプリケーションを終了します...
2025-06-13 00:26:05,338 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-13 00:26:05,338 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-13 00:26:05,339 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:26:05,339 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 00:26:05,340 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:26:05,340 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 00:26:05,340 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 00:26:05,472 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:26:05,472 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:26:17,311 - __main__ - INFO - MCPサーバーを起動します...
2025-06-13 00:26:17,311 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-13 00:26:17,312 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-13 00:26:17,312 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-13 00:26:17,312 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-13 00:26:17,312 - __main__ - INFO - APIServerThreadを開始しました
2025-06-13 00:26:17,312 - __main__ - INFO - Webサーバーを起動します...
2025-06-13 00:26:17,312 - __main__ - INFO - WebServerThreadを開始しました
2025-06-13 00:26:17,312 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-13 00:26:17,321 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 00:26:17,333 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 00:26:17,334 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 00:26:17,336 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 00:26:17,336 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 00:26:17,428 - __main__ - INFO - APIサーバーを起動します...
2025-06-13 00:26:17,428 - src.server.fastapi_server - INFO - 司書LLMエージェントを使用したFastAPIサーバーを起動します - 0.0.0.0:8000
2025-06-13 00:26:17,456 - src.server.fastapi_server - INFO - 司書LLMエージェントAPIサーバーを起動します
2025-06-13 00:26:20,213 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 00:26:20,213 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-13 00:26:20,218 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-13 00:26:20,218 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-13 00:26:20,218 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-13 00:26:20,218 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-13 00:27:06,313 - __main__ - INFO - クエリを送信します: database_updater.pyはどのような処理を行っているのでしょうか。...
2025-06-13 00:27:08,331 - src.server.fastapi_server - INFO - 司書LLMエージェントに質問します: database_updater.pyはどのような処理を行っているのでしょうか。...
2025-06-13 00:27:08,331 - src.agents.librarian_agent - INFO - クエリを処理します: database_updater.pyはどのような処理を行っているのでしょうか。
2025-06-13 00:27:08,331 - src.agents.librarian_agent - INFO - 使用するLLMモデル: gemma3:12b
2025-06-13 00:27:08,334 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 00:27:08,360 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 00:27:08,363 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:27:08,363 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 00:27:08,364 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:27:08,364 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:27:08,364 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:27:17,127 - src.agents.librarian_agent - INFO - RAG検索を実行します: database_updater.pyはどのような処理を行っているのでしょうか。
2025-06-13 00:27:17,127 - src.rag.rag_searcher - INFO - 検索フローを開始します。ユーザークエリ: database_updater.pyはどのような処理を行っているのでしょうか。
2025-06-13 00:27:17,127 - src.rag.rag_searcher - INFO - ユーザークエリの理解を開始します: database_updater.pyはどのような処理を行っているのでしょうか。
2025-06-13 00:27:19,184 - src.rag.rag_searcher - INFO - 検索クエリに変換しました: database_updater.py 処理 内容
2025-06-13 00:27:19,184 - src.rag.rag_searcher - INFO - 検索を実行します: database_updater.py 処理 内容
2025-06-13 00:27:19,184 - src.rag.rag_class - INFO - 検索を実行します。クエリ: database_updater.py 処理 内容
2025-06-13 00:27:19,642 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 00:27:19,999 - src.rag.rag_class - INFO - 検索結果: 5件
2025-06-13 00:27:19,999 - src.rag.rag_searcher - INFO - 検索結果 base_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\base_database.md (original_filepathなし)
2025-06-13 00:27:19,999 - src.rag.rag_searcher - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-13 00:27:19,999 - src.rag.rag_searcher - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-13 00:27:20,000 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-13 00:27:20,000 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-13 00:27:20,000 - src.rag.rag_searcher - INFO - 検索結果: 5件, 重複排除後のソース数: 3件
2025-06-13 00:27:20,000 - src.rag.rag_searcher - INFO - 回答の生成を開始します
2025-06-13 00:27:28,023 - src.rag.rag_searcher - INFO - 回答の生成が完了しました
2025-06-13 00:27:28,023 - src.rag.rag_searcher - INFO - 検索フローが完了しました
2025-06-13 00:27:28,023 - src.agents.librarian_agent - INFO - クエリ処理が完了しました
2025-06-13 00:28:11,627 - src.server.fastapi_server - INFO - ソースファイルへのアクセス要求: data/markdowns/base_database.md
2025-06-13 00:28:11,627 - src.server.fastapi_server - INFO - マークダウンファイルを返します: data/markdowns/base_database.md
2025-06-13 00:28:34,227 - src.server.fastapi_server - INFO - ソースファイルへのアクセス要求: data/markdowns/markdown/database_updater.md
2025-06-13 00:28:34,227 - src.server.fastapi_server - WARNING - ファイルが見つかりません: data/markdowns/markdown/database_updater.md
2025-06-13 00:28:52,368 - src.server.fastapi_server - INFO - ソースファイルへのアクセス要求: data/markdowns/rag_database.md
2025-06-13 00:28:52,368 - src.server.fastapi_server - INFO - マークダウンファイルを返します: data/markdowns/rag_database.md
2025-06-13 00:40:43,594 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-13 00:40:43,595 - __main__ - INFO - アプリケーションを終了します...
2025-06-13 00:40:43,595 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-13 00:40:43,596 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-13 00:40:43,596 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:40:43,596 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 00:40:43,596 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:40:43,596 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 00:40:43,596 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 00:40:43,732 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:40:43,732 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:40:52,244 - __main__ - INFO - MCPサーバーを起動します...
2025-06-13 00:40:52,244 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-13 00:40:52,244 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-13 00:40:52,244 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-13 00:40:52,244 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-13 00:40:52,245 - __main__ - INFO - APIServerThreadを開始しました
2025-06-13 00:40:52,246 - __main__ - INFO - Webサーバーを起動します...
2025-06-13 00:40:52,246 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-13 00:40:52,246 - __main__ - INFO - WebServerThreadを開始しました
2025-06-13 00:40:52,252 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 00:40:52,264 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 00:40:52,264 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 00:40:52,266 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 00:40:52,266 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 00:40:52,348 - __main__ - INFO - APIサーバーを起動します...
2025-06-13 00:40:52,348 - src.server.fastapi_server - INFO - 司書LLMエージェントを使用したFastAPIサーバーを起動します - 0.0.0.0:8000
2025-06-13 00:40:52,375 - src.server.fastapi_server - INFO - 司書LLMエージェントAPIサーバーを起動します
2025-06-13 00:40:54,963 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 00:40:54,963 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-13 00:40:54,968 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-13 00:40:54,968 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-13 00:40:54,968 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-13 00:40:54,969 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-13 00:41:27,073 - __main__ - INFO - クエリを送信します: rag_databaseにはどのようなテーブルが用意されているのか教えてください。...
2025-06-13 00:41:29,102 - src.server.fastapi_server - INFO - 司書LLMエージェントに質問します: rag_databaseにはどのようなテーブルが用意されているのか教えてください。...
2025-06-13 00:41:29,103 - src.agents.librarian_agent - INFO - クエリを処理します: rag_databaseにはどのようなテーブルが用意されているのか教えてください。
2025-06-13 00:41:29,103 - src.agents.librarian_agent - INFO - 使用するLLMモデル: gemma3:12b
2025-06-13 00:41:29,106 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 00:41:29,246 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 00:41:29,248 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:41:29,248 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 00:41:29,248 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:41:29,248 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:41:29,248 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:41:39,028 - src.agents.librarian_agent - INFO - RAG検索を実行します: rag_databaseにはどのようなテーブルが用意されているのか教えてください。
2025-06-13 00:41:39,028 - src.rag.rag_searcher - INFO - 検索フローを開始します。ユーザークエリ: rag_databaseにはどのようなテーブルが用意されているのか教えてください。
2025-06-13 00:41:39,029 - src.rag.rag_searcher - INFO - ユーザークエリの理解を開始します: rag_databaseにはどのようなテーブルが用意されているのか教えてください。
2025-06-13 00:41:41,062 - src.rag.rag_searcher - INFO - 検索クエリに変換しました: rag_database テーブル一覧 構造
2025-06-13 00:41:41,062 - src.rag.rag_searcher - INFO - 検索を実行します: rag_database テーブル一覧 構造
2025-06-13 00:41:41,062 - src.rag.rag_class - INFO - 検索を実行します。クエリ: rag_database テーブル一覧 構造
2025-06-13 00:41:41,490 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 00:41:41,549 - src.rag.rag_class - INFO - 検索結果: 5件
2025-06-13 00:41:41,549 - src.rag.rag_searcher - INFO - 検索結果 database_updater.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\database_updater.md (original_filepathなし)
2025-06-13 00:41:41,550 - src.rag.rag_searcher - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-13 00:41:41,550 - src.rag.rag_searcher - INFO - 検索結果 rag_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\rag_database.md (original_filepathなし)
2025-06-13 00:41:41,550 - src.rag.rag_searcher - INFO - 検索結果 vector_database.md のfilepathを使用: G:\NakedRAG\data\markdowns\vector_database.md (original_filepathなし)
2025-06-13 00:41:41,550 - src.rag.rag_searcher - INFO - 検索結果 rag_initializer.md のfilepathを使用: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md (original_filepathなし)
2025-06-13 00:41:41,550 - src.rag.rag_searcher - INFO - 検索結果: 5件, 重複排除後のソース数: 4件
2025-06-13 00:41:41,551 - src.rag.rag_searcher - INFO - 回答の生成を開始します
2025-06-13 00:41:49,892 - src.rag.rag_searcher - INFO - 回答の生成が完了しました
2025-06-13 00:41:49,892 - src.rag.rag_searcher - INFO - 検索フローが完了しました
2025-06-13 00:41:49,892 - src.agents.librarian_agent - INFO - クエリ処理が完了しました
2025-06-13 00:42:25,817 - src.server.fastapi_server - INFO - ソースファイルへのアクセス要求: data/markdowns/markdown/database_updater.md
2025-06-13 00:42:25,817 - src.rag.rag_class - INFO - 検索を実行します。クエリ: database_updater.md
2025-06-13 00:42:25,925 - src.rag.rag_class - INFO - 検索結果: 10件
2025-06-13 00:42:25,925 - src.server.fastapi_server - WARNING - ファイルが見つかりません: G:\NakedRAG\data\markdowns\markdown\database_updater.md
2025-06-13 00:42:37,369 - src.server.fastapi_server - INFO - ソースファイルへのアクセス要求: data/markdowns/markdown/rag_initializer.md
2025-06-13 00:42:37,369 - src.rag.rag_class - INFO - 検索を実行します。クエリ: rag_initializer.md
2025-06-13 00:42:37,520 - src.rag.rag_class - INFO - 検索結果: 10件
2025-06-13 00:42:37,521 - src.server.fastapi_server - WARNING - ファイルが見つかりません: G:\NakedRAG\data\markdowns\markdown\rag_initializer.md
2025-06-13 00:42:48,765 - src.server.fastapi_server - INFO - ソースファイルへのアクセス要求: data/markdowns/rag_database.md
2025-06-13 00:42:48,765 - src.rag.rag_class - INFO - 検索を実行します。クエリ: rag_database.md
2025-06-13 00:42:48,875 - src.rag.rag_class - INFO - 検索結果: 10件
2025-06-13 00:42:48,875 - src.server.fastapi_server - INFO - filepathが見つかりました: G:\NakedRAG\data\markdowns\rag_database.md
2025-06-13 00:42:48,877 - src.server.fastapi_server - INFO - ファイルを一時ディレクトリにコピーしました: G:\NakedRAG\data\markdowns\rag_database.md -> C:\Users\Akini\AppData\Local\Temp\tmp5tr8_m7p\rag_database.md
2025-06-13 00:42:48,877 - src.server.fastapi_server - INFO - マークダウンファイルを返します: rag_database.md
2025-06-13 00:45:47,377 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-13 00:45:47,378 - __main__ - INFO - アプリケーションを終了します...
2025-06-13 00:45:47,378 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-13 00:45:47,378 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-13 00:45:47,378 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:45:47,379 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 00:45:47,379 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:45:47,379 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 00:45:47,379 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 00:45:47,498 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 00:45:47,498 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 00:46:20,333 - __main__ - INFO - ベクトルデータベースを検査しています...
2025-06-13 00:46:20,333 - __main__ - INFO - テーブル構造:
2025-06-13 00:46:20,361 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 00:46:20,378 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True
2025-06-13 00:46:20,379 - __main__ - INFO - レコード数: 29
2025-06-13 00:46:20,381 - __main__ - INFO - ユニークなファイル数: 9
2025-06-13 00:46:20,385 - __main__ - INFO - ファイル一覧:
2025-06-13 00:46:20,386 - __main__ - INFO - サンプルデータ (最初の5件):
2025-06-13 00:46:20,390 - __main__ - INFO - ベクトルサンプル (最初のレコードの最初の10要素):
2025-06-13 00:46:20,392 - __main__ - INFO - ベクトル次元数: 12713
2025-06-13 00:46:20,392 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 00:46:20,392 - __main__ - INFO - RAGデータベースを検査しています...
2025-06-13 00:46:20,393 - __main__ - INFO - テーブル構造:
2025-06-13 00:46:20,425 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 00:46:20,438 - __main__ - INFO - original_filepathカラムの存在: True
2025-06-13 00:46:20,438 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, チャンクテキスト=chunk_text
2025-06-13 00:46:20,440 - __main__ - INFO - ドキュメント数: 29
2025-06-13 00:46:20,440 - __main__ - INFO - ユニークなソース数: 9
2025-06-13 00:46:20,440 - __main__ - INFO - ソース一覧 (最初の10件):
2025-06-13 00:46:20,440 - __main__ - INFO - サンプルデータ (最初の5件):
2025-06-13 00:46:20,442 - __main__ - INFO - ベクトルサンプル (最初のレコードの最初の10要素):
2025-06-13 00:46:20,442 - __main__ - INFO - ベクトル次元数: 12722
2025-06-13 00:46:20,442 - __main__ - INFO - 検索インデックス情報:
2025-06-13 00:46:20,445 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:03:12,795 - __main__ - INFO - RAGシステムの初期化を開始します...
2025-06-13 01:03:12,832 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-13 01:03:12,832 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\data\source
2025-06-13 01:03:12,833 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\data\markdowns
2025-06-13 01:03:12,833 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-13 01:03:12,834 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-13 01:03:12,913 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-13 01:03:12,913 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-13 01:03:12,913 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-13 01:03:12,913 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-13 01:03:12,913 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-13 01:03:12,948 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-13 01:03:13,080 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-13 01:03:13,080 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-13 01:03:13,109 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-13 01:03:13,132 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-13 01:03:13,132 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-13 01:03:13,164 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-13 01:03:13,165 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-13 01:03:13,192 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-13 01:03:13,192 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-13 01:03:13,192 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-13 01:03:13,192 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-13 01:03:13,220 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-13 01:03:13,220 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-13 01:03:13,220 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-13 01:03:13,243 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 01:03:13,260 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-13 01:03:13,261 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-13 01:03:13,279 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-13 01:03:13,305 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-13 01:03:13,305 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-13 01:03:13,305 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-13 01:03:13,305 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-13 01:03:13,305 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-13 01:03:13,318 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 01:03:13,318 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 01:03:13,320 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 01:03:13,320 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 01:03:16,301 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 01:03:16,301 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:03:16,307 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-13 01:03:16,530 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:03:16,541 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-13 01:03:16,541 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-13 01:03:16,542 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-13 01:03:16,547 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-13 01:03:16,575 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 01:03:16,580 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-13 01:03:16,580 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-13 01:03:16,580 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-13 01:03:16,586 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-13 01:03:16,609 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 01:03:16,612 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-13 01:03:16,612 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-13 01:03:16,613 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-13 01:03:16,618 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-13 01:03:16,650 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:03:16,656 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-13 01:03:16,656 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-13 01:03:16,656 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-13 01:03:16,661 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-13 01:03:16,694 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:03:16,698 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-13 01:03:16,698 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-13 01:03:16,698 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:03:16,700 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-13 01:03:16,756 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-13 01:03:16,766 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-13 01:03:16,766 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-13 01:03:16,767 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-13 01:03:16,772 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-13 01:03:16,812 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 01:03:16,818 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-13 01:03:16,818 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-13 01:03:16,818 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-13 01:03:16,823 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-13 01:03:16,854 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:03:16,858 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-13 01:03:16,858 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-13 01:03:16,858 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:03:16,864 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-13 01:03:16,903 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 01:03:16,909 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-13 01:03:16,909 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-13 01:03:16,909 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-13 01:03:16,909 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-13 01:03:16,909 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-13 01:03:16,939 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-13 01:03:16,967 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 01:03:16,980 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 01:03:16,987 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:03:16,987 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-13 01:03:16,987 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-13 01:03:16,988 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:03:16,988 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-13 01:03:16,990 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 01:03:16,992 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:03:17,120 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-13 01:03:17,120 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-13 01:03:17,126 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-13 01:03:17,186 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-13 01:03:17,186 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 01:03:17,202 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 01:03:17,202 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-13 01:03:17,203 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-13 01:03:17,203 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-13 01:03:17,204 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 01:03:17,214 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 01:03:17,214 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-13 01:03:17,215 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 29
2025-06-13 01:03:17,215 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 9
2025-06-13 01:03:17,215 - src.rag.rag_initializer - INFO - ソース 1: vector_database.md (G:\NakedRAG\data\markdowns\vector_database.md)
2025-06-13 01:03:17,215 - src.rag.rag_initializer - INFO - ソース 2: rag_initializer.md (G:\NakedRAG\data\markdowns\rag_initializer.md)
2025-06-13 01:03:17,215 - src.rag.rag_initializer - INFO - ソース 3: embedding_generator.md (G:\NakedRAG\data\markdowns\embedding_generator.md)
2025-06-13 01:03:17,215 - src.rag.rag_initializer - INFO - ソース 4: rag_database.md (G:\NakedRAG\data\markdowns\rag_database.md)
2025-06-13 01:03:17,215 - src.rag.rag_initializer - INFO - ソース 5: base_database.md (G:\NakedRAG\data\markdowns\base_database.md)
2025-06-13 01:03:17,215 - src.rag.rag_initializer - INFO - ...他 4 件のソース
2025-06-13 01:03:17,215 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-13 01:03:17,215 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 01:03:17,215 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:03:17,216 - __main__ - INFO - RAGシステムの初期化が完了しました
2025-06-13 01:03:17,216 - __main__ - INFO - MCPサーバーを起動します...
2025-06-13 01:03:17,216 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-13 01:03:17,216 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-13 01:03:17,217 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-13 01:03:17,217 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-13 01:03:17,217 - __main__ - INFO - APIServerThreadを開始しました
2025-06-13 01:03:17,218 - __main__ - INFO - Webサーバーを起動します...
2025-06-13 01:03:17,218 - __main__ - INFO - WebServerThreadを開始しました
2025-06-13 01:03:17,218 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-13 01:03:17,225 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 01:03:17,225 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 01:03:17,225 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 01:03:17,226 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 01:03:17,226 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 01:03:17,379 - __main__ - INFO - APIサーバーを起動します...
2025-06-13 01:03:17,379 - src.server.fastapi_server - INFO - 司書LLMエージェントを使用したFastAPIサーバーを起動します - 0.0.0.0:8000
2025-06-13 01:03:17,815 - src.server.fastapi_server - INFO - 司書LLMエージェントAPIサーバーを起動します
2025-06-13 01:03:18,735 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 01:03:18,735 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-13 01:03:18,738 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-13 01:03:18,738 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-13 01:03:18,738 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-13 01:03:18,738 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-13 01:03:56,429 - __main__ - INFO - ベクトルデータベースを検査しています...
2025-06-13 01:03:56,430 - __main__ - INFO - テーブル構造:
2025-06-13 01:03:56,454 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 01:03:56,462 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True
2025-06-13 01:03:56,462 - __main__ - INFO - レコード数: 29
2025-06-13 01:03:56,463 - __main__ - INFO - ユニークなファイル数: 9
2025-06-13 01:03:56,463 - __main__ - INFO - ファイル一覧:
2025-06-13 01:03:56,463 - __main__ - INFO - サンプルデータ (最初の5件):
2025-06-13 01:03:56,464 - __main__ - INFO - ベクトルサンプル (最初のレコードの最初の10要素):
2025-06-13 01:03:56,465 - __main__ - INFO - ベクトル次元数: 12713
2025-06-13 01:03:56,465 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 01:03:56,465 - __main__ - INFO - RAGデータベースを検査しています...
2025-06-13 01:03:56,466 - __main__ - INFO - テーブル構造:
2025-06-13 01:03:56,495 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 01:03:56,501 - __main__ - INFO - original_filepathカラムの存在: True
2025-06-13 01:03:56,501 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, チャンクテキスト=chunk_text
2025-06-13 01:03:56,504 - __main__ - INFO - ドキュメント数: 29
2025-06-13 01:03:56,504 - __main__ - INFO - ユニークなソース数: 9
2025-06-13 01:03:56,504 - __main__ - INFO - ソース一覧 (最初の10件):
2025-06-13 01:03:56,504 - __main__ - INFO - サンプルデータ (最初の5件):
2025-06-13 01:03:56,505 - __main__ - INFO - ベクトルサンプル (最初のレコードの最初の10要素):
2025-06-13 01:03:56,505 - __main__ - INFO - ベクトル次元数: 12722
2025-06-13 01:03:56,505 - __main__ - INFO - 検索インデックス情報:
2025-06-13 01:03:56,507 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:10:26,136 - __main__ - INFO - ベクトルデータベースのoriginal_filepath情報:
2025-06-13 01:10:26,160 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 01:10:26,169 - __main__ - INFO - original_filepathが設定されているレコード数: 0 / 29
2025-06-13 01:10:26,169 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 01:10:26,170 - __main__ - INFO - RAGデータベースのoriginal_filepath情報:
2025-06-13 01:10:26,193 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 01:10:26,199 - __main__ - WARNING - rag_chunksテーブルにoriginal_filepathカラムが存在しません
2025-06-13 01:10:26,199 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:11:30,739 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-13 01:11:30,740 - __main__ - INFO - アプリケーションを終了します...
2025-06-13 01:11:30,740 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-13 01:11:30,740 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-13 01:11:30,740 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 01:11:30,740 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 01:11:30,740 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 01:11:30,740 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 01:11:30,861 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 01:11:30,861 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 01:15:31,803 - __main__ - INFO - RAGシステムの初期化を開始します...
2025-06-13 01:15:31,807 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-13 01:15:31,807 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\data\source
2025-06-13 01:15:31,807 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\data\markdowns
2025-06-13 01:15:31,807 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-13 01:15:31,808 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-13 01:15:31,835 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-13 01:15:31,836 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-13 01:15:31,836 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-13 01:15:31,836 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-13 01:15:31,836 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-13 01:15:31,862 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-13 01:15:31,886 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-13 01:15:31,886 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-13 01:15:31,912 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-13 01:15:31,936 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-13 01:15:31,936 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-13 01:15:31,959 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-13 01:15:31,959 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-13 01:15:31,992 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-13 01:15:31,992 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-13 01:15:31,992 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-13 01:15:31,992 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-13 01:15:32,017 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-13 01:15:32,018 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-13 01:15:32,018 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-13 01:15:32,041 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 01:15:32,046 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-13 01:15:32,046 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-13 01:15:32,052 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-13 01:15:32,077 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-13 01:15:32,077 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-13 01:15:32,078 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-13 01:15:32,078 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-13 01:15:32,078 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-13 01:15:32,090 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 01:15:32,090 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 01:15:32,092 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 01:15:32,092 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 01:15:34,008 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 01:15:34,008 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:15:34,010 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-13 01:15:34,212 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:15:34,219 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-13 01:15:34,219 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-13 01:15:34,219 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-13 01:15:34,219 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-13 01:15:34,247 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 01:15:34,250 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-13 01:15:34,250 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-13 01:15:34,250 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-13 01:15:34,251 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-13 01:15:34,274 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 01:15:34,277 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-13 01:15:34,277 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-13 01:15:34,277 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-13 01:15:34,278 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-13 01:15:34,309 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:15:34,315 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-13 01:15:34,315 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-13 01:15:34,316 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-13 01:15:34,316 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-13 01:15:34,348 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:15:34,352 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-13 01:15:34,352 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-13 01:15:34,352 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:15:34,353 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-13 01:15:34,408 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-13 01:15:34,420 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-13 01:15:34,420 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-13 01:15:34,420 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-13 01:15:34,421 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-13 01:15:34,459 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 01:15:34,466 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-13 01:15:34,466 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-13 01:15:34,466 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-13 01:15:34,467 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-13 01:15:34,499 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:15:34,505 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-13 01:15:34,505 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-13 01:15:34,505 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:15:34,506 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-13 01:15:34,543 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 01:15:34,549 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-13 01:15:34,550 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-13 01:15:34,550 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-13 01:15:34,550 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-13 01:15:34,550 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-13 01:15:34,581 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-13 01:15:34,610 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 01:15:34,620 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 01:15:34,625 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:15:34,625 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-13 01:15:34,625 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-13 01:15:34,626 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:15:34,626 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-13 01:15:34,627 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 01:15:34,630 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:15:34,656 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-13 01:15:34,656 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-13 01:15:34,662 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-13 01:15:34,705 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-13 01:15:34,705 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 01:15:34,717 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 01:15:34,717 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-13 01:15:34,717 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-13 01:15:34,717 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-13 01:15:34,718 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 01:15:34,728 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 01:15:34,728 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-13 01:15:34,730 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 29
2025-06-13 01:15:34,730 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 9
2025-06-13 01:15:34,730 - src.rag.rag_initializer - INFO - ソース 1: vector_database.md (G:\NakedRAG\data\markdowns\vector_database.md)
2025-06-13 01:15:34,730 - src.rag.rag_initializer - INFO - ソース 2: rag_initializer.md (G:\NakedRAG\data\markdowns\rag_initializer.md)
2025-06-13 01:15:34,730 - src.rag.rag_initializer - INFO - ソース 3: embedding_generator.md (G:\NakedRAG\data\markdowns\embedding_generator.md)
2025-06-13 01:15:34,730 - src.rag.rag_initializer - INFO - ソース 4: rag_database.md (G:\NakedRAG\data\markdowns\rag_database.md)
2025-06-13 01:15:34,730 - src.rag.rag_initializer - INFO - ソース 5: base_database.md (G:\NakedRAG\data\markdowns\base_database.md)
2025-06-13 01:15:34,730 - src.rag.rag_initializer - INFO - ...他 4 件のソース
2025-06-13 01:15:34,730 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-13 01:15:34,731 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 01:15:34,731 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:15:34,731 - __main__ - INFO - RAGシステムの初期化が完了しました
2025-06-13 01:15:34,731 - __main__ - INFO - MCPサーバーを起動します...
2025-06-13 01:15:34,731 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-13 01:15:34,732 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-13 01:15:34,732 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-13 01:15:34,732 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-13 01:15:34,732 - __main__ - INFO - APIServerThreadを開始しました
2025-06-13 01:15:34,732 - __main__ - INFO - Webサーバーを起動します...
2025-06-13 01:15:34,732 - __main__ - INFO - WebServerThreadを開始しました
2025-06-13 01:15:34,732 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-13 01:15:34,739 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 01:15:34,739 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 01:15:34,739 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 01:15:34,739 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 01:15:34,739 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 01:15:34,978 - __main__ - INFO - APIサーバーを起動します...
2025-06-13 01:15:34,979 - src.server.fastapi_server - INFO - 司書LLMエージェントを使用したFastAPIサーバーを起動します - 0.0.0.0:8000
2025-06-13 01:15:35,043 - src.server.fastapi_server - INFO - 司書LLMエージェントAPIサーバーを起動します
2025-06-13 01:15:36,367 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 01:15:36,367 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-13 01:15:36,370 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-13 01:15:36,370 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-13 01:15:36,370 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-13 01:15:36,371 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-13 01:16:40,682 - __main__ - INFO - ベクトルデータベースを検査しています...
2025-06-13 01:16:40,682 - __main__ - INFO - テーブル構造:
2025-06-13 01:16:40,710 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 01:16:40,717 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True
2025-06-13 01:16:40,718 - __main__ - INFO - レコード数: 29
2025-06-13 01:16:40,718 - __main__ - INFO - ユニークなファイル数: 9
2025-06-13 01:16:40,718 - __main__ - INFO - original_filepathが設定されているレコード数: 0 / 29
2025-06-13 01:16:40,719 - __main__ - INFO - ファイル一覧 (最大20件):
2025-06-13 01:16:40,719 - __main__ - INFO - サンプルデータ (最初の5件):
2025-06-13 01:16:40,719 - __main__ - INFO - ベクトルサンプル (最初のレコードの最初の10要素):
2025-06-13 01:16:40,720 - __main__ - INFO - ベクトル次元数: 12713
2025-06-13 01:16:40,721 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 01:16:40,721 - __main__ - INFO - RAGデータベースを検査しています...
2025-06-13 01:16:40,721 - __main__ - INFO - テーブル構造:
2025-06-13 01:16:40,747 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 01:16:40,754 - __main__ - INFO - original_filepathカラムの存在: True
2025-06-13 01:16:40,754 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, チャンクテキスト=chunk_text
2025-06-13 01:16:40,755 - __main__ - INFO - ドキュメント数: 29
2025-06-13 01:16:40,756 - __main__ - INFO - ユニークなソース数: 9
2025-06-13 01:16:40,756 - __main__ - INFO - ソース一覧 (最初の10件):
2025-06-13 01:16:40,756 - __main__ - INFO - original_filepathが設定されているレコード数: 0 / 29
2025-06-13 01:16:40,756 - __main__ - ERROR - RAGデータベース検査中にエラーが発生しました: 'int' object is not subscriptable
Traceback (most recent call last):
  File "G:\NakedRAG\test\inspect_databases.py", line 269, in inspect_rag_database
    if record_count and record_count[0][0] > 0:
TypeError: 'int' object is not subscriptable
2025-06-13 01:16:40,756 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:17:04,317 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-13 01:17:04,318 - __main__ - INFO - アプリケーションを終了します...
2025-06-13 01:17:04,318 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-13 01:17:04,318 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-13 01:17:04,318 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 01:17:04,318 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 01:17:04,319 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 01:17:04,319 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 01:17:04,431 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 01:17:04,431 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 01:18:16,350 - __main__ - INFO - ベクトルデータベースを検査しています...
2025-06-13 01:18:16,350 - __main__ - INFO - テーブル構造:
2025-06-13 01:18:16,376 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 01:18:16,383 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True
2025-06-13 01:18:16,383 - __main__ - INFO - レコード数: 29
2025-06-13 01:18:16,384 - __main__ - INFO - ユニークなファイル数: 9
2025-06-13 01:18:16,384 - __main__ - INFO - original_filepathが設定されているレコード数: 0 / 29
2025-06-13 01:18:16,384 - __main__ - INFO - ファイル一覧 (最大20件):
2025-06-13 01:18:16,384 - __main__ - INFO - サンプルデータ (最初の5件):
2025-06-13 01:18:16,386 - __main__ - INFO - ベクトルサンプル (最初のレコードの最初の10要素):
2025-06-13 01:18:16,386 - __main__ - INFO - ベクトル次元数: 12713
2025-06-13 01:18:16,387 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 01:18:16,387 - __main__ - INFO - RAGデータベースを検査しています...
2025-06-13 01:18:16,387 - __main__ - INFO - テーブル構造:
2025-06-13 01:18:16,417 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 01:18:16,424 - __main__ - INFO - original_filepathカラムの存在: True
2025-06-13 01:18:16,424 - __main__ - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, チャンクテキスト=chunk_text
2025-06-13 01:18:16,426 - __main__ - INFO - ドキュメント数: 29
2025-06-13 01:18:16,426 - __main__ - INFO - ユニークなソース数: 9
2025-06-13 01:18:16,426 - __main__ - INFO - ソース一覧 (最初の10件):
2025-06-13 01:18:16,426 - __main__ - INFO - original_filepathが設定されているレコード数: 0 / 29
2025-06-13 01:18:16,426 - __main__ - INFO - サンプルデータ (最初の5件):
2025-06-13 01:18:16,427 - __main__ - INFO - ベクトルサンプル (最初のレコードの最初の10要素):
2025-06-13 01:18:16,427 - __main__ - INFO - ベクトル次元数: 12722
2025-06-13 01:18:16,427 - __main__ - INFO - 検索インデックス情報:
2025-06-13 01:18:16,429 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:18:29,048 - __main__ - INFO - ベクトルデータベースのoriginal_filepath情報:
2025-06-13 01:18:29,074 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 01:18:29,081 - __main__ - INFO - original_filepathが設定されているレコード数: 0 / 29
2025-06-13 01:18:29,082 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 01:18:29,082 - __main__ - INFO - RAGデータベースのoriginal_filepath情報:
2025-06-13 01:18:29,106 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 01:18:29,113 - __main__ - WARNING - rag_chunksテーブルにoriginal_filepathカラムが存在しません
2025-06-13 01:18:29,113 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:21:40,207 - __main__ - INFO - ベクトルデータベースのoriginal_filepath情報:
2025-06-13 01:21:40,235 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 01:21:40,242 - __main__ - INFO - original_filepathが設定されているレコード数: 0 / 29
2025-06-13 01:21:40,242 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 01:21:40,243 - __main__ - INFO - RAGデータベースのoriginal_filepath情報:
2025-06-13 01:21:40,269 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 01:21:40,278 - __main__ - INFO - original_filepathが設定されているレコード数: 0 / 29
2025-06-13 01:21:40,280 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:24:24,593 - __main__ - INFO - RAGシステムの初期化を開始します...
2025-06-13 01:24:24,597 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-13 01:24:24,597 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\data\source
2025-06-13 01:24:24,597 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\data\markdowns
2025-06-13 01:24:24,597 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-13 01:24:24,598 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-13 01:24:24,628 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-13 01:24:24,630 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-13 01:24:24,630 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-13 01:24:24,630 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-13 01:24:24,630 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-13 01:24:24,656 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-13 01:24:24,686 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-13 01:24:24,688 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-13 01:24:24,711 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-13 01:24:24,840 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-13 01:24:24,842 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-13 01:24:24,864 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-13 01:24:24,864 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-13 01:24:24,894 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-13 01:24:24,894 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-13 01:24:24,894 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-13 01:24:24,894 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-13 01:24:24,927 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-13 01:24:24,927 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-13 01:24:24,927 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-13 01:24:24,955 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 01:24:24,961 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-13 01:24:24,961 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-13 01:24:24,968 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-13 01:24:24,994 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-13 01:24:24,994 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-13 01:24:24,994 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-13 01:24:24,994 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-13 01:24:24,994 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-13 01:24:25,007 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 01:24:25,007 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 01:24:25,009 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 01:24:25,009 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 01:24:26,983 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 01:24:26,983 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:24:26,986 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-13 01:24:27,206 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:24:27,212 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-13 01:24:27,213 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-13 01:24:27,213 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-13 01:24:27,213 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-13 01:24:27,242 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 01:24:27,246 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-13 01:24:27,246 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-13 01:24:27,246 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-13 01:24:27,247 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-13 01:24:27,269 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 01:24:27,273 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-13 01:24:27,273 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-13 01:24:27,273 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-13 01:24:27,274 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-13 01:24:27,307 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:24:27,312 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-13 01:24:27,312 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-13 01:24:27,313 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-13 01:24:27,313 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-13 01:24:27,345 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:24:27,349 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-13 01:24:27,349 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-13 01:24:27,349 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:24:27,350 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-13 01:24:27,407 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-13 01:24:27,414 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-13 01:24:27,415 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-13 01:24:27,415 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-13 01:24:27,415 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-13 01:24:27,453 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 01:24:27,460 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-13 01:24:27,460 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-13 01:24:27,460 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-13 01:24:27,461 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-13 01:24:27,492 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:24:27,496 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-13 01:24:27,497 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-13 01:24:27,497 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:24:27,498 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-13 01:24:27,536 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 01:24:27,543 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-13 01:24:27,543 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-13 01:24:27,543 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-13 01:24:27,543 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-13 01:24:27,543 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-13 01:24:27,576 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-13 01:24:27,603 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 01:24:27,609 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 01:24:27,615 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:24:27,615 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-13 01:24:27,615 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-13 01:24:27,615 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:24:27,615 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-13 01:24:27,618 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 01:24:27,620 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:24:27,755 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-13 01:24:27,755 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-13 01:24:27,760 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-13 01:24:27,805 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-13 01:24:27,806 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 01:24:27,822 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 01:24:27,823 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-13 01:24:27,823 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-13 01:24:27,823 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-13 01:24:27,824 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 01:24:27,840 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 01:24:27,840 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-13 01:24:27,840 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 29
2025-06-13 01:24:27,842 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 9
2025-06-13 01:24:27,842 - src.rag.rag_initializer - INFO - ソース 1: vector_database.md (G:\NakedRAG\data\markdowns\vector_database.md)
2025-06-13 01:24:27,842 - src.rag.rag_initializer - INFO - ソース 2: rag_initializer.md (G:\NakedRAG\data\markdowns\rag_initializer.md)
2025-06-13 01:24:27,842 - src.rag.rag_initializer - INFO - ソース 3: embedding_generator.md (G:\NakedRAG\data\markdowns\embedding_generator.md)
2025-06-13 01:24:27,842 - src.rag.rag_initializer - INFO - ソース 4: rag_database.md (G:\NakedRAG\data\markdowns\rag_database.md)
2025-06-13 01:24:27,842 - src.rag.rag_initializer - INFO - ソース 5: base_database.md (G:\NakedRAG\data\markdowns\base_database.md)
2025-06-13 01:24:27,842 - src.rag.rag_initializer - INFO - ...他 4 件のソース
2025-06-13 01:24:27,842 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-13 01:24:27,842 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 01:24:27,842 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:24:27,842 - __main__ - INFO - RAGシステムの初期化が完了しました
2025-06-13 01:24:27,842 - __main__ - INFO - MCPサーバーを起動します...
2025-06-13 01:24:27,842 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-13 01:24:27,842 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-13 01:24:27,843 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-13 01:24:27,843 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-13 01:24:27,843 - __main__ - INFO - Webサーバーを起動します...
2025-06-13 01:24:27,843 - __main__ - INFO - WebServerThreadを開始しました
2025-06-13 01:24:27,843 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-13 01:24:27,848 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 01:24:27,849 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 01:24:27,849 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 01:24:27,849 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 01:24:27,849 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 01:24:29,440 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 01:24:29,440 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-13 01:24:29,444 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-13 01:24:29,444 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-13 01:24:29,444 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-13 01:24:29,444 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-13 01:24:49,421 - __main__ - INFO - ベクトルデータベースのoriginal_filepath情報:
2025-06-13 01:24:49,446 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 01:24:49,453 - __main__ - INFO - original_filepathが設定されているレコード数: 0 / 29
2025-06-13 01:24:49,454 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 01:24:49,454 - __main__ - INFO - RAGデータベースのoriginal_filepath情報:
2025-06-13 01:24:49,478 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 01:24:49,486 - __main__ - INFO - original_filepathが設定されているレコード数: 0 / 29
2025-06-13 01:24:49,486 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:26:17,058 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-13 01:26:17,058 - __main__ - INFO - アプリケーションを終了します...
2025-06-13 01:26:17,058 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-13 01:26:17,059 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-13 01:26:17,059 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 01:26:17,059 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 01:26:17,059 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 01:26:17,059 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 01:26:17,180 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 01:26:17,181 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 01:27:17,383 - __main__ - INFO - RAGシステムの初期化を開始します...
2025-06-13 01:27:17,387 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-13 01:27:17,387 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\data\source
2025-06-13 01:27:17,387 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\data\markdowns
2025-06-13 01:27:17,387 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-13 01:27:17,389 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-13 01:27:17,419 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-13 01:27:17,419 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-13 01:27:17,419 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-13 01:27:17,419 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-13 01:27:17,419 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-13 01:27:17,446 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-13 01:27:17,471 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-13 01:27:17,471 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-13 01:27:17,495 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-13 01:27:17,624 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-13 01:27:17,624 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-13 01:27:17,649 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-13 01:27:17,649 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-13 01:27:17,673 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-13 01:27:17,673 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-13 01:27:17,673 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-13 01:27:17,674 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-13 01:27:17,707 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-13 01:27:17,707 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-13 01:27:17,708 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-13 01:27:17,732 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 01:27:17,737 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-13 01:27:17,738 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-13 01:27:17,744 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-13 01:27:17,771 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-13 01:27:17,772 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-13 01:27:17,772 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-13 01:27:17,773 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-13 01:27:17,773 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-13 01:27:17,783 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 01:27:17,783 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 01:27:17,785 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 01:27:17,786 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 01:27:19,839 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 01:27:19,839 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:27:19,840 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-13 01:27:20,045 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:27:20,051 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-13 01:27:20,051 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-13 01:27:20,051 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-13 01:27:20,051 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-13 01:27:20,080 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 01:27:20,083 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-13 01:27:20,083 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-13 01:27:20,083 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-13 01:27:20,085 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-13 01:27:20,108 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 01:27:20,112 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-13 01:27:20,112 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-13 01:27:20,112 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-13 01:27:20,113 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-13 01:27:20,143 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:27:20,149 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-13 01:27:20,149 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-13 01:27:20,149 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-13 01:27:20,150 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-13 01:27:20,181 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:27:20,186 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-13 01:27:20,186 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-13 01:27:20,186 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:27:20,186 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-13 01:27:20,242 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-13 01:27:20,254 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-13 01:27:20,254 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-13 01:27:20,254 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-13 01:27:20,255 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-13 01:27:20,293 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 01:27:20,299 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-13 01:27:20,299 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-13 01:27:20,299 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-13 01:27:20,300 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-13 01:27:20,330 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:27:20,335 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-13 01:27:20,335 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-13 01:27:20,335 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:27:20,336 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-13 01:27:20,374 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 01:27:20,380 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-13 01:27:20,380 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-13 01:27:20,380 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-13 01:27:20,380 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-13 01:27:20,381 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-13 01:27:20,408 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-13 01:27:20,434 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 01:27:20,439 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 01:27:20,445 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:27:20,445 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-13 01:27:20,445 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-13 01:27:20,446 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:27:20,446 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-13 01:27:20,447 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 01:27:20,450 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:27:20,473 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-13 01:27:20,474 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-13 01:27:20,480 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-13 01:27:20,524 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-13 01:27:20,524 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 01:27:20,542 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 01:27:20,542 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-13 01:27:20,542 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-13 01:27:20,543 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-13 01:27:20,544 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 01:27:20,558 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 01:27:20,558 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-13 01:27:20,559 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 29
2025-06-13 01:27:20,559 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 9
2025-06-13 01:27:20,559 - src.rag.rag_initializer - INFO - ソース 1: vector_database.md (G:\NakedRAG\data\markdowns\vector_database.md)
2025-06-13 01:27:20,559 - src.rag.rag_initializer - INFO - ソース 2: rag_initializer.md (G:\NakedRAG\data\markdowns\rag_initializer.md)
2025-06-13 01:27:20,559 - src.rag.rag_initializer - INFO - ソース 3: embedding_generator.md (G:\NakedRAG\data\markdowns\embedding_generator.md)
2025-06-13 01:27:20,559 - src.rag.rag_initializer - INFO - ソース 4: rag_database.md (G:\NakedRAG\data\markdowns\rag_database.md)
2025-06-13 01:27:20,559 - src.rag.rag_initializer - INFO - ソース 5: base_database.md (G:\NakedRAG\data\markdowns\base_database.md)
2025-06-13 01:27:20,560 - src.rag.rag_initializer - INFO - ...他 4 件のソース
2025-06-13 01:27:20,560 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-13 01:27:20,560 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 01:27:20,560 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:27:20,560 - __main__ - INFO - RAGシステムの初期化が完了しました
2025-06-13 01:27:20,560 - __main__ - INFO - MCPサーバーを起動します...
2025-06-13 01:27:20,561 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-13 01:27:20,560 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-13 01:27:20,561 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-13 01:27:20,561 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-13 01:27:20,561 - __main__ - INFO - Webサーバーを起動します...
2025-06-13 01:27:20,561 - __main__ - INFO - WebServerThreadを開始しました
2025-06-13 01:27:20,561 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-13 01:27:20,567 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 01:27:20,567 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 01:27:20,567 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 01:27:20,567 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 01:27:20,567 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 01:27:22,104 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 01:27:22,104 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-13 01:27:22,106 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-13 01:27:22,107 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-13 01:27:22,107 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-13 01:27:22,107 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-13 01:28:28,968 - __main__ - INFO - ベクトルデータベースのoriginal_filepath情報:
2025-06-13 01:28:28,996 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 01:28:29,005 - __main__ - INFO - original_filepathが設定されているレコード数: 0 / 29
2025-06-13 01:28:29,005 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 01:28:29,006 - __main__ - INFO - RAGデータベースのoriginal_filepath情報:
2025-06-13 01:28:29,033 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 01:28:29,040 - __main__ - INFO - original_filepathが設定されているレコード数: 0 / 29
2025-06-13 01:28:29,042 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:28:55,794 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-13 01:28:55,795 - __main__ - INFO - アプリケーションを終了します...
2025-06-13 01:28:55,795 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-13 01:28:55,795 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-13 01:28:55,795 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 01:28:55,795 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 01:28:55,795 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 01:28:55,795 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 01:28:55,909 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 01:28:55,909 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 01:48:05,346 - __main__ - INFO - RAGシステムの初期化を開始します...
2025-06-13 01:48:05,441 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-13 01:48:05,442 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\data\source
2025-06-13 01:48:05,442 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\data\markdowns
2025-06-13 01:48:05,442 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-13 01:48:05,443 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-13 01:48:05,470 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-13 01:48:05,470 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-13 01:48:05,470 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-13 01:48:05,470 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-13 01:48:05,470 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-13 01:48:05,601 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-13 01:48:05,627 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-13 01:48:05,627 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-13 01:48:05,651 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-13 01:48:05,678 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-13 01:48:05,678 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-13 01:48:05,703 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-13 01:48:05,703 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-13 01:48:05,727 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-13 01:48:05,727 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-13 01:48:05,728 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-13 01:48:05,728 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-13 01:48:05,754 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-13 01:48:05,754 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-13 01:48:05,754 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-13 01:48:05,777 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 01:48:05,782 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-13 01:48:05,782 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-13 01:48:05,789 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-13 01:48:05,820 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-13 01:48:05,820 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-13 01:48:05,821 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-13 01:48:05,821 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-13 01:48:05,821 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-13 01:48:05,836 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 01:48:05,836 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 01:48:05,839 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 01:48:05,839 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 01:48:07,772 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 01:48:07,773 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:48:07,774 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-13 01:48:07,976 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:48:07,983 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-13 01:48:07,983 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-13 01:48:07,985 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-13 01:48:07,985 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-13 01:48:08,013 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 01:48:08,017 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-13 01:48:08,017 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-13 01:48:08,018 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-13 01:48:08,018 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-13 01:48:08,040 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 01:48:08,043 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-13 01:48:08,043 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-13 01:48:08,044 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-13 01:48:08,044 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-13 01:48:08,076 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:48:08,082 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-13 01:48:08,082 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-13 01:48:08,082 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-13 01:48:08,083 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-13 01:48:08,113 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:48:08,119 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-13 01:48:08,119 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-13 01:48:08,119 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:48:08,120 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-13 01:48:08,176 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-13 01:48:08,186 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-13 01:48:08,186 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-13 01:48:08,186 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-13 01:48:08,188 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-13 01:48:08,226 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 01:48:08,232 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-13 01:48:08,233 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-13 01:48:08,233 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-13 01:48:08,234 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-13 01:48:08,264 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:48:08,269 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-13 01:48:08,269 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-13 01:48:08,269 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:48:08,270 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-13 01:48:08,309 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 01:48:08,315 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-13 01:48:08,315 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-13 01:48:08,315 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-13 01:48:08,315 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-13 01:48:08,315 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-13 01:48:08,346 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-13 01:48:08,373 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 01:48:08,385 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 01:48:08,390 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:48:08,390 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-13 01:48:08,390 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-13 01:48:08,391 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:48:08,391 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-13 01:48:08,392 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 01:48:08,394 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:48:08,525 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-13 01:48:08,525 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-13 01:48:08,531 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-13 01:48:08,573 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-13 01:48:08,574 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 01:48:08,585 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 01:48:08,585 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-13 01:48:08,586 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-13 01:48:08,586 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-13 01:48:08,588 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 01:48:08,598 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 01:48:08,598 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-13 01:48:08,598 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 29
2025-06-13 01:48:08,599 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 9
2025-06-13 01:48:08,599 - src.rag.rag_initializer - INFO - ソース 1: vector_database.md (G:\NakedRAG\data\markdowns\vector_database.md)
2025-06-13 01:48:08,599 - src.rag.rag_initializer - INFO - ソース 2: rag_initializer.md (G:\NakedRAG\data\markdowns\rag_initializer.md)
2025-06-13 01:48:08,599 - src.rag.rag_initializer - INFO - ソース 3: embedding_generator.md (G:\NakedRAG\data\markdowns\embedding_generator.md)
2025-06-13 01:48:08,599 - src.rag.rag_initializer - INFO - ソース 4: rag_database.md (G:\NakedRAG\data\markdowns\rag_database.md)
2025-06-13 01:48:08,599 - src.rag.rag_initializer - INFO - ソース 5: base_database.md (G:\NakedRAG\data\markdowns\base_database.md)
2025-06-13 01:48:08,599 - src.rag.rag_initializer - INFO - ...他 4 件のソース
2025-06-13 01:48:08,599 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-13 01:48:08,599 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 01:48:08,599 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:48:08,599 - __main__ - INFO - RAGシステムの初期化が完了しました
2025-06-13 01:48:08,600 - __main__ - INFO - MCPサーバーを起動します...
2025-06-13 01:48:08,600 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-13 01:48:08,600 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-13 01:48:08,600 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-13 01:48:08,600 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-13 01:48:08,601 - __main__ - INFO - Webサーバーを起動します...
2025-06-13 01:48:08,601 - __main__ - INFO - WebServerThreadを開始しました
2025-06-13 01:48:08,601 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-13 01:48:08,607 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 01:48:08,607 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 01:48:08,607 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 01:48:08,607 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 01:48:08,607 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 01:48:10,376 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 01:48:10,377 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-13 01:48:10,380 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-13 01:48:10,380 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-13 01:48:10,380 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-13 01:48:10,380 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-13 01:48:56,979 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-13 01:48:56,979 - __main__ - INFO - アプリケーションを終了します...
2025-06-13 01:48:56,980 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-13 01:48:56,980 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-13 01:48:56,980 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 01:48:56,980 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 01:48:56,980 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 01:48:56,980 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 01:48:57,101 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 01:48:57,101 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 01:57:09,113 - __main__ - INFO - RAGシステムの初期化を開始します...
2025-06-13 01:57:09,117 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-13 01:57:09,117 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\data\source
2025-06-13 01:57:09,117 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\data\markdowns
2025-06-13 01:57:09,117 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-13 01:57:09,118 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-13 01:57:09,150 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-13 01:57:09,150 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-13 01:57:09,150 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-13 01:57:09,150 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-13 01:57:09,150 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-13 01:57:09,177 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-13 01:57:09,208 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-13 01:57:09,208 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-13 01:57:09,241 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-13 01:57:09,272 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-13 01:57:09,272 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-13 01:57:09,304 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-13 01:57:09,304 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-13 01:57:09,327 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-13 01:57:09,327 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-13 01:57:09,328 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-13 01:57:09,328 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-13 01:57:09,357 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-13 01:57:09,357 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-13 01:57:09,357 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-13 01:57:09,380 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 01:57:09,385 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-13 01:57:09,385 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-13 01:57:09,390 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-13 01:57:09,417 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-13 01:57:09,417 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-13 01:57:09,418 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-13 01:57:09,418 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-13 01:57:09,418 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-13 01:57:09,431 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 01:57:09,431 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 01:57:09,433 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 01:57:09,433 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 01:57:11,381 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 01:57:11,381 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:57:11,383 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-13 01:57:11,585 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:57:11,591 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-13 01:57:11,592 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-13 01:57:11,592 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-13 01:57:11,592 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-13 01:57:11,621 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 01:57:11,625 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-13 01:57:11,625 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-13 01:57:11,625 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-13 01:57:11,626 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-13 01:57:11,648 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 01:57:11,652 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-13 01:57:11,652 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-13 01:57:11,653 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-13 01:57:11,653 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-13 01:57:11,684 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:57:11,690 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-13 01:57:11,690 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-13 01:57:11,690 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-13 01:57:11,691 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-13 01:57:11,723 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:57:11,727 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-13 01:57:11,728 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-13 01:57:11,728 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:57:11,729 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-13 01:57:11,783 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-13 01:57:11,795 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-13 01:57:11,795 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-13 01:57:11,796 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-13 01:57:11,796 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-13 01:57:11,835 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 01:57:11,841 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-13 01:57:11,841 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-13 01:57:11,841 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-13 01:57:11,842 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-13 01:57:11,873 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:57:11,878 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-13 01:57:11,878 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-13 01:57:11,879 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:57:11,879 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-13 01:57:11,917 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 01:57:11,923 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-13 01:57:11,923 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-13 01:57:11,924 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-13 01:57:11,924 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-13 01:57:11,924 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-13 01:57:11,950 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-13 01:57:11,975 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 01:57:11,981 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 01:57:11,986 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:57:11,986 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-13 01:57:11,986 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-13 01:57:11,986 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:57:11,986 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-13 01:57:11,988 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 01:57:11,990 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:57:12,014 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-13 01:57:12,014 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-13 01:57:12,020 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-13 01:57:12,069 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-13 01:57:12,069 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 01:57:12,080 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 01:57:12,081 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-13 01:57:12,081 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-13 01:57:12,081 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-13 01:57:12,082 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 01:57:12,093 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 01:57:12,093 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-13 01:57:12,093 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 29
2025-06-13 01:57:12,094 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 9
2025-06-13 01:57:12,094 - src.rag.rag_initializer - INFO - ソース 1: vector_database.md (G:\NakedRAG\data\markdowns\vector_database.md)
2025-06-13 01:57:12,094 - src.rag.rag_initializer - INFO - ソース 2: rag_initializer.md (G:\NakedRAG\data\markdowns\rag_initializer.md)
2025-06-13 01:57:12,094 - src.rag.rag_initializer - INFO - ソース 3: embedding_generator.md (G:\NakedRAG\data\markdowns\embedding_generator.md)
2025-06-13 01:57:12,094 - src.rag.rag_initializer - INFO - ソース 4: rag_database.md (G:\NakedRAG\data\markdowns\rag_database.md)
2025-06-13 01:57:12,094 - src.rag.rag_initializer - INFO - ソース 5: base_database.md (G:\NakedRAG\data\markdowns\base_database.md)
2025-06-13 01:57:12,094 - src.rag.rag_initializer - INFO - ...他 4 件のソース
2025-06-13 01:57:12,094 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-13 01:57:12,095 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 01:57:12,095 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:57:12,095 - __main__ - INFO - RAGシステムの初期化が完了しました
2025-06-13 01:57:12,096 - __main__ - INFO - MCPサーバーを起動します...
2025-06-13 01:57:12,096 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-13 01:57:12,096 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-13 01:57:12,097 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-13 01:57:12,097 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-13 01:57:12,097 - __main__ - INFO - Webサーバーを起動します...
2025-06-13 01:57:12,097 - __main__ - INFO - WebServerThreadを開始しました
2025-06-13 01:57:12,097 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-13 01:57:12,103 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 01:57:12,103 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 01:57:12,103 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 01:57:12,104 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 01:57:12,104 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 01:57:13,619 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 01:57:13,619 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-13 01:57:13,622 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-13 01:57:13,622 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-13 01:57:13,622 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-13 01:57:13,622 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-13 01:59:47,419 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-13 01:59:47,419 - __main__ - INFO - アプリケーションを終了します...
2025-06-13 01:59:47,419 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-13 01:59:47,420 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-13 01:59:47,420 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 01:59:47,420 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 01:59:47,420 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 01:59:47,420 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 01:59:47,532 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 01:59:47,533 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 01:59:54,821 - __main__ - INFO - RAGシステムの初期化を開始します...
2025-06-13 01:59:54,824 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-13 01:59:54,825 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\data\source
2025-06-13 01:59:54,825 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\data\markdowns
2025-06-13 01:59:54,825 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-13 01:59:54,826 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-13 01:59:54,853 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-13 01:59:54,853 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-13 01:59:54,854 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-13 01:59:54,854 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-13 01:59:54,854 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-13 01:59:54,881 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-13 01:59:54,906 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-13 01:59:54,907 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-13 01:59:54,939 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-13 01:59:54,970 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-13 01:59:54,971 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-13 01:59:55,001 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-13 01:59:55,001 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-13 01:59:55,136 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-13 01:59:55,136 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-13 01:59:55,136 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-13 01:59:55,136 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-13 01:59:55,162 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-13 01:59:55,162 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-13 01:59:55,162 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-13 01:59:55,187 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 01:59:55,192 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-13 01:59:55,192 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-13 01:59:55,199 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-13 01:59:55,225 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-13 01:59:55,225 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-13 01:59:55,226 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-13 01:59:55,226 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-13 01:59:55,226 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-13 01:59:55,239 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 01:59:55,239 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 01:59:55,240 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 01:59:55,240 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 01:59:57,220 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 01:59:57,221 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:59:57,223 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-13 01:59:57,423 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:59:57,430 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-13 01:59:57,430 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-13 01:59:57,430 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-13 01:59:57,431 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-13 01:59:57,459 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 01:59:57,462 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-13 01:59:57,462 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-13 01:59:57,463 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-13 01:59:57,463 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-13 01:59:57,486 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 01:59:57,489 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-13 01:59:57,490 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-13 01:59:57,490 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-13 01:59:57,490 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-13 01:59:57,522 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:59:57,527 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-13 01:59:57,527 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-13 01:59:57,527 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-13 01:59:57,528 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-13 01:59:57,559 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:59:57,564 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-13 01:59:57,564 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-13 01:59:57,564 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:59:57,565 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-13 01:59:57,620 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-13 01:59:57,632 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-13 01:59:57,632 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-13 01:59:57,632 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-13 01:59:57,633 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-13 01:59:57,671 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 01:59:57,677 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-13 01:59:57,677 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-13 01:59:57,677 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-13 01:59:57,678 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-13 01:59:57,709 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 01:59:57,714 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-13 01:59:57,715 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-13 01:59:57,715 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-13 01:59:57,716 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-13 01:59:57,753 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 01:59:57,760 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-13 01:59:57,760 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-13 01:59:57,760 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-13 01:59:57,760 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-13 01:59:57,760 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-13 01:59:57,790 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-13 01:59:57,812 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 01:59:57,818 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 01:59:57,822 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:59:57,822 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-13 01:59:57,822 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-13 01:59:57,823 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:59:57,823 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-13 01:59:57,825 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 01:59:57,827 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 01:59:57,850 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-13 01:59:57,850 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-13 01:59:57,855 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-13 01:59:57,898 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-13 01:59:57,898 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 01:59:57,910 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 01:59:57,910 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-13 01:59:57,910 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-13 01:59:57,910 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-13 01:59:57,911 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 01:59:57,921 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 01:59:57,921 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-13 01:59:57,923 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 29
2025-06-13 01:59:57,923 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 9
2025-06-13 01:59:57,923 - src.rag.rag_initializer - INFO - ソース 1: vector_database.md (G:\NakedRAG\data\markdowns\vector_database.md)
2025-06-13 01:59:57,923 - src.rag.rag_initializer - INFO - ソース 2: rag_initializer.md (G:\NakedRAG\data\markdowns\rag_initializer.md)
2025-06-13 01:59:57,923 - src.rag.rag_initializer - INFO - ソース 3: embedding_generator.md (G:\NakedRAG\data\markdowns\embedding_generator.md)
2025-06-13 01:59:57,923 - src.rag.rag_initializer - INFO - ソース 4: rag_database.md (G:\NakedRAG\data\markdowns\rag_database.md)
2025-06-13 01:59:57,923 - src.rag.rag_initializer - INFO - ソース 5: base_database.md (G:\NakedRAG\data\markdowns\base_database.md)
2025-06-13 01:59:57,923 - src.rag.rag_initializer - INFO - ...他 4 件のソース
2025-06-13 01:59:57,924 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-13 01:59:57,924 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 01:59:57,924 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 01:59:57,924 - __main__ - INFO - RAGシステムの初期化が完了しました
2025-06-13 01:59:57,925 - __main__ - INFO - MCPサーバーを起動します...
2025-06-13 01:59:57,925 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-13 01:59:57,925 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-13 01:59:57,925 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-13 01:59:57,925 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-13 01:59:57,925 - __main__ - INFO - Webサーバーを起動します...
2025-06-13 01:59:57,925 - __main__ - INFO - WebServerThreadを開始しました
2025-06-13 01:59:57,925 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-13 01:59:57,931 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 01:59:57,931 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 01:59:57,931 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 01:59:57,931 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 01:59:57,931 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 01:59:59,604 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 01:59:59,605 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-13 01:59:59,607 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-13 01:59:59,607 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-13 01:59:59,607 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-13 01:59:59,608 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-13 02:00:33,515 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-13 02:00:33,516 - __main__ - INFO - アプリケーションを終了します...
2025-06-13 02:00:33,516 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-13 02:00:33,516 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-13 02:00:33,516 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 02:00:33,516 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 02:00:33,516 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 02:00:33,516 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 02:00:33,629 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 02:00:33,629 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 07:25:11,248 - __main__ - INFO - RAGシステムの初期化を開始します...
2025-06-13 07:25:11,251 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-13 07:25:11,251 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\data\source
2025-06-13 07:25:11,251 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\data\markdowns
2025-06-13 07:25:11,251 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-13 07:25:11,253 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-13 07:25:11,297 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-13 07:25:11,298 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-13 07:25:11,298 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-13 07:25:11,298 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-13 07:25:11,298 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-13 07:25:11,324 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-13 07:25:11,351 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-13 07:25:11,351 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-13 07:25:11,382 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-13 07:25:11,415 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-13 07:25:11,415 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-13 07:25:11,445 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-13 07:25:11,445 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-13 07:25:11,470 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-13 07:25:11,470 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-13 07:25:11,470 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-13 07:25:11,470 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-13 07:25:11,499 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-13 07:25:11,499 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-13 07:25:11,499 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-13 07:25:11,627 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 07:25:11,632 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-13 07:25:11,632 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-13 07:25:11,637 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-13 07:25:11,665 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-13 07:25:11,666 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-13 07:25:11,666 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-13 07:25:11,667 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-13 07:25:11,667 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-13 07:25:11,684 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 07:25:11,685 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 07:25:11,686 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 07:25:11,686 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 07:25:13,673 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 07:25:13,673 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-13 07:25:13,681 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-13 07:25:13,879 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 07:25:13,885 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-13 07:25:13,886 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-13 07:25:13,886 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-13 07:25:13,890 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-13 07:25:13,919 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 07:25:13,922 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-13 07:25:13,923 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-13 07:25:13,923 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-13 07:25:13,927 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-13 07:25:13,950 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 07:25:13,953 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-13 07:25:13,954 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-13 07:25:13,954 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-13 07:25:13,959 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-13 07:25:13,990 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 07:25:13,996 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-13 07:25:13,996 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-13 07:25:13,997 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-13 07:25:14,001 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-13 07:25:14,032 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 07:25:14,037 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-13 07:25:14,037 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-13 07:25:14,038 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-13 07:25:14,042 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-13 07:25:14,098 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-13 07:25:14,105 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-13 07:25:14,105 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-13 07:25:14,105 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-13 07:25:14,111 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-13 07:25:14,148 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 07:25:14,154 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-13 07:25:14,155 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-13 07:25:14,155 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-13 07:25:14,159 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-13 07:25:14,190 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 07:25:14,195 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-13 07:25:14,195 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-13 07:25:14,195 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-13 07:25:14,200 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-13 07:25:14,239 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 07:25:14,245 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-13 07:25:14,245 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-13 07:25:14,245 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-13 07:25:14,245 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-13 07:25:14,245 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-13 07:25:14,275 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-13 07:25:14,304 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 07:25:14,309 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 07:25:14,315 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 07:25:14,315 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-13 07:25:14,315 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-13 07:25:14,315 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 07:25:14,316 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-13 07:25:14,317 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 07:25:14,319 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 07:25:14,342 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-13 07:25:14,342 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-13 07:25:14,349 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-13 07:25:14,392 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-13 07:25:14,392 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 07:25:14,404 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 07:25:14,404 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-13 07:25:14,404 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-13 07:25:14,404 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-13 07:25:14,405 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 07:25:14,416 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 07:25:14,416 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-13 07:25:14,417 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 29
2025-06-13 07:25:14,417 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 9
2025-06-13 07:25:14,417 - src.rag.rag_initializer - INFO - ソース 1: vector_database.md (G:\NakedRAG\data\markdowns\vector_database.md)
2025-06-13 07:25:14,417 - src.rag.rag_initializer - INFO - ソース 2: rag_initializer.md (G:\NakedRAG\data\markdowns\rag_initializer.md)
2025-06-13 07:25:14,417 - src.rag.rag_initializer - INFO - ソース 3: embedding_generator.md (G:\NakedRAG\data\markdowns\embedding_generator.md)
2025-06-13 07:25:14,417 - src.rag.rag_initializer - INFO - ソース 4: rag_database.md (G:\NakedRAG\data\markdowns\rag_database.md)
2025-06-13 07:25:14,417 - src.rag.rag_initializer - INFO - ソース 5: base_database.md (G:\NakedRAG\data\markdowns\base_database.md)
2025-06-13 07:25:14,417 - src.rag.rag_initializer - INFO - ...他 4 件のソース
2025-06-13 07:25:14,417 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-13 07:25:14,417 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 07:25:14,417 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 07:25:14,417 - __main__ - INFO - RAGシステムの初期化が完了しました
2025-06-13 07:25:14,418 - __main__ - INFO - MCPサーバーを起動します...
2025-06-13 07:25:14,418 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-13 07:25:14,418 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-13 07:25:14,418 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-13 07:25:14,418 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-13 07:25:14,418 - __main__ - INFO - Webサーバーを起動します...
2025-06-13 07:25:14,418 - __main__ - INFO - WebServerThreadを開始しました
2025-06-13 07:25:14,418 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-13 07:25:14,430 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 07:25:14,430 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 07:25:14,431 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 07:25:14,431 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 07:25:14,431 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 07:25:15,957 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 07:25:15,957 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-13 07:25:15,966 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-13 07:25:15,966 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-13 07:25:15,966 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-13 07:25:15,966 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-13 07:27:56,230 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-13 07:27:56,230 - __main__ - INFO - アプリケーションを終了します...
2025-06-13 07:27:56,230 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-13 07:27:56,230 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-13 07:27:56,230 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 07:27:56,230 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 07:27:56,231 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 07:27:56,231 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 07:27:56,340 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 07:27:56,341 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 07:30:47,851 - __main__ - INFO - RAGシステムの初期化を開始します...
2025-06-13 07:30:47,854 - src.rag.rag_initializer - INFO - RAGシステムの初期化を開始します...
2025-06-13 07:30:47,854 - src.rag.rag_initializer - INFO - ソースディレクトリ: G:\NakedRAG\data\source
2025-06-13 07:30:47,854 - src.rag.rag_initializer - INFO - Markdownディレクトリ: G:\NakedRAG\data\markdowns
2025-06-13 07:30:47,854 - src.rag.rag_initializer - INFO - ソースファイルをMarkdown化しています...
2025-06-13 07:30:47,855 - src.rag.markdowns_maker - INFO - 変換対象ファイル数: 0
2025-06-13 07:30:47,881 - src.rag.rag_initializer - INFO - ソースファイルのMarkdown化が完了しました。
2025-06-13 07:30:47,881 - src.rag.rag_initializer - INFO - データベースの初期化を行っています...
2025-06-13 07:30:47,881 - src.rag.rag_initializer - INFO - RAGデータベースディレクトリ: G:\NakedRAG\db\rag_db
2025-06-13 07:30:47,881 - src.rag.rag_initializer - INFO - ベクトルデータベースディレクトリ: G:\NakedRAG\db\vector_db
2025-06-13 07:30:47,881 - src.rag.rag_initializer - INFO - PostgreSQLデータベースを作成しています...
2025-06-13 07:30:47,910 - src.rag.database_maker - INFO - データベース 'rag_db' は既に存在します。
2025-06-13 07:30:47,940 - src.rag.database_maker - INFO - データベース 'vector_db' は既に存在します。
2025-06-13 07:30:47,940 - src.rag.rag_initializer - INFO - pgvector拡張機能を有効にしています...
2025-06-13 07:30:47,972 - src.rag.database_maker - INFO - データベース 'rag_db' でpgvector拡張機能を有効にしました。
2025-06-13 07:30:48,003 - src.rag.database_maker - INFO - データベース 'vector_db' でpgvector拡張機能を有効にしました。
2025-06-13 07:30:48,003 - src.rag.rag_initializer - INFO - RAGテーブルを作成しています...
2025-06-13 07:30:48,034 - src.rag.database_maker - INFO - rag_documentsテーブルを作成しました。
2025-06-13 07:30:48,034 - src.rag.rag_initializer - INFO - ベクトルテーブルを作成しています...
2025-06-13 07:30:48,067 - src.rag.database_maker - INFO - vector_embeddingsテーブルを作成しました。
2025-06-13 07:30:48,067 - src.rag.rag_initializer - INFO - データベースとテーブルの作成が完了しました。
2025-06-13 07:30:48,067 - src.rag.rag_initializer - INFO - ベクトルデータベースを初期化しています...
2025-06-13 07:30:48,067 - src.rag.rag_initializer - INFO - テーブルリセット設定: True
2025-06-13 07:30:48,093 - src.rag.rag_initializer - INFO - テーブル存在確認結果: True
2025-06-13 07:30:48,093 - src.rag.rag_initializer - INFO - ベクトルテーブルリセット設定: True
2025-06-13 07:30:48,093 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、ベクトルデータベーステーブルを再作成します...
2025-06-13 07:30:48,117 - VectorDatabase - INFO - データベースに接続しました。
2025-06-13 07:30:48,122 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを削除しました。
2025-06-13 07:30:48,122 - src.rag.rag_initializer - INFO - ベクトルデータベーステーブルを作成しています...
2025-06-13 07:30:48,129 - VectorDatabase - INFO - テーブル 'vector_embeddings' を作成しました。
2025-06-13 07:30:48,162 - src.rag.rag_initializer - INFO - テーブル作成確認結果: True
2025-06-13 07:30:48,162 - src.rag.rag_initializer - INFO - Markdownディレクトリ 'G:\NakedRAG\data\markdowns' を処理しています...
2025-06-13 07:30:48,162 - VectorDatabase - INFO - テーブル 'vector_embeddings' は空です。全ファイルを処理します。
2025-06-13 07:30:48,163 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' を処理しています...
2025-06-13 07:30:48,163 - VectorDatabase - INFO - 埋め込みベクトル生成器を初期化しています。モデル: intfloat/multilingual-e5-large
2025-06-13 07:30:48,174 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 07:30:48,174 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 07:30:48,176 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 07:30:48,176 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 07:30:50,123 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 07:30:50,124 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の元ファイルが見つかりませんでした。
2025-06-13 07:30:50,127 - VectorDatabase - INFO - ファイル 'base_database.md' を 3 個のチャンクに分割しました。
2025-06-13 07:30:50,323 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 07:30:50,329 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\base_database.md' の 3 個のチャンクを格納しました。
2025-06-13 07:30:50,329 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' を処理しています...
2025-06-13 07:30:50,330 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の元ファイルが見つかりませんでした。
2025-06-13 07:30:50,331 - VectorDatabase - INFO - ファイル 'chunk_processor.md' を 2 個のチャンクに分割しました。
2025-06-13 07:30:50,358 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 07:30:50,361 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\chunk_processor.md' の 2 個のチャンクを格納しました。
2025-06-13 07:30:50,361 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' を処理しています...
2025-06-13 07:30:50,362 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の元ファイルが見つかりませんでした。
2025-06-13 07:30:50,362 - VectorDatabase - INFO - ファイル 'cli.md' を 2 個のチャンクに分割しました。
2025-06-13 07:30:50,386 - embedding_generator - INFO - 2 個のテキストのエンベディングを生成しました
2025-06-13 07:30:50,390 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\cli.md' の 2 個のチャンクを格納しました。
2025-06-13 07:30:50,390 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' を処理しています...
2025-06-13 07:30:50,390 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の元ファイルが見つかりませんでした。
2025-06-13 07:30:50,392 - VectorDatabase - INFO - ファイル 'database_updater.md' を 3 個のチャンクに分割しました。
2025-06-13 07:30:50,426 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 07:30:50,432 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\database_updater.md' の 3 個のチャンクを格納しました。
2025-06-13 07:30:50,432 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' を処理しています...
2025-06-13 07:30:50,432 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の元ファイルが見つかりませんでした。
2025-06-13 07:30:50,433 - VectorDatabase - INFO - ファイル 'embedding_generator.md' を 3 個のチャンクに分割しました。
2025-06-13 07:30:50,464 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 07:30:50,470 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\embedding_generator.md' の 3 個のチャンクを格納しました。
2025-06-13 07:30:50,470 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' を処理しています...
2025-06-13 07:30:50,470 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の元ファイルが見つかりませんでした。
2025-06-13 07:30:50,471 - VectorDatabase - INFO - ファイル 'rag_database.md' を 5 個のチャンクに分割しました。
2025-06-13 07:30:50,526 - embedding_generator - INFO - 5 個のテキストのエンベディングを生成しました
2025-06-13 07:30:50,536 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_database.md' の 5 個のチャンクを格納しました。
2025-06-13 07:30:50,538 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' を処理しています...
2025-06-13 07:30:50,538 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の元ファイルが見つかりませんでした。
2025-06-13 07:30:50,538 - VectorDatabase - INFO - ファイル 'rag_initializer.md' を 4 個のチャンクに分割しました。
2025-06-13 07:30:50,578 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 07:30:50,585 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_initializer.md' の 4 個のチャンクを格納しました。
2025-06-13 07:30:50,585 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' を処理しています...
2025-06-13 07:30:50,585 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の元ファイルが見つかりませんでした。
2025-06-13 07:30:50,586 - VectorDatabase - INFO - ファイル 'rag_service.md' を 3 個のチャンクに分割しました。
2025-06-13 07:30:50,617 - embedding_generator - INFO - 3 個のテキストのエンベディングを生成しました
2025-06-13 07:30:50,621 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\rag_service.md' の 3 個のチャンクを格納しました。
2025-06-13 07:30:50,621 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' を処理しています...
2025-06-13 07:30:50,622 - VectorDatabase - WARNING - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の元ファイルが見つかりませんでした。
2025-06-13 07:30:50,622 - VectorDatabase - INFO - ファイル 'vector_database.md' を 4 個のチャンクに分割しました。
2025-06-13 07:30:50,660 - embedding_generator - INFO - 4 個のテキストのエンベディングを生成しました
2025-06-13 07:30:50,667 - VectorDatabase - INFO - ファイル 'G:\NakedRAG\data\markdowns\vector_database.md' の 4 個のチャンクを格納しました。
2025-06-13 07:30:50,667 - VectorDatabase - INFO - 合計 29 個のチャンクを格納しました。
2025-06-13 07:30:50,667 - src.rag.rag_initializer - INFO - 合計 29 個のチャンクを処理しました。
2025-06-13 07:30:50,667 - src.rag.rag_initializer - INFO - ベクトルデータベースの更新が完了しました。
2025-06-13 07:30:50,667 - src.rag.rag_initializer - INFO - RAGデータベースを初期化しています...
2025-06-13 07:30:50,695 - src.rag.rag_initializer - INFO - テーブルリセットモードが有効なため、RAGデータベーステーブルを再作成します...
2025-06-13 07:30:50,817 - RAGDatabase - INFO - データベースに接続しました。
2025-06-13 07:30:50,822 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 07:30:50,827 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 07:30:50,829 - src.rag.rag_initializer - INFO - RAGデータベーステーブルをリセットしました。
2025-06-13 07:30:50,829 - src.rag.rag_initializer - INFO - RAGデータベーステーブルを作成しています...
2025-06-13 07:30:50,829 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 07:30:50,829 - src.rag.rag_initializer - INFO - ベクトルデータベースからデータを取り込んでいます...
2025-06-13 07:30:50,830 - RAGDatabase - INFO - テーブル 'rag_documents' を削除しました。
2025-06-13 07:30:50,831 - RAGDatabase - INFO - テーブル 'rag_documents' を作成しました。
2025-06-13 07:30:50,856 - RAGDatabase - INFO - ベクトルデータベースから 29 件のデータを取得します。
2025-06-13 07:30:50,856 - RAGDatabase - INFO - バッチ処理: 0 - 29 / 29
2025-06-13 07:30:50,862 - RAGDatabase - INFO - 使用するカラム名: ファイル名=filename, パス=filepath, chunk_index存在=True, original_filepath存在=True
2025-06-13 07:30:50,905 - RAGDatabase - INFO - データ挿入完了後に検索インデックスを作成します。
2025-06-13 07:30:50,905 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 07:30:50,915 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 07:30:50,915 - RAGDatabase - INFO - 29件のドキュメントをRAGデータベースに格納しました。
2025-06-13 07:30:50,917 - src.rag.rag_initializer - INFO - 合計 29 個のドキュメントを取り込みました。
2025-06-13 07:30:50,917 - src.rag.rag_initializer - INFO - 検索インデックスを作成しています...
2025-06-13 07:30:50,918 - RAGDatabase - INFO - データ量 29 件に対して 10 クラスタでインデックスを作成します。
2025-06-13 07:30:50,929 - RAGDatabase - INFO - テーブル 'rag_documents' にivfflat検索インデックスを作成しました。
2025-06-13 07:30:50,929 - src.rag.rag_initializer - INFO - RAGデータベースの更新が完了しました。
2025-06-13 07:30:50,930 - src.rag.rag_initializer - INFO - RAGデータベース内のドキュメント数: 29
2025-06-13 07:30:50,930 - src.rag.rag_initializer - INFO - RAGデータベース内のユニークなソース数: 9
2025-06-13 07:30:50,930 - src.rag.rag_initializer - INFO - ソース 1: vector_database.md (G:\NakedRAG\data\markdowns\vector_database.md)
2025-06-13 07:30:50,930 - src.rag.rag_initializer - INFO - ソース 2: rag_initializer.md (G:\NakedRAG\data\markdowns\rag_initializer.md)
2025-06-13 07:30:50,930 - src.rag.rag_initializer - INFO - ソース 3: embedding_generator.md (G:\NakedRAG\data\markdowns\embedding_generator.md)
2025-06-13 07:30:50,930 - src.rag.rag_initializer - INFO - ソース 4: rag_database.md (G:\NakedRAG\data\markdowns\rag_database.md)
2025-06-13 07:30:50,931 - src.rag.rag_initializer - INFO - ソース 5: base_database.md (G:\NakedRAG\data\markdowns\base_database.md)
2025-06-13 07:30:50,931 - src.rag.rag_initializer - INFO - ...他 4 件のソース
2025-06-13 07:30:50,931 - src.rag.rag_initializer - INFO - RAGシステムの初期化が正常に完了しました。
2025-06-13 07:30:50,931 - VectorDatabase - INFO - データベースから切断しました。
2025-06-13 07:30:50,931 - RAGDatabase - INFO - データベースから切断しました。
2025-06-13 07:30:50,931 - __main__ - INFO - RAGシステムの初期化が完了しました
2025-06-13 07:30:50,931 - __main__ - INFO - MCPサーバーを起動します...
2025-06-13 07:30:50,932 - __main__ - INFO - MCPServerThreadを開始しました
2025-06-13 07:30:50,932 - src.server.fastmcp_server - INFO - 司書LLMエージェントを使用したFastMCPサーバーを起動します
2025-06-13 07:30:50,932 - src.utils.resource_manager - INFO - 共有リソースマネージャーを初期化しました
2025-06-13 07:30:50,932 - src.utils.resource_manager - INFO - 司書LLMエージェントを初期化しています...
2025-06-13 07:30:50,932 - __main__ - INFO - Webサーバーを起動します...
2025-06-13 07:30:50,932 - __main__ - INFO - WebServerThreadを開始しました
2025-06-13 07:30:50,932 - __main__ - WARNING - Webサーバーモジュールが実装されていないため、起動をスキップします
2025-06-13 07:30:50,938 - src.rag.rag_class - INFO - RAGシステムを初期化しました。ソースディレクトリ: ./data/source, Markdownディレクトリ: ./data/markdowns
2025-06-13 07:30:50,938 - embedding_generator - INFO - PyTorchデバイス: cuda
2025-06-13 07:30:50,938 - embedding_generator - INFO - CUDAデバイス数: 1
2025-06-13 07:30:50,938 - embedding_generator - INFO - CUDAデバイス名: NVIDIA GeForce RTX 4070 Ti SUPER
2025-06-13 07:30:50,939 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込んでいます...
2025-06-13 07:30:52,475 - embedding_generator - INFO - ローカルからモデル './models\multilingual-e5-large' を読み込みました
2025-06-13 07:30:52,476 - src.rag.rag_searcher - INFO - PyTorchデバイス: cuda
2025-06-13 07:30:52,479 - src.rag.rag_searcher - INFO - Ollamaサーバー接続成功: {'version': '0.7.0'}
2025-06-13 07:30:52,479 - src.rag.rag_searcher - INFO - RAG検索を初期化しました。LLMモデル: gemma3:12b, 埋め込みモデル: intfloat/multilingual-e5-large
2025-06-13 07:30:52,479 - src.agents.librarian_agent - INFO - 司書LLMエージェント（librarian）を初期化しました: model=gemma3:12b, temperature=0.7
2025-06-13 07:30:52,479 - src.utils.resource_manager - INFO - 司書LLMエージェントの初期化が完了しました
2025-06-13 07:32:48,765 - __main__ - INFO - キーボード割り込みを受信しました。アプリケーションを終了します。
2025-06-13 07:32:48,765 - __main__ - INFO - アプリケーションを終了します...
2025-06-13 07:32:48,765 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップを開始します...
2025-06-13 07:32:48,765 - src.utils.resource_manager - INFO - 司書LLMエージェントのリソースをクリーンアップします
2025-06-13 07:32:48,765 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 07:32:48,765 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 07:32:48,767 - src.utils.resource_manager - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 07:32:48,767 - __main__ - INFO - 共有リソースのクリーンアップが完了しました
2025-06-13 07:32:48,886 - src.rag.rag_class - INFO - リソースのクリーンアップを開始します。
2025-06-13 07:32:48,888 - src.rag.rag_class - INFO - リソースのクリーンアップが完了しました。
2025-06-13 07:41:17,915 - __main__ - INFO - Markdownディレクトリ: G:\NakedRAG\data/markdowns
2025-06-13 07:41:17,915 - __main__ - INFO - ソースディレクトリ: G:\NakedRAG\data/source
2025-06-13 07:41:17,916 - __main__ - INFO - Markdownファイル数: 9
2025-06-13 07:41:17,916 - __main__ - INFO - 検索中: base_database.md (ベース名: base_database)
2025-06-13 07:41:17,916 - __main__ - INFO - 完全一致で見つかりました: original_filepath=data\source\markdown\base_database.md
2025-06-13 07:41:17,916 - __main__ - INFO - 検索中: chunk_processor.md (ベース名: chunk_processor)
2025-06-13 07:41:17,916 - __main__ - INFO - 完全一致で見つかりました: original_filepath=data\source\markdown\chunk_processor.md
2025-06-13 07:41:17,916 - __main__ - INFO - 検索中: cli.md (ベース名: cli)
2025-06-13 07:41:17,916 - __main__ - INFO - 完全一致で見つかりました: original_filepath=data\source\markdown\cli.md
2025-06-13 07:41:17,916 - __main__ - INFO - 検索中: database_updater.md (ベース名: database_updater)
2025-06-13 07:41:17,916 - __main__ - INFO - 完全一致で見つかりました: original_filepath=data\source\markdown\database_updater.md
2025-06-13 07:41:17,916 - __main__ - INFO - 検索中: embedding_generator.md (ベース名: embedding_generator)
2025-06-13 07:41:17,916 - __main__ - INFO - 完全一致で見つかりました: original_filepath=data\source\markdown\embedding_generator.md
2025-06-13 07:41:17,916 - __main__ - INFO - 検索中: rag_database.md (ベース名: rag_database)
2025-06-13 07:41:17,917 - __main__ - INFO - 完全一致で見つかりました: original_filepath=data\source\markdown\rag_database.md
2025-06-13 07:41:17,917 - __main__ - INFO - 検索中: rag_initializer.md (ベース名: rag_initializer)
2025-06-13 07:41:17,917 - __main__ - INFO - 完全一致で見つかりました: original_filepath=data\source\markdown\rag_initializer.md
2025-06-13 07:41:17,917 - __main__ - INFO - 検索中: rag_service.md (ベース名: rag_service)
2025-06-13 07:41:17,917 - __main__ - INFO - 完全一致で見つかりました: original_filepath=data\source\markdown\rag_service.md
2025-06-13 07:41:17,917 - __main__ - INFO - 検索中: vector_database.md (ベース名: vector_database)
2025-06-13 07:41:17,917 - __main__ - INFO - 完全一致で見つかりました: original_filepath=data\source\markdown\vector_database.md
